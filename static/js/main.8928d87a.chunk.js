(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{140:function(e,t,a){e.exports={feeMagicBtn:"styles_feeMagicBtn__3rvPV",utxoTxid:"styles_utxoTxid__2mEZz",outputsFormInput:"styles_outputsFormInput__1c3_M",unconfirmed:"styles_unconfirmed__3rm0X"}},366:function(e){e.exports={a:"0.1.3"}},380:function(e,t,a){e.exports=a(750)},569:function(e,t){},572:function(e,t){},592:function(e,t){},594:function(e,t){},660:function(e,t,a){},748:function(e,t,a){e.exports=a.p+"static/media/logo.66481e66.png"},750:function(e,t,a){"use strict";a.r(t);a(381);var r=a(0),n=a.n(r),i=a(29),l=a.n(i),o=a(83),c=a(21),s=a(351),u=a.n(s),m=a(352),d=a.n(m),p=a(353),h=a(839),E=a(842),b=a(845);function f(e,t){return n.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},t)}function v(e,t){for(var a=[],r=0,i=0;r<=e.length;)a.push(n.a.createElement("span",{key:i},e.slice(r,r+=t||64))),a.push(n.a.createElement("br",{key:i+1})),i+=2;return a}var P=a(838),g=a(85),y=a(797),I=a(791),S=a(795),O=a(796),T=a(798),w=a(752),j=a(799),C=a(801),_=a(804),R=a(805),B=a(800),K=a(802),x=a(803),k=a(806),A=function(){return n.a.createElement(I.a,null,n.a.createElement(S.a,{title:"Disclaimer"}),n.a.createElement(O.a,null,n.a.createElement("small",null,"This application is in \u201calpha\u201d state and is presented for evaluation and testing only. It is provided \u201cas is,\u201d and any express or implied warranties, including but not limited to the implied warranties of merchantability and fitness for a particular purpose, are disclaimed. By using this application, you accept all risks of such use, including full responsibility for any direct or indirect loss of any kind resulting from the use of this application, which may involve complete loss of any Bitcoin or other coins associated with addresses used with this application. In no event shall Unchained Capital, Inc., its employees and affiliates, or developers of this application be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this application, even if advised of the possibility of such damage.")))},N=function(){return n.a.createElement("div",null,n.a.createElement(P.a,{mt:4,mb:2},n.a.createElement(g.a,{variant:"h2"},"Welcome to Caravan!")),n.a.createElement(y.a,{container:!0,spacing:3},n.a.createElement(y.a,{container:!0,item:!0,md:8,spacing:2,direction:"column"},n.a.createElement(y.a,{item:!0},n.a.createElement(I.a,null,n.a.createElement(S.a,{title:"Stateless Multisig Coordinator"}),n.a.createElement(O.a,null,n.a.createElement("p",null,"Caravan is making bitcoin ",n.a.createElement("strong",null,"multisig")," custody easier and safer through transparency and standards."),n.a.createElement("p",null,"Caravan is a ",n.a.createElement("strong",null,"coordination")," software.  It connects to a source of consensus and your keys to build and interact with multisig bitcoin addresses."),n.a.createElement("p",null,"Caravan is also ",n.a.createElement("strong",null,"stateless"),".  It does not itself store any data.  You must safekeep the addresses (and redeem scripts & BIP32 paths) you create.")))),n.a.createElement(y.a,{item:!0},n.a.createElement(I.a,null,n.a.createElement(S.a,{title:"Keys"}),n.a.createElement(O.a,null,n.a.createElement("p",null,"All bitcoin is ultimately protected by private keys."),n.a.createElement("p",null,"Your private key may live on a piece of paper, a hardware wallet, some software on a laptop, or even just in your mind.  Caravan, being stateless, cannot store your private key but it can talk to hardware devices or software applications which do."),n.a.createElement("p",null,"Caravan supports entering public keys and signatures via text, so any wallet which can export such data can be made compatible with Caravan.")))),n.a.createElement(y.a,{item:!0},n.a.createElement(I.a,null,n.a.createElement(S.a,{title:"Consensus"}),n.a.createElement(O.a,null,n.a.createElement("p",null,"In order to look up address balances and broadcast transactions, Caravan requires knowledge of the constantly changing bitcoin network."),n.a.createElement("p",null,"Running a full bitcoin node is the best way to determine the current state of the bitcoin network.  Caravan can be easily configured to use your own bitcoin node for consensus information and broadcasting transactions."),n.a.createElement("p",null,"If you don't want to or cannot run your own full node, Caravan defaults to using the freely available API at ",n.a.createElement("code",null,"blockstream.info"),"."))))),n.a.createElement(y.a,{container:!0,item:!0,md:4,spacing:4,direction:"column"},n.a.createElement(y.a,{item:!0},n.a.createElement(I.a,null,n.a.createElement(S.a,{title:"Learn More"}),n.a.createElement(O.a,null,n.a.createElement(T.a,null,n.a.createElement(w.a,null,n.a.createElement(j.a,null,n.a.createElement(B.a,null)),n.a.createElement(C.a,null,f("https://www.unchained-capital.com/blog/the-caravan-arrives/","Blog Post"))),n.a.createElement(w.a,null,n.a.createElement(j.a,null,n.a.createElement(K.a,null)),n.a.createElement(C.a,null,f("https://www.youtube.com/playlist?list=PLUM8mrUjWoPRsVGEZ1gTntqPd4xrQZoiH","Video Tutorials"))),n.a.createElement(w.a,null,n.a.createElement(j.a,null,n.a.createElement(x.a,null)),n.a.createElement(C.a,null,f("https://github.com/unchained-capital/caravan","Source Code"))))))),n.a.createElement(y.a,{item:!0},n.a.createElement(I.a,null,n.a.createElement(S.a,{title:"Supported Devices"}),n.a.createElement(O.a,null,"Caravan has been tested with the following hardware wallets:",n.a.createElement("ul",null,n.a.createElement("li",null,f("https://shop.trezor.io/product/trezor-one-white","Trezor One")),n.a.createElement("li",null,f("https://www.ledger.com/products/ledger-nano-s","Ledger Nano S"))),"And web browsers:",n.a.createElement("ul",null,n.a.createElement("li",null,f("https://www.google.com/chrome/","Chrome")),n.a.createElement("li",null,f("https://www.mozilla.org/en-US/firefox/new/","Firefox"))),"Seeing a bug or need a feature?"),n.a.createElement(_.a,null,n.a.createElement(R.a,{href:"https://github.com/unchained-capital/caravan/issues"},n.a.createElement(k.a,null)," \xa0 Report Issue")))))),n.a.createElement(P.a,{mt:2},n.a.createElement(A,null)))},M=a(8),U=a(10),D=a(12),L=a(11),z=a(13),F=a(26),H=a(2),W=a(753),G=a(807),q=a(808),Y=a(841),X=a(756),V="SET_NETWORK",Z="SET_TOTAL_SIGNERS",J="SET_REQUIRED_SIGNERS",Q="SET_ADDRESS_TYPE",$="SET_FROZEN";var ee=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(n)))).handleNetworkChange=function(e){(0,a.props.setNetwork)(e.target.value)},a}return Object(z.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.props,t=e.network,a=e.frozen;return n.a.createElement(I.a,null,n.a.createElement(S.a,{title:"Network"}),n.a.createElement(O.a,null,n.a.createElement(W.a,{component:"fieldset"},n.a.createElement(G.a,null,n.a.createElement(q.a,{id:"mainnet",control:n.a.createElement(Y.a,{color:"primary"}),name:"network",value:"mainnet",label:n.a.createElement("strong",null,"Mainnet"),onChange:this.handleNetworkChange,checked:t===H.MAINNET,disabled:a}),n.a.createElement(q.a,{id:"testnet",control:n.a.createElement(Y.a,{color:"primary"}),name:"network",value:"testnet",label:"Testnet",onChange:this.handleNetworkChange,checked:t===H.TESTNET,disabled:a})),n.a.createElement(X.a,null,n.a.createElement("small",null,"Choose 'Mainnet' if you don't understand the difference.")))))}}]),t}(n.a.Component);var te={setNetwork:function(e){return{type:V,value:e}}},ae=Object(c.b)(function(e){return{network:e.settings.network,frozen:e.settings.frozen}},te)(ee),re=a(755),ne=a(809),ie=a(810),le=(a(660),7),oe=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).renderIncrementRequiredSigners=function(){var e=a.props,t=e.requiredSigners,r=e.totalSigners,i=e.frozen,l=t===r||i;return n.a.createElement(re.a,{color:"primary",onClick:a.handleIncrementRequiredSigners,disabled:l},n.a.createElement(ne.a,null))},a.renderDecrementRequiredSigners=function(){var e=a.props,t=e.requiredSigners,r=e.frozen,i=1===t||r;return n.a.createElement(re.a,{color:"secondary",onClick:a.handleDecrementRequiredSigners,disabled:i},n.a.createElement(ie.a,null))},a.renderIncrementTotalSigners=function(){var e=a.props,t=e.totalSigners,r=e.frozen,i=t===le||r;return n.a.createElement(re.a,{color:"primary",onClick:a.handleIncrementTotalSigners,disabled:i},n.a.createElement(ne.a,null))},a.renderDecrementTotalSigners=function(){var e=a.props,t=e.requiredSigners,r=e.totalSigners,i=e.frozen,l=r===t||2===r||i;return n.a.createElement(re.a,{color:"secondary",onClick:a.handleDecrementTotalSigners,disabled:l},n.a.createElement(ie.a,null))},a.handleIncrementRequiredSigners=function(e){var t=a.props,r=t.requiredSigners;(0,t.setRequiredSigners)(r+1),e.preventDefault()},a.handleDecrementRequiredSigners=function(e){var t=a.props,r=t.requiredSigners;(0,t.setRequiredSigners)(r-1),e.preventDefault()},a.handleIncrementTotalSigners=function(e){var t=a.props,r=t.totalSigners;(0,t.setTotalSigners)(r+1),e.preventDefault()},a.handleDecrementTotalSigners=function(e){var t=a.props,r=t.totalSigners;(0,t.setTotalSigners)(r-1),e.preventDefault()},a}return Object(z.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.props,t=e.requiredSigners,a=e.totalSigners;return n.a.createElement(I.a,null,n.a.createElement(S.a,{title:"Quorum"}),n.a.createElement(O.a,null,n.a.createElement(P.a,null,n.a.createElement(y.a,{container:!0,justify:"center"},n.a.createElement(y.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0"),n.a.createElement(y.a,{container:!0,item:!0,xs:3,direction:"column",alignItems:"center"},n.a.createElement(y.a,{item:!0},this.renderIncrementRequiredSigners()),n.a.createElement(y.a,{item:!0},n.a.createElement(g.a,{variant:"h2"},t)),n.a.createElement(y.a,{item:!0},n.a.createElement("small",null,n.a.createElement("p",null,"Required"))),n.a.createElement(y.a,{item:!0},this.renderDecrementRequiredSigners())),n.a.createElement(y.a,{container:!0,item:!0,xs:2,direction:"column",alignItems:"center",justify:"center"},n.a.createElement(y.a,{item:!0},n.a.createElement(g.a,{variant:"h6"},"of"))),n.a.createElement(y.a,{item:!0,container:!0,xs:3,direction:"column",alignItems:"center"},n.a.createElement(y.a,{item:!0},this.renderIncrementTotalSigners()),n.a.createElement(y.a,{item:!0},n.a.createElement(g.a,{variant:"h2"},a)),n.a.createElement(y.a,{item:!0},n.a.createElement("small",null,n.a.createElement("p",null,"Total"))),n.a.createElement(y.a,{item:!0},this.renderDecrementTotalSigners())),n.a.createElement(y.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0")))))}}]),t}(n.a.Component);var ce={setTotalSigners:function(e){return{type:Z,value:e}},setRequiredSigners:function(e){return{type:J,value:e}}},se=Object(c.b)(function(e){return e.settings},ce)(oe),ue=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(n)))).handleTypeChange=function(e){(0,a.props.setType)(e.target.value)},a}return Object(z.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.props,t=e.addressType,a=e.frozen;return n.a.createElement(I.a,null,n.a.createElement(S.a,{title:"Address Type"}),n.a.createElement(O.a,null,n.a.createElement(W.a,{component:"fieldset"},n.a.createElement(G.a,null,n.a.createElement(q.a,{id:H.P2SH,control:n.a.createElement(Y.a,{color:"primary"}),name:"type",value:H.P2SH,label:H.P2SH,onChange:this.handleTypeChange,checked:t===H.P2SH,disabled:a}),n.a.createElement(q.a,{id:H.P2SH_P2WSH,control:n.a.createElement(Y.a,{color:"primary"}),name:"type",value:H.P2SH_P2WSH,label:H.P2SH_P2WSH,onChange:this.handleTypeChange,checked:t===H.P2SH_P2WSH,disabled:a}),n.a.createElement(q.a,{id:H.P2WSH,control:n.a.createElement(Y.a,{color:"primary"}),name:"type",value:H.P2WSH,label:H.P2WSH,onChange:this.handleTypeChange,checked:t===H.P2WSH,disabled:a})),n.a.createElement(X.a,null,n.a.createElement("small",null,"Choose '",H.P2WSH,"' for best practices, '",H.P2SH,"' for greatest compatibility.")))))}}]),t}(n.a.Component);var me={setType:function(e){return{type:Q,value:e}}},de=Object(c.b)(function(e){return e.settings},me)(ue);function pe(e){return function(t){return{type:e,value:t}}}function he(e){return function(t,a){return{type:e,number:t,value:a}}}function Ee(e){var t,a={},r=Object.keys(e);for(t=0;t<r.length;t+=1){var n=r[t],i=e[n];a[n]=he(i)}return a}var be="SORT_PUBLIC_KEY_IMPORTERS";var fe=Ee({setPublicKeyImporterName:"SET_PUBLIC_KEY_IMPORTER_NAME",resetPublicKeyImporterBIP32Path:"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterBIP32Path:"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterMethod:"SET_PUBLIC_KEY_IMPORTER_METHOD",setPublicKeyImporterPublicKey:"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY",setPublicKeyImporterFinalized:"SET_PUBLIC_KEY_IMPORTER_FINALIZED",movePublicKeyImporterUp:"MOVE_PUBLIC_KEY_IMPORTER_UP",movePublicKeyImporterDown:"MOVE_PUBLIC_KEY_IMPORTER_DOWN"}),ve=fe.setPublicKeyImporterName,Pe=fe.setPublicKeyImporterBIP32Path,ge=fe.resetPublicKeyImporterBIP32Path,ye=fe.setPublicKeyImporterMethod,Ie=fe.setPublicKeyImporterPublicKey,Se=fe.setPublicKeyImporterFinalized,Oe=fe.movePublicKeyImporterUp,Te=fe.movePublicKeyImporterDown,we=a(358),je=a.n(we),Ce=a(811),_e=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).state={copied:!1,timer:null},a.componentWillUnmount=function(){var e=a.state.timer;e&&clearTimeout(e)},a.render=function(){var e=a.props,t=e.newline,r=e.text,i=e.children;return n.a.createElement(je.a,{text:r,onCopy:a.onCopy,options:{format:"text/plain"}},n.a.createElement("span",{className:"copyable"},i||r,t&&n.a.createElement("br",null),a.badge()))},a.badge=function(){return a.state.copied?n.a.createElement(Ce.a,{fontSize:"small"}):null},a.onCopy=function(){var e=setTimeout(function(){a.setState({copied:!1,timer:null})},1e3);a.setState({copied:!0,timer:e})},a}return Object(z.a)(t,e),t}(n.a.Component);_e.defaultProps={newline:!1,icon:!0};var Re=_e,Be=a(844),Ke=a(812),xe=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).renderScript=function(e,t){var a=Object(H.scriptToHex)(t),r=Object(H.scriptToOps)(t);return n.a.createElement(P.a,{mt:2},n.a.createElement(g.a,{variant:"h6"},e),n.a.createElement(y.a,{container:!0},n.a.createElement(y.a,{item:!0,sm:6},n.a.createElement(Re,{text:a},n.a.createElement("code",null,v(a,48)))),n.a.createElement(y.a,{item:!0,sm:6},n.a.createElement(Re,{text:r},n.a.createElement("code",null,v(r,48))))))},a}return Object(z.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.props,t=e.network,a=e.multisig,r=a.address,i=Object(H.multisigRedeemScript)(a),l=Object(H.multisigWitnessScript)(a);return n.a.createElement(P.a,{mt:2},n.a.createElement(g.a,{variant:"h6"},"Address"),n.a.createElement(g.a,{align:"center",variant:"h5"},n.a.createElement(y.a,{container:!0,direction:"column",spacing:2},n.a.createElement(y.a,{item:!0},n.a.createElement(Re,{text:r},n.a.createElement("code",null,r)),"\xa0",f(Object(H.blockExplorerAddressURL)(r,t),n.a.createElement(Ke.a,null))),n.a.createElement(y.a,{item:!0,justify:"center",container:!0,spacing:3},n.a.createElement(y.a,{item:!0},n.a.createElement(Be.a,{label:"BTC"})),n.a.createElement(y.a,{item:!0},n.a.createElement(Be.a,{label:Object(H.networkLabel)(t)})),n.a.createElement(y.a,{item:!0},n.a.createElement(Be.a,{label:"".concat(Object(H.multisigRequiredSigners)(a),"-of-").concat(Object(H.multisigTotalSigners)(a))})),n.a.createElement(y.a,{item:!0},n.a.createElement(Be.a,{label:Object(H.multisigAddressType)(a)}))))),this.renderScript("Script",a),i&&this.renderScript("Redeem Script",i),l&&this.renderScript("Witness Script",l))}}]),t}(n.a.Component);var ke=Object(c.b)(function(e){return e.settings},{})(xe),Ae=a(813),Ne=function(){return n.a.createElement("small",null,n.a.createElement(T.a,null,n.a.createElement(w.a,{color:"error.main"},n.a.createElement(j.a,null,n.a.createElement(g.a,{color:"error"},n.a.createElement(Ae.a,null))),n.a.createElement(C.a,null,n.a.createElement(g.a,{color:"error"},"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!")))))},Me=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).title=function(){var e=a.props,t=e.totalSigners,r=e.requiredSigners,i=e.addressType;return n.a.createElement(y.a,{container:!0,justify:"space-between"},n.a.createElement(y.a,{item:!0},r,"-of-",t," Multisig ",i," Address"),n.a.createElement(y.a,{item:!0},n.a.createElement("small",null,"Public Keys: ".concat(a.publicKeyCount(),"/").concat(t))))},a.isInConflict=function(){var e=a.props.publicKeyImporters;return Object.values(e).some(function(e){return e.conflict})},a.publicKeyCount=function(){var e=a.props.publicKeyImporters;return Object.values(e).filter(function(e){return e.finalized}).length},a.publicKeysAreCanonicallySorted=function(){var e=a.props.publicKeyImporters,t=Object.values(e).map(function(e){return e.publicKey}).filter(function(e){return""!==e}),r=Object.values(e).map(function(e){return e.publicKey}).filter(function(e){return""!==e}).sort();return t.filter(function(e,t){return e===r[t]}).length===t.length},a.canonicallySortPublicKeys=function(){(0,a.props.sortPublicKeyImporters)()},a.generateMultisig=function(){for(var e=a.props,t=e.network,r=e.publicKeyImporters,n=e.totalSigners,i=e.requiredSigners,l=e.addressType,o=[],c=1;c<=n;c++)o.push(r[c].publicKey);return H.generateMultisigFromPublicKeys.apply(void 0,[t,l,i].concat(o))},a.downloadAddressDetails=function(e){e.preventDefault();var t=a.generateMultisig(),r=a.addressDetailsText(t),n=a.addressDetailsFilename(t),i=new Blob([r],{type:"text/plain"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(i,n);else{var l=window.document.createElement("a");l.href=window.URL.createObjectURL(i),l.download=n,document.body.appendChild(l),l.click(),document.body.removeChild(l)}},a.addressDetailsFilename=function(e){var t=a.props,r=t.totalSigners,n=t.requiredSigners,i=t.addressType;return"bitcoin-".concat(n,"-of-").concat(r,"-").concat(i,"-").concat(e.address,".txt")},a.addressDetailsText=function(e){var t=a.props,r=t.addressType,n=t.network,i=t.totalSigners,l=t.requiredSigners,o=Object(H.multisigRedeemScript)(e),c=Object(H.multisigWitnessScript)(e),s=o?"Redeem Script: ".concat(Object(H.scriptToHex)(o)):"",u=c?"Witness Script: ".concat(Object(H.scriptToHex)(c)):"",m=o&&c?"\n\n":"";return"Address: ".concat(e.address,"\n\nType: ").concat(r,"\n\nNetwork: ").concat(n,"\n\nQuorum: ").concat(l,"-of-").concat(i,"\n\nBIP32 Paths:\n").concat(a.publicKeyImporterBIP32Paths(),"\n\n").concat(s).concat(m).concat(u,"\n")},a.publicKeyImporterBIP32Paths=function(){for(var e=a.props.totalSigners,t=[],r=1;r<=e;r++)t.push(a.publicKeyImporterBIP32Path(r));return t.join("\n")},a.publicKeyImporterBIP32Path=function(e){var t=a.props.publicKeyImporters[e],r="text"===t.method?"Unknown (make sure you have written this down previously!)":t.bip32Path;return"  * ".concat(t.name,": ").concat(r)},a}return Object(z.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){return n.a.createElement(I.a,null,n.a.createElement(S.a,{title:this.title()}),n.a.createElement(O.a,null,this.body()))}},{key:"body",value:function(){var e=this.props.totalSigners;if(this.publicKeyCount()===e){var t=this.generateMultisig(),a=this.publicKeysAreCanonicallySorted();return n.a.createElement("div",null,this.isInConflict()&&n.a.createElement(Ne,null),!a&&n.a.createElement(y.a,{container:!0,justify:"space-between"},n.a.createElement(y.a,{item:!0,md:8},n.a.createElement(X.a,{error:!0},"WARNING: These public keys are not in the standard ",f("https://github.com/bitcoin/bips/blob/master/bip-0067.mediawiki","BIP67 order"),".")),n.a.createElement(y.a,{item:!0,md:4},n.a.createElement(R.a,{variant:"contained",color:"primary",onClick:this.canonicallySortPublicKeys},"Sort Public Keys"))),n.a.createElement(P.a,{mt:2},n.a.createElement(ke,{multisig:t})),n.a.createElement(P.a,{mt:2},n.a.createElement(R.a,{variant:"contained",color:"primary",onClick:this.downloadAddressDetails},"Download Address Details")))}return n.a.createElement("p",null,"Once you have imported all ".concat(e," public keys, "),"your address details will be displayed here.")}}]),t}(n.a.Component);var Ue={sortPublicKeyImporters:function(){return{type:be}}},De=Object(c.b)(function(e){return Object(M.a)({},e.settings,e.address)},Ue)(Me),Le=a(9),ze=a(761),Fe=a(760),He=a(823),We=a(821),Ge=a(822),qe=a(814),Ye=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).state={error:"",publicKey:""},a.render=function(){var e=a.state,t=e.error,r=e.publicKey;return n.a.createElement(P.a,{mt:2},n.a.createElement(qe.a,{fullWidth:!0,name:"publicKey",label:"Public Key",value:r,onChange:a.handleChange,error:a.hasError(),helperText:t}),n.a.createElement(P.a,{mt:2},n.a.createElement(R.a,{variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:""===r||a.hasError()},"Add Public Key")))},a.import=function(){(0,a.props.validateAndSetPublicKey)(a.state.publicKey,a.setError)},a.hasError=function(){return""!==a.state.error},a.setError=function(e){a.setState({error:e})},a.handleChange=function(e){var t=e.target.value,r=Object(H.validatePublicKey)(t);a.setState({publicKey:t,error:r})},a}return Object(z.a)(t,e),t}(n.a.Component),Xe="m/0",Ve=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).componentDidMount=function(){a.setBIP32PathToDefault()},a.state={extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:""},a.render=function(){var e=a.props.publicKeyImporter,t=a.state,r=t.extendedPublicKey,i=t.extendedPublicKeyError,l=t.bip32PathError;return n.a.createElement("div",null,n.a.createElement(P.a,{mt:2},n.a.createElement(qe.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:r,onChange:a.handleExtendedPublicKeyChange,error:a.hasExtendedPublicKeyError(),helperText:i})),n.a.createElement(P.a,{mt:2},n.a.createElement(y.a,{container:!0},n.a.createElement(y.a,{item:!0,md:10},n.a.createElement(qe.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:e.bip32Path,onChange:a.handleBIP32PathChange,error:a.hasBIP32PathError(),helperText:l}),n.a.createElement(X.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),n.a.createElement(y.a,{item:!0,md:2},!a.bip32PathIsDefault()&&n.a.createElement(R.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path},"Default"))),n.a.createElement(P.a,{mt:2},n.a.createElement(R.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:""===r||a.hasError()},"Import Public Key"))))},a.import=function(){var e=a.props,t=e.network,r=e.publicKeyImporter,n=e.validateAndSetPublicKey,i=a.state.extendedPublicKey;n(Object(H.deriveChildPublicKey)(i,r.bip32Path,t),function(e){return a.setState({bip32PathError:e})})},a.setBIP32PathToDefault=function(){(0,a.props.validateAndSetBIP32Path)(Xe,function(){},function(){})},a.hasBIP32PathError=function(){return""!==a.state.bip32PathError},a.hasExtendedPublicKeyError=function(){return""!==a.state.extendedPublicKeyError},a.hasError=function(){return a.hasBIP32PathError()||a.hasExtendedPublicKeyError()},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},a.setBIP32PathError,{mode:"unhardened"})},a.bip32PathIsDefault=function(){return a.props.publicKeyImporter.bip32Path===Xe},a.resetBIP32Path=function(){a.setBIP32PathToDefault(),a.setBIP32PathError("")},a.handleExtendedPublicKeyChange=function(e){var t=a.props.network,r=e.target.value,n=Object(H.validateExtendedPublicKey)(r,t);a.setState({extendedPublicKey:r,extendedPublicKeyError:n})},a}return Object(z.a)(t,e),t}(n.a.Component),Ze=a(754),Je=a(359),Qe=a.n(Je),$e=300,et=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).state={walletState:Le.PENDING,error:""},a.render=function(){var e=a.state,t=e.walletState,r=e.error,i=a.props,l=i.interaction,o=i.width,c=i.startText;if(t===Le.PENDING){var s=l.messageFor({walletState:t,code:"hermit.command"});return n.a.createElement("div",null,n.a.createElement("p",null,s.instructions),n.a.createElement(y.a,{container:!0,justify:"center",className:"mb-2"},n.a.createElement(Re,{text:s.command},n.a.createElement("code",null,n.a.createElement("strong",null,s.mode,">")," ",s.command))),n.a.createElement("p",null,"When you are ready, scan the QR code produced by Hermit:"),n.a.createElement(P.a,{mt:2},n.a.createElement(R.a,{variant:"contained",color:"primary",className:"mt-2",size:"large",onClick:a.handleStart},c)))}return t===Le.ACTIVE?n.a.createElement(y.a,{container:!0,direction:"column"},n.a.createElement(y.a,{item:!0},n.a.createElement(Qe.a,{delay:$e,onError:a.handleError,onScan:a.handleScan,style:{width:o},facingMode:"user"})),n.a.createElement(y.a,{item:!0},n.a.createElement(R.a,{variant:"contained",color:"secondary",size:"small",onClick:a.handleStop},"Cancel"))):"error"===t||"success"===t?n.a.createElement("div",null,n.a.createElement(X.a,{error:!0},r),n.a.createElement(R.a,{variant:"contained",color:"secondary",size:"small",onClick:a.handleStop},"Reset")):null},a.handleStart=function(){var e=a.props.onStart;a.setState({walletState:Le.ACTIVE,error:""}),e&&e()},a.handleError=function(e){var t=a.props.onClear;a.setState({walletState:"error",error:e.message}),t&&t()},a.handleScan=function(e){var t=a.props,r=t.onSuccess,n=t.interaction;if(e)try{r(n.parse(e)),a.setState({walletState:"success"})}catch(i){a.handleError(i)}},a.handleStop=function(){var e=a.props.onClear;a.setState({walletState:Le.PENDING,error:""}),e&&e()},a}return Object(z.a)(t,e),t}(r.Component);et.defaultProps={width:"256px",startText:"Scan"};var tt=et,at=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).state={publicKeyError:"",walletState:Le.PENDING},a.componentDidMount=function(){(0,a.props.resetBIP32Path)()},a.interaction=function(){var e=a.props,t=e.network,r=e.publicKeyImporter;return new Le.HermitExportPublicKey({network:t,bip32Path:r.bip32Path})},a.render=function(){var e=a.props.disableChangeMethod,t=a.state.publicKeyError;return n.a.createElement(Ze.a,null,n.a.createElement(tt,{startText:"Import Public Key",interaction:a.interaction(),onStart:e,onSuccess:a.import,onClear:a.onClear}),n.a.createElement(X.a,{error:!0},t))},a.setError=function(e){a.setState({publicKeyError:e})},a.import=function(e){var t=a.props,r=t.validateAndSetBIP32Path,n=t.validateAndSetPublicKey;(0,t.enableChangeMethod)();var i=e.pubkey;r(e.bip32_path,function(){n(i,a.setError)},a.setError)},a.onClear=function(){var e=a.props,t=e.reset,r=e.enableChangeMethod;t(!0),a.setError(""),r()},a}return Object(z.a)(t,e),t}(n.a.Component),rt=a(15),nt=a.n(rt),it=a(33),lt=a(816),ot=a(817),ct=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).render=function(){return n.a.createElement("small",null,n.a.createElement(T.a,null,a.filteredMessages().map(function(e,t){return a.renderMessage(e,t)})))},a.renderMessage=function(e,t){return n.a.createElement(w.a,{key:t},n.a.createElement(j.a,null,a.messageIcon(e)),n.a.createElement(C.a,null,e.text))},a.filteredMessages=function(){var e=a.props,t=e.messages,r=e.excludeCodes;return t.filter(function(e){for(var t=0;t<r.length;t++){var a=r[t];if((e.code||"").includes(a))return!1}return!0})},a.messageIcon=function(e){switch(e.level){case Le.INFO:return n.a.createElement(lt.a,null);case Le.WARNING:return n.a.createElement(Ae.a,null);case Le.ERROR:return n.a.createElement(ot.a,null);default:return null}},a.messageColrName=function(e){switch(e.level){case Le.INFO:return"primary.main";case Le.WARNING:return"text.secondary";case Le.ERROR:return"error.main";default:return""}},a}return Object(z.a)(t,e),t}(n.a.Component);ct.defaultProps={messages:[],excludeCodes:[]};var st=ct,ut=function(e){function t(e){var a;return Object(U.a)(this,t),(a=Object(D.a)(this,Object(L.a)(t).call(this,e))).componentDidMount=function(){a.resetBIP32Path()},a.interaction=function(){var e=a.props,t=e.network,r=e.publicKeyImporter;return Object(Le.HardwareWalletExportPublicKey)({network:t,walletType:r.method,bip32Path:r.bip32Path})},a.render=function(){var e=a.props.publicKeyImporter,t=a.state,r=t.walletState,i=t.publicKeyError,l=a.interaction();return r===Le.UNSUPPORTED?n.a.createElement(X.a,{error:!0},l.messageTextFor({walletState:r})):n.a.createElement(P.a,{mt:2},n.a.createElement(y.a,{container:!0},n.a.createElement(y.a,{item:!0,md:6},n.a.createElement(qe.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:a.handleBIP32PathChange,disabled:r!==Le.PENDING,error:a.hasBIP32PathError(),helperText:a.bip32PathError()})),n.a.createElement(y.a,{item:!0,md:6},!a.bip32PathIsDefault()&&n.a.createElement(R.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path,disabled:r!==Le.PENDING},"Default"))),n.a.createElement(X.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),n.a.createElement(P.a,{mt:2},n.a.createElement(R.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:a.hasBIP32PathError()||r===Le.ACTIVE},"Import Public Key")),n.a.createElement(st,{messages:l.messagesFor({walletState:r}),excludeCodes:["bip32"]}),n.a.createElement(X.a,{error:!0},i))},a.import=Object(it.a)(nt.a.mark(function e(){var t,r,n,i;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.validateAndSetPublicKey,n=t.enableChangeMethod,(0,t.disableChangeMethod)(),a.setState({publicKeyError:"",walletState:Le.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:i=e.sent,r(i,function(e){a.setState({publicKeyError:e,walletState:Le.PENDING})}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({publicKeyError:e.t0.message,walletState:Le.PENDING});case 14:n();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),a.hasBIP32PathError=function(){var e=a.state,t=e.bip32PathError,r=e.walletState;return""!==t||a.interaction().hasMessagesFor({walletState:r,level:Le.ERROR,code:"bip32"})},a.bip32PathError=function(){var e=a.state,t=e.bip32PathError,r=e.walletState;return""!==t?t:a.interaction().messageTextFor({walletState:r,level:Le.ERROR,code:"bip32"})},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},a.setBIP32PathError)},a.bip32PathIsDefault=function(){var e=a.props,t=e.publicKeyImporter,r=e.defaultBIP32Path;return t.bip32Path===r},a.resetBIP32Path=function(){var e=a.props.resetBIP32Path;a.setBIP32PathError(""),e()},a.state={publicKeyError:"",bip32PathError:"",walletState:a.interaction().isSupported()?Le.PENDING:Le.UNSUPPORTED},a}return Object(z.a)(t,e),t}(n.a.Component),mt=a(818),dt=a(819),pt=a(820),ht=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).state={editing:!1,newName:"",error:""},a.componentDidMount=function(){var e=a.props.name;a.setState({newName:e})},a.render=function(){var e=a.props.name,t=a.state,r=t.editing,i=t.newName,l=t.error;return r?n.a.createElement(y.a,{container:!0,alignItems:"center"},n.a.createElement(y.a,{item:!0},n.a.createElement(qe.a,{label:"Name",value:i,onChange:a.handleChange,error:a.hasError(),helperText:l})),n.a.createElement(y.a,{item:!0},n.a.createElement(re.a,{size:"small",onClick:a.submit,disabled:a.hasError()},n.a.createElement(mt.a,null))),n.a.createElement(y.a,{item:!0},n.a.createElement(re.a,{color:"secondary",size:"small",onClick:a.cancel},n.a.createElement(dt.a,null)))):n.a.createElement("span",null,n.a.createElement(re.a,{size:"small",onClick:a.startEditing},n.a.createElement(pt.a,null)),"\xa0",e)},a.hasError=function(){return""!==a.state.error},a.startEditing=function(e){var t=a.props.name;e.preventDefault(),a.setState({editing:!0,newName:t})},a.handleChange=function(e){var t=e.target.value,r="";null!==t&&void 0!==t&&""!==t||(r="Name cannot be blank."),a.setState({newName:t,error:r})},a.submit=function(){var e=a.props;(0,e.setName)(e.number,a.state.newName),a.setState({editing:!1})},a.cancel=function(){var e=a.props.name;a.setState({error:"",newName:e,editing:!1})},a}return Object(z.a)(t,e),t}(n.a.Component),Et="xpub",bt="text",ft=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).state={disableChangeMethod:!1},a.title=function(){var e=a.props,t=e.number,r=e.totalSigners,i=e.publicKeyImporter,l=e.setName;return n.a.createElement(y.a,{container:!0,justify:"space-between"},n.a.createElement(y.a,{item:!0},n.a.createElement(ht,{number:t,name:i.name,setName:l})),n.a.createElement(y.a,{item:!0},n.a.createElement(y.a,{container:!0,justify:"flex-end"},n.a.createElement(R.a,{type:"button",variant:"contained",onClick:a.moveUp,disabled:1===t},n.a.createElement(We.a,null)),n.a.createElement("span",null,"\xa0"),n.a.createElement(R.a,{type:"button",variant:"contained",onClick:a.moveDown,disabled:t===r},n.a.createElement(Ge.a,null)))))},a.renderImport=function(){var e=a.props,t=e.publicKeyImporter,r=e.number,i=a.state.disableChangeMethod,l="public-key-".concat(r,"-importer-select-label");return n.a.createElement("div",null,n.a.createElement(W.a,{fullWidth:!0},n.a.createElement(ze.a,{id:l},"Select Method"),n.a.createElement(Fe.a,{labelId:l,id:"public-key-".concat(r,"-importer-select"),disabled:i,value:t.method,onChange:a.handleMethodChange},n.a.createElement(He.a,{value:""},"< Select method >"),n.a.createElement(He.a,{value:Le.TREZOR},"Trezor"),n.a.createElement(He.a,{value:Le.LEDGER},"Ledger"),n.a.createElement(He.a,{value:Le.HERMIT},"Hermit"),n.a.createElement(He.a,{value:Et},"Derive from extended public key"),n.a.createElement(He.a,{value:bt},"Enter as text"))),a.renderImportByMethod())},a.renderImportByMethod=function(){var e=a.props,t=e.publicKeyImporter,r=e.network,i=e.addressType,l=e.defaultBIP32Path;return t.method===Le.TREZOR||t.method===Le.LEDGER?n.a.createElement(ut,{publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,addressType:i,defaultBIP32Path:l,network:r}):t.method===Le.HERMIT?n.a.createElement(at,{publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,reset:a.reset}):t.method===Et?n.a.createElement(Ve,{network:r,publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path}):t.method===bt?n.a.createElement(Ye,{publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey}):null},a.handleMethodChange=function(e){var t=a.props,r=t.number,n=t.setMethod,i=t.setPublicKey;n(r,e.target.value),i(r,"")},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.finalize=function(){var e=a.props,t=e.number;(0,e.setFinalized)(t,!0)},a.reset=function(e){var t=a.props,r=t.number,n=t.setPublicKey,i=t.setFinalized;n(r,""),i(r,!1),e&&a.resetBIP32Path()},a.moveUp=function(e){var t=a.props,r=t.moveUp,n=t.number;e.preventDefault(),r(n)},a.moveDown=function(e){var t=a.props,r=t.moveDown,n=t.number;e.preventDefault(),r(n)},a.renderBIP32Path=function(){var e=a.props.publicKeyImporter;return e.method!==bt?n.a.createElement(P.a,{mt:4},n.a.createElement("p",null,"The BIP32 path for this public key is:"),n.a.createElement(y.a,{container:!0,justify:"center"},n.a.createElement(Re,{text:e.bip32Path},n.a.createElement("code",null,e.bip32Path))),n.a.createElement(P.a,{mt:4},n.a.createElement("p",null,"You will need this BIP32 path to sign for this key later.  ",n.a.createElement("strong",null,"Write down this BIP32 path!")))):null},a.validateAndSetBIP32Path=function(e,t,r,n){var i=a.props,l=i.number,o=i.setBIP32Path,c=Object(H.validateBIP32Path)(e,n);o(l,e),c?r(c):(r(""),t())},a.resetBIP32Path=function(){var e=a.props,t=e.number;(0,e.resetBIP32Path)(t)},a.renderPublicKey=function(){var e=a.props.publicKeyImporter;return n.a.createElement("div",null,n.a.createElement("p",null,"The following public key was imported:"),n.a.createElement(y.a,{container:!0,justify:"center"},n.a.createElement(Re,{text:e.publicKey},n.a.createElement("code",null,e.publicKey))),a.renderBIP32Path(),n.a.createElement(P.a,{mt:2},n.a.createElement(R.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){a.reset(e.method===Le.HERMIT)}},"Remove Public Key")))},a.validateAndSetPublicKey=function(e,t,r){var n=a.props,i=n.number,l=n.publicKeyImporters,o=n.setPublicKey,c=Object(H.validatePublicKey)(e);o(i,e),c?t&&t(c):e&&Object.values(l).find(function(t,a){return a!==i-1&&t.publicKey===e})?t&&t("This public key has already been imported."):(t&&t(""),a.finalize(),r&&r())},a}return Object(z.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.props.publicKeyImporter;return n.a.createElement(I.a,null,n.a.createElement(S.a,{title:this.title()}),n.a.createElement(O.a,null,e.method&&e.method!==bt&&e.conflict&&n.a.createElement(Ne,null),e.finalized?this.renderPublicKey():this.renderImport()))}}]),t}(n.a.Component);var vt={setName:ve,setBIP32Path:Pe,resetBIP32Path:ge,setMethod:ye,setPublicKey:Ie,setFinalized:Se,moveUp:Oe,moveDown:Te},Pt=Object(c.b)(function(e,t){return Object(M.a)({},e.settings,e.address,{publicKeyImporter:e.address.publicKeyImporters[t.number]})},vt)(ft),gt=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).render=function(){return n.a.createElement(P.a,{mt:2},n.a.createElement(y.a,{container:!0,spacing:3},n.a.createElement(y.a,{item:!0,md:8},a.renderPublicKeyImporters(),n.a.createElement(P.a,{mt:2},n.a.createElement(De,null))),n.a.createElement(y.a,{item:!0,md:4},n.a.createElement(P.a,null,n.a.createElement(se,null)),n.a.createElement(P.a,{mt:2},n.a.createElement(de,null)),n.a.createElement(P.a,{mt:2},n.a.createElement(ae,null)))))},a.renderPublicKeyImporters=function(){for(var e=a.props.totalSigners,t=[],r=1;r<=e;r++)t.push(n.a.createElement(P.a,{key:r,mt:1===r?0:2},n.a.createElement(Pt,{number:r})));return t},a}return Object(z.a)(t,e),t}(n.a.Component);var yt=Object(c.b)(function(e){return Object(M.a)({},{totalSigners:e.settings.totalSigners},e.address)})(gt),It=a(824),St=a(825),Ot=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).state={url_edited:!1},a.handleTypeChange=function(e){var t=a.props,r=t.setType,n=t.network,i=t.setUrl,l=e.target.checked?"private":"public";"private"!==l||a.state.url_edited||i("http://localhost:".concat("mainnet"===n?8332:18332)),r(l)},a.handleUrlChange=function(e){var t=a.props,r=t.setUrl,n=t.setUrlError,i=e.target.value,l=a.validateUrl(i);a.state.url_edited||l||a.setState({url_edited:!0}),r(i),n(l)},a.handleUsernameChange=function(e){var t=a.props,r=t.setUsername,n=t.setUsernameError,i=e.target.value,l=a.validateUsername(i);r(i),n(l)},a.handlePasswordChange=function(e){var t=a.props,r=t.setPassword,n=t.setPasswordError,i=e.target.value,l=a.validatePassword(i);r(i),n(l)},a.toggle=function(){var e=a.props.client,t=e.type.charAt(0).toUpperCase()+e.type.slice(1);return n.a.createElement(q.a,{control:n.a.createElement(It.a,{color:"primary",checked:"private"===e.type,onChange:a.handleTypeChange,value:"private"}),label:t})},a.title=function(){return n.a.createElement(y.a,{container:!0,justify:"space-between"},n.a.createElement(y.a,{item:!0},"Consensus"),n.a.createElement(y.a,{item:!0},a.toggle()))},a.disabled=function(){return!1},a}return Object(z.a)(t,e),Object(F.a)(t,[{key:"validateUrl",value:function(e){return/^http(s)?:\/\/[^\s]+$/.exec(e)?"":"Must be a valid URL."}},{key:"validatePassword",value:function(e){return""}},{key:"validateUsername",value:function(e){return""}},{key:"render",value:function(){var e=this.props,t=e.client,a=e.url_error,r=e.username_error,i=e.password_error;return n.a.createElement(I.a,null,n.a.createElement(S.a,{title:this.title()}),n.a.createElement(O.a,null,"public"===t.type?n.a.createElement("p",null,"'Public' uses the ",n.a.createElement("code",null,"blockstream.info")," API. Switch to private to use a ",n.a.createElement("code",null,"bitcoind")," node."):n.a.createElement("div",null,n.a.createElement("p",null,"A ",n.a.createElement("code",null,"bitcoind"),"-compatible client is required to query UTXO data, estimate fees, and broadcast transactions."),n.a.createElement("p",null,n.a.createElement("small",null,"Due to CORS requirements, you must use a proxy around the node. Instructions are available ",f("https://github.com/unchained-capital/caravan#adding-cors-headers","here"),".")),n.a.createElement("form",null,n.a.createElement(y.a,{container:!0,direction:"column"},n.a.createElement(y.a,{item:!0},n.a.createElement(qe.a,{fullWidth:!0,label:"URL",value:t.url,onChange:this.handleUrlChange,disabled:this.disabled(),error:""!==a,helperText:a,InputProps:{startAdornment:n.a.createElement(St.a,{position:"start"})}})),n.a.createElement(y.a,{item:!0}),n.a.createElement(y.a,{item:!0},n.a.createElement(qe.a,{fullWidth:!0,label:"Username",value:t.username,onChange:this.handleUsernameChange,disabled:this.disabled(),error:r,helperText:r})),n.a.createElement(y.a,{item:!0},n.a.createElement(qe.a,{fullWidth:!0,type:"password",label:"Password",value:t.password,onChange:this.handlePasswordChange,disabled:this.disabled(),error:i,helperText:i})))))))}}]),t}(n.a.Component);var Tt=Object(c.b)(function(e){return{network:e.settings.network,client:e.client,url_error:e.client.url_error,url:e.client.url}},function(e){var t,a={},r=Object.keys(e);for(t=0;t<r.length;t+=1){var n=r[t],i=e[n];a[n]=pe(i)}return a}({setType:"SET_CLIENT_TYPE",setUrl:"SET_CLIENT_URL",setUsername:"SET_CLIENT_USERNAME",setPassword:"SET_CLIENT_PASSWORD",setUrlError:"SET_CLIENT_URL_ERROR",setUsernameError:"SET_CLIENT_USERNAME_ERROR",setPasswordError:"SET_CLIENT_PASSWORD_ERROR",setStatus:"SET_CLIENT_STATUS"}))(Ot),wt=a(24),jt=a.n(wt),Ct=a(120),_t=a.n(Ct);function Rt(){return(Rt=Object(it.a)(nt.a.mark(function e(t,a){var r,n;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_t.a.get(Object(H.blockExplorerAPIURL)("/address/".concat(t,"/utxo"),a));case 3:return r=e.sent,n=r.data,e.next=7,Promise.all(n.map(function(){var e=Object(it.a)(nt.a.mark(function e(t){var r,n,i;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_t.a.get(Object(H.blockExplorerAPIURL)("/tx/".concat(t.txid,"/hex"),a));case 2:return r=e.sent,n=r.data,i=new jt.a(t.value),e.abrupt("return",{confirmed:t.status.confirmed,txid:t.txid,index:t.vout,amount:Object(H.satoshisToBitcoins)(i).toFixed(8),amountSats:i,transactionHex:n});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 13:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function Bt(){return(Bt=Object(it.a)(nt.a.mark(function e(t){var a,r;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_t.a.get(Object(H.blockExplorerAPIURL)("/fee-estimates",t));case 3:return a=e.sent,r=a.data,e.abrupt("return",Math.ceil(r[2]));case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function Kt(){return(Kt=Object(it.a)(nt.a.mark(function e(t,a){var r;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_t.a.post(Object(H.blockExplorerAPIURL)("/tx",a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function xt(e,t,a){return kt.apply(this,arguments)}function kt(){return(kt=Object(it.a)(nt.a.mark(function e(t,a,r){var n,i=arguments;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>3&&void 0!==i[3]?i[3]:[],e.abrupt("return",new Promise(function(){var e=Object(it.a)(nt.a.mark(function e(i,l){return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:_t()(t,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},auth:a,data:{jsonrpc:"2.0",id:0,method:"".concat(r),params:n}}).then(function(e){return i(e.data)}).catch(l);case 1:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function At(){return(At=Object(it.a)(nt.a.mark(function e(t){var a,r,n;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,r=t.auth,n=t.address,e.abrupt("return",new Promise(function(){var e=Object(it.a)(nt.a.mark(function e(t){var i,l,o;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xt(a,r,"listunspent",[0,9999999,[n]]);case 3:return i=e.sent,l=[],i.result.forEach(function(e){l.push(xt(a,r,"getrawtransaction",[e.txid]))}),e.next=8,Promise.all(l);case 8:o=e.sent,t(i.result.map(function(e,t){var a=new jt.a(e.amount);return{confirmed:(e.confirmations||0)>0,txid:e.txid,index:e.vout,amount:a.toFixed(8),amountSats:Object(H.bitcoinsToSatoshis)(a),transactionHex:o[t].result}})),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Nt(){return(Nt=Object(it.a)(nt.a.mark(function e(t){var a,r,n,i,l,o;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,r=t.auth,n=t.numBlocks,i=void 0===n?2:n,e.next=3,xt(a,r,"estimatesmartfee",[i]);case 3:return l=e.sent,o=l.result.feerate,e.abrupt("return",Math.ceil(1e5*o));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mt(){return(Mt=Object(it.a)(nt.a.mark(function e(t){var a,r,n,i;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,r=t.auth,n=t.hex,e.prev=1,e.next=4,xt(a,r,"sendrawtransaction",[n]);case 4:return i=e.sent,e.abrupt("return",i.result);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("send tx error",e.t0),e.t0.response&&e.t0.response.data.error.message||e.t0;case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}var Ut="public";function Dt(e){return{url:e.url,auth:{username:e.username,password:e.password}}}function Lt(e,t,a){return a.type===Ut?function(e,t){return Rt.apply(this,arguments)}(e,t):function(e){return At.apply(this,arguments)}(Object(M.a)({},Dt(a),{address:e}))}function zt(e,t){return t.type===Ut?function(e){return Bt.apply(this,arguments)}(e):function(e){return Nt.apply(this,arguments)}(Object(M.a)({},Dt(t),{numBlocks:1}))}function Ft(e,t,a){return a.type===Ut?function(e,t){return Kt.apply(this,arguments)}(e,t):function(e){return Mt.apply(this,arguments)}(Object(M.a)({},Dt(a),{hex:e}))}var Ht="CHOOSE_PERFORM_SPEND",Wt="SET_REQUIRED_SIGNERS",Gt="SET_TOTAL_SIGNERS",qt="SET_INPUTS",Yt="ADD_OUTPUT",Xt="SET_OUTPUT_ADDRESS",Vt="SET_OUTPUT_AMOUNT",Zt="DELETE_OUTPUT",Jt="SET_FEE_RATE",Qt="SET_FEE",$t="FINALIZE_OUTPUTS",ea="RESET_OUTPUTS",ta="SET_TXID";function aa(e,t){return{type:Vt,number:e,value:t}}var ra="CHOOSE_CONFIRM_OWNERSHIP",na="SET_OWNERSHIP_MULTISIG",ia="RESET_PUBLIC_KEY_IMPORTER",la="RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",oa="SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",ca="SET_PUBLIC_KEY_IMPORTER_METHOD",sa="SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY";var ua=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).state={scriptHex:"",scriptError:"",fetchUTXOsError:"",fetchedUTXOs:!1},a.disabled=function(){},a.hasScriptError=function(){return""!==a.state.scriptError},a.hasFetchUTXOsError=function(){return""!==a.state.fetchUTXOsError},a.hasError=function(){return a.hasScriptError()||a.hasFetchUTXOsError()},a.scriptName=function(){switch(a.props.addressType){case H.P2SH:return"redeem";case H.P2SH_P2WSH:case H.P2WSH:return"witness";default:return null}},a.scriptTitle=function(){var e=a.scriptName();return e.charAt(0).toUpperCase()+e.substring(1)},a.handleScriptChange=function(e){var t=e.target.value,r="";(""===t&&(r="".concat(a.scriptTitle()," script cannot be blank.")),""===r&&(t.includes("\n")||t.includes("\t")||t.includes(" "))&&(r="".concat(a.scriptTitle()," script should not contain spaces, tabs, or newlines.")),""===r)&&(""!==Object(H.validateHex)(t)&&(r="".concat(a.scriptTitle()," script is not valid hex.")));if(""!==t&&""===r)try{a.generateMultisig(t)}catch(n){console.error(n),r="Failed to parse ".concat(a.scriptName()," script.")}a.setState({scriptHex:t,scriptError:r,fetchUTXOsError:"",fetchedUTXOs:!1})},a.generateMultisig=function(e){var t=a.props,r=t.network,n=t.addressType;return e||(e=a.state.scriptHex),Object(H.generateMultisigFromHex)(r,n,e)},a.renderDetails=function(){var e=a.state.fetchUTXOsError,t=a.props,r=t.chosePerformSpend,i=t.choseConfirmOwnership,l=a.generateMultisig(),o=r||i;return n.a.createElement("div",null,n.a.createElement(ke,{multisig:l}),n.a.createElement(P.a,{mt:2},n.a.createElement(y.a,{container:!0,spacing:3},n.a.createElement(y.a,{item:!0},n.a.createElement(R.a,{variant:"contained",color:"primary",size:"large",onClick:a.performSpend,disabled:o},"Spend from this address")),n.a.createElement(y.a,{item:!0},n.a.createElement(R.a,{variant:"contained",size:"large",onClick:a.confirmOwnership,disabled:o},"Confirm ownership"))),n.a.createElement(X.a,{error:!0},e)))},a.performSpend=Object(it.a)(nt.a.mark(function e(){var t,r,n,i,l,o,c,s,u,m,d;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.setRequiredSigners,n=t.setTotalSigners,i=t.setInputs,l=t.setFrozen,o=t.choosePerformSpend,c=a.generateMultisig(),e.next=4,a.fetchUTXOs(c);case 4:(s=e.sent)?(u=s.utxos,m=s.inputsTotalSats,d="",m.isLessThanOrEqualTo(0)&&(d="This address has a zero balance."),a.setState({fetchedUTXOs:!0,fetchUTXOsError:d}),""===d&&(i(u),r(Object(H.multisigRequiredSigners)(c)),n(Object(H.multisigTotalSigners)(c)),l(!0),o())):a.setState({fetchedUTXOs:!1,fetchUTXOsError:"Failed to fetch UTXOs."});case 6:case"end":return e.stop()}},e)})),a.fetchUTXOs=function(){var e=Object(it.a)(nt.a.mark(function e(t){var r,n,i,l;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props,n=r.network,i=r.client,l=null,e.prev=2,e.next=5,Lt(t.address,n,i);case 5:l=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",!1);case 12:if(null===l){e.next=14;break}return e.abrupt("return",{utxos:l.map(function(e){return Object(M.a)({},e,{multisig:t})}),inputsTotalSats:l.map(function(e){return e.amount}).reduce(function(e,t){return e.plus(t)},new jt.a(0))});case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),a.confirmOwnership=function(){var e=a.props,t=e.chooseConfirmOwnership,r=e.setOwnershipMultisig,n=e.setFrozen;r(a.generateMultisig()),t(),n(!0)},a}return Object(z.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.state,t=e.scriptHex,a=e.scriptError,r=e.fetchedUTXOs;return n.a.createElement(I.a,null,n.a.createElement(S.a,{title:"Enter ".concat(this.scriptTitle()," Script")}),n.a.createElement(O.a,null,n.a.createElement("form",null,n.a.createElement(qe.a,{fullWidth:!0,multiline:!0,autoFocus:!0,variant:"outlined",label:"".concat(this.scriptTitle()," Script"),value:t,rows:5,onChange:this.handleScriptChange,disabled:r&&!this.hasFetchUTXOsError(),helperText:a,error:""!==a})),""===t||this.hasScriptError()?n.a.createElement("p",null,"Enter a valid ",this.scriptName()," script to generate an address to spend funds from."):this.renderDetails()))}}]),t}(n.a.Component);var ma={choosePerformSpend:function(){return{type:Ht}},setFrozen:function(e){return{type:$,value:e}},setInputs:function(e){return{type:qt,value:e}},setTotalSigners:function(e){return{type:Gt,value:e}},setRequiredSigners:function(e){return{type:Wt,value:e}},chooseConfirmOwnership:function(){return{type:ra}},setOwnershipMultisig:function(e){return{type:na,value:e}}},da=Object(c.b)(function(e){return Object(M.a)({},e.settings,{client:e.client},{choseConfirmOwnership:e.spend.ownership.chosen,chosePerformSpend:e.spend.transaction.chosen})},ma)(ua),pa=a(826),ha=a(827),Ea=a(828),ba=a(829),fa=a(830),va=a(831),Pa=(a(239),a(140)),ga=a.n(Pa),ya=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).renderInputs=function(){var e=a.props,t=e.inputs,r=e.network;return t.map(function(e,t){var a="".concat(ga.a.utxoTxid).concat(e.confirmed?"":" "+ga.a.unconfirmed),i=e.confirmed?"confirmed":"unconfirmed";return n.a.createElement(pa.a,{hover:!0,key:e.txid},n.a.createElement(ha.a,null,t+1),n.a.createElement(ha.a,{className:a},n.a.createElement(Re,{text:e.txid},n.a.createElement("code",{title:i},e.txid))),n.a.createElement(ha.a,null,n.a.createElement(Re,{text:e.index.toString()})),n.a.createElement(ha.a,null,n.a.createElement(Re,{text:Object(H.satoshisToBitcoins)(e.amountSats).toString()})),n.a.createElement(ha.a,null,f(Object(H.blockExplorerTransactionURL)(e.txid,r),n.a.createElement(Ke.a,null))))})},a}return Object(z.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.props,t=e.inputs,a=e.inputsTotalSats;return n.a.createElement(I.a,null,n.a.createElement(S.a,{title:"Available Inputs (".concat(t.length,")")}),n.a.createElement(O.a,null,n.a.createElement("p",null,"The following UTXOs will be spent as inputs in a new transaction."),n.a.createElement(Ea.a,null,n.a.createElement(ba.a,null,n.a.createElement(pa.a,{hover:!0},n.a.createElement(ha.a,null,"Number"),n.a.createElement(ha.a,null,"TXID"),n.a.createElement(ha.a,null,"Index"),n.a.createElement(ha.a,null,"Amount (BTC)"),n.a.createElement(ha.a,null,"View"))),n.a.createElement(fa.a,null,this.renderInputs()),n.a.createElement(va.a,null,n.a.createElement(pa.a,{hover:!0},n.a.createElement(ha.a,{colSpan:3},"TOTAL:"),n.a.createElement(ha.a,{colSpan:2},Object(H.satoshisToBitcoins)(a).toString()))))))}}]),t}(n.a.Component);var Ia=Object(c.b)(function(e){return Object(M.a)({},e.settings,e.spend.transaction)})(ya),Sa=a(242),Oa=a(843),Ta=a(833),wa=a(832),ja=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(n)))).handleAddressChange=function(e){var t=a.props,r=t.number;(0,t.setAddress)(r,e.target.value)},a.hasAddressError=function(){return""!==a.props.addressError},a.handleAmountChange=function(e){var t=a.props,r=t.number;(0,t.setAmount)(r,e.target.value)},a.hasAmountError=function(){return""!==a.props.amountError},a.isNotBalanceable=function(){var e=a.props,t=e.number,r=e.outputs,n=e.feeError,i=e.amountError,l=e.amount,o=e.inputsTotalSats;if(""!==n)return!0;for(var c=0;c<r.length;c++)if(c!==t-1&&(""!==r[c].amountError||""===r[c].amount))return!0;var s=a.autoBalancedAmount();return""!==Object(H.validateOutputAmountBTC)(s,o)||""===i&&s===new jt.a(l)},a.isBalanceable=function(){return!a.isNotBalanceable()},a.hasBalanceError=function(){return""!==a.props.balanceError},a.autoBalancedAmount=function(){var e=a.props,t=e.number,r=e.fee,n=e.inputsTotalSats,i=e.outputs.filter(function(e,a){return a!==t-1}).map(function(e){return Object(H.bitcoinsToSatoshis)(new jt.a(e.amount))}).reduce(function(e,t){return e.plus(t)},new jt.a(0)),l=Object(H.bitcoinsToSatoshis)(new jt.a(r));return Object(H.satoshisToBitcoins)(n.minus(i.plus(l)))},a.balanceAction=function(){var e=a.props.amount;return!a.hasBalanceError()||a.isNotBalanceable()?null:a.autoBalancedAmount()>new jt.a(e)?"Increase":"Decrease"},a.handleBalance=function(){var e=a.props,t=e.number;(0,e.setAmount)(t,a.autoBalancedAmount().toString())},a.hasError=function(){return a.hasAddressError()||a.hasAmountError()},a.handleDelete=function(){var e=a.props,t=e.number;(0,e.remove)(t)},a}return Object(z.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.props,t=e.outputs,a=e.finalizedOutputs,r=e.address,i=e.amount,l=e.addressError,o=e.amountError;return n.a.createElement(y.a,{container:!0},n.a.createElement(y.a,{item:!0,xs:7},n.a.createElement(qe.a,{fullWidth:!0,placeholder:"Address",name:"destination",className:ga.a.outputsFormInput,disabled:a,onChange:this.handleAddressChange,value:r,error:this.hasAddressError(),helperText:l})),n.a.createElement(y.a,{item:!0,xs:3},n.a.createElement(qe.a,{fullWidth:!0,placeholder:"Amount (BTC)",className:ga.a.outputsFormInput,name:"amount",disabled:a,onChange:this.handleAmountChange,value:i,error:this.hasAmountError(),helperText:o})),!a&&this.hasBalanceError()&&this.isBalanceable()&&n.a.createElement(y.a,{item:!0,xs:1},n.a.createElement(Oa.a,{title:"".concat(this.balanceAction()," to ").concat(this.autoBalancedAmount().toString()),placement:"top"},n.a.createElement("small",null,n.a.createElement(re.a,{onClick:this.handleBalance},"Increase"===this.balanceAction()?n.a.createElement(ne.a,null):n.a.createElement(ie.a,null))))),!a&&t.length>1&&n.a.createElement(y.a,{item:!0,xs:1},n.a.createElement(Oa.a,{title:"Remove Output",placement:"top"},n.a.createElement(re.a,{onClick:this.handleDelete},n.a.createElement(wa.a,null)))))}}]),t}(n.a.Component);var Ca={setAddress:function(e,t){return{type:Xt,number:e,value:t}},setAmount:aa,remove:function(e){return{type:Zt,number:e}}},_a=Object(c.b)(function(e,t){return Object(M.a)({},e.spend.transaction,e.spend.transaction.outputs[t.number-1])},Ca)(ja),Ra=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).titleRef=n.a.createRef(),a.state={feeRateFetchError:""},a.componentDidMount=function(){a.initialOutputState(),a.scrollToTitle()},a.componentDidUpdate=function(){a.scrollToTitle()},a.scrollToTitle=function(){a.titleRef.current.scrollIntoView({behavior:"smooth"})},a.renderOutputs=function(){var e=a.props.outputs;return Object(Sa.map)(e).map(function(e,t){return n.a.createElement(y.a,{container:!0,key:t},n.a.createElement(_a,{number:t+1}))})},a.inputsTotal=function(){var e=a.props.inputsTotalSats;return Object(H.satoshisToBitcoins)(e)},a.outputsAndFeeTotal=function(){var e=a.props,t=e.outputs,r=e.fee;return t.map(function(e){return new jt.a(e.amount||0)}).reduce(function(e,t){return e.plus(t)},new jt.a(0)).plus(new jt.a(r))},a.hasFeeRateFetchError=function(){return""!==a.state.feeRateFetchError},a.hasFeeRateError=function(){return""!==a.props.feeRateError},a.hasFeeError=function(){return""!==a.props.feeError},a.hasBalanceError=function(){return""!==a.props.balanceError},a.hasError=function(){return a.hasFeeRateFetchError()||a.hasFeeRateError()||a.hasFeeError()||a.hasBalanceError()},a.handleAddOutput=function(){(0,a.props.addOutput)()},a.handleFeeRateChange=function(e){(0,a.props.setFeeRate)(e.target.value)},a.handleFeeChange=function(e){(0,a.props.setFee)(e.target.value)},a.handleFinalize=function(){(0,a.props.finalizeOutputs)()},a.handleReset=function(){(0,a.props.resetOutputs)(),a.initialOutputState()},a.getFeeEstimate=Object(it.a)(nt.a.mark(function e(){var t,r,n,i,l,o;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.client,n=t.network,i=t.setFeeRate,l=1,o="",e.prev=3,e.next=6,zt(n,r);case 6:l=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0),o="There was an error fetching the fee rate.";case 13:return e.prev=13,i(l.toString()),a.setState({feeRateFetchError:o}),e.finish(13);case 17:case"end":return e.stop()}},e,null,[[3,9,13,17]])})),a.gatherSignaturesDisabled=function(){var e=a.props,t=e.finalizedOutputs,r=e.outputs;if(t||a.hasError())return!0;for(var n=0;n<r.length;n++){var i=r[n];if(""===i.address||""===i.amount||""!==i.addressError||""!==i.amountError)return!0}return!1},a}return Object(z.a)(t,e),Object(F.a)(t,[{key:"initialOutputState",value:function(){var e=Object(it.a)(nt.a.mark(function e(){var t,a,r,n,i,l;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getFeeEstimate();case 2:t=this.props,a=t.inputsTotalSats,r=t.fee,n=t.setOutputAmount,i=Object(H.bitcoinsToSatoshis)(new jt.a(r)),l=Object(H.satoshisToBitcoins)(a.minus(i)),n(1,l.toFixed(8));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.feeRate,a=e.fee,r=e.finalizedOutputs,i=e.feeRateError,l=e.feeError,o=e.balanceError,c=this.state.feeRateFetchError;return n.a.createElement(I.a,null,n.a.createElement(S.a,{ref:this.titleRef,title:"Define Outputs"}),n.a.createElement(O.a,null,n.a.createElement(P.a,null,n.a.createElement(y.a,null,this.renderOutputs()),n.a.createElement(y.a,{item:!0,container:!0,spacing:1},n.a.createElement(y.a,{item:!0,xs:4},n.a.createElement(R.a,{variant:"contained",disabled:r,onClick:this.handleAddOutput},"Add output")),n.a.createElement(y.a,{item:!0,xs:3},n.a.createElement(qe.a,{fullWidth:!0,label:"Fee Rate (Sats/byte)",value:t,placeholder:"Sats/byte",name:"fee_rate",disabled:r,onChange:this.handleFeeRateChange,error:this.hasFeeRateError(),helperText:c||i,InputProps:{endAdornment:n.a.createElement(St.a,{position:"end"},n.a.createElement(Oa.a,{placement:"top",title:"Estimate best rate"},n.a.createElement("small",null,n.a.createElement(re.a,{onClick:this.getFeeEstimate},n.a.createElement(Ta.a,null)))))}})),n.a.createElement(y.a,{item:!0,xs:3},n.a.createElement(qe.a,{fullWidth:!0,label:"Estimated Fees (BTC)",placeholder:"BTC",name:"fee_total",disabled:r,value:a,onChange:this.handleFeeChange,error:this.hasFeeError(),helperText:l})),n.a.createElement(y.a,{item:!0,xs:2})),n.a.createElement(y.a,{item:!0,container:!0,spacing:1},n.a.createElement(y.a,{item:!0,xs:4}),n.a.createElement(y.a,{item:!0,xs:3},n.a.createElement(qe.a,{fullWidth:!0,label:"Inputs Total",readOnly:!0,defaultValue:this.inputsTotal().toString(),disabled:r,InputProps:{readOnly:!0}})),n.a.createElement(y.a,{item:!0,xs:3},n.a.createElement(qe.a,{fullWidth:!0,label:"Outputs & Fee Total",value:this.outputsAndFeeTotal().toString(),error:this.hasBalanceError(),disabled:r,helperText:o,InputProps:{readOnly:!0}})),n.a.createElement(y.a,{item:!0,xs:2})),n.a.createElement(y.a,{item:!0},n.a.createElement(y.a,{container:!0,spacing:3},n.a.createElement(y.a,{item:!0},n.a.createElement(R.a,{variant:"contained",color:"primary",disabled:this.gatherSignaturesDisabled(),onClick:this.handleFinalize},"Gather Signatures")),n.a.createElement(y.a,{item:!0},n.a.createElement(R.a,{variant:"contained",color:"secondary",disabled:r,onClick:this.handleReset},"Reset Outputs")))))))}}]),t}(n.a.Component);var Ba={addOutput:function(){return{type:Yt}},setOutputAmount:aa,setFeeRate:function(e){return{type:Jt,value:e}},setFee:function(e){return{type:Qt,value:e}},finalizeOutputs:function(){return{type:$t}},resetOutputs:function(){return{type:ea}}},Ka=Object(c.b)(function(e){return Object(M.a)({},{network:e.settings.network,client:e.client},e.spend.transaction,e.client)},Ba)(Ra),xa=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).state={signatureJSON:"",error:""},a.render=function(){var e=a.state,t=e.signatureJSON,r=e.error;return n.a.createElement(P.a,{mt:2},n.a.createElement(qe.a,{fullWidth:!0,multiline:!0,variant:"outlined",name:"signature",label:"Signature",rows:5,value:t,onChange:a.handleChange,error:a.hasError(),helperText:r}),n.a.createElement(P.a,{mt:2},n.a.createElement(R.a,{variant:"contained",color:"primary",size:"large",onClick:a.finalize,disabled:""===t},"Add Signature")))},a.hasError=function(){return""!==a.state.error},a.setError=function(e){a.setState({error:e})},a.handleChange=function(e){var t=e.target.value,r="";try{JSON.parse(t)}catch(n){r="Invalid JSON."}a.setState({signatureJSON:t,error:r})},a.finalize=function(){var e=a.props.validateAndSetSignature,t=a.state.signatureJSON;e(JSON.parse(t),a.setError)},a}return Object(z.a)(t,e),t}(n.a.Component),ka=a(362),Aa=a.n(ka),Na=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).state={errorMessage:""},a.render=function(){var e=a.props,t=e.width,r=e.string;return n.a.createElement(Re,{text:r,newline:!0},n.a.createElement(Aa.a,{size:t,value:r,level:"L"}))},a}return Object(z.a)(t,e),t}(n.a.Component);Na.defaultProps={string:"",width:120};var Ma=Na,Ua=function(e){function t(e){var a;return Object(U.a)(this,t),(a=Object(D.a)(this,Object(L.a)(t).call(this,e))).interaction=function(){var e=a.props,t=e.signatureImporter,r=e.network,n=e.inputs,i=e.outputs,l=n.map(function(e){return t.bip32Path});return new Le.HermitSignTransaction({network:r,inputs:n,outputs:i,bip32Paths:l})},a.render=function(){var e=a.props,t=e.signatureImporter,r=e.disableChangeMethod,i=e.resetBIP32Path,l=a.state,o=l.bip32PathError,c=l.signatureError,s=l.walletState,u=a.interaction();return s===Le.UNSUPPORTED?n.a.createElement(st,{messages:u.messagesFor({walletState:s}),excludeCodes:["hermit.signature_request","hermit.command"]}):n.a.createElement(P.a,{mt:2},n.a.createElement(y.a,{container:!0},n.a.createElement(y.a,{item:!0,md:10},n.a.createElement(qe.a,{name:"bip32Path",value:t.bip32Path,onChange:a.handleBIP32PathChange,disabled:s!==Le.PENDING,error:a.hasBIP32PathError(),helperText:o})),n.a.createElement(y.a,{item:!0,md:2},!a.bip32PathIsDefault()&&n.a.createElement(R.a,{type:"button",variant:"contained",size:"small",onClick:i,disabled:s!==Le.PENDING},"Default"))),n.a.createElement(X.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),n.a.createElement(P.a,{mt:2},n.a.createElement(y.a,{container:!0,justify:"center"},n.a.createElement(y.a,{item:!0},n.a.createElement(Ma,{width:400,string:u.messageFor({code:"hermit.signature_request"}).encodedData}))),n.a.createElement(tt,{startText:"Scan Signature QR Code",interaction:u,onStart:r,onSuccess:a.import,onClear:a.clear}),n.a.createElement(st,{messages:u.messagesFor({walletState:s}),excludeCodes:["hermit.signature_request","hermit.command"]}),n.a.createElement(X.a,{error:!0},c)))},a.import=function(e){console.log("IMPORTED SIGNATURE:",e);var t=a.props,r=t.validateAndSetSignature,n=t.enableChangeMethod;a.setState({signatureError:""}),n(),r(e,function(e){a.setState({signatureError:e})})},a.clear=function(){var e=a.props,t=e.resetBIP32Path,r=e.enableChangeMethod;t(),a.setState({signatureError:""}),r()},a.hasBIP32PathError=function(){return""!==a.state.bip32PathError},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},function(e){a.setState({bip32PathError:e})})},a.bip32PathIsDefault=function(){var e=a.props,t=e.signatureImporter,r=e.defaultBIP32Path;return t.bip32Path===r},a.state={bip32PathError:"",bip32PathFinalized:!1,signatureError:"",walletState:a.interaction(!0).isSupported()?Le.PENDING:Le.UNSUPPORTED},a}return Object(z.a)(t,e),t}(n.a.Component),Da=function(e){function t(e){var a;return Object(U.a)(this,t),(a=Object(D.a)(this,Object(L.a)(t).call(this,e))).componentDidMount=function(){a.resetBIP32Path()},a.interaction=function(e){var t=!e&&a.state.verified,r=a.props,n=r.signatureImporter,i=r.network,l=r.inputs,o=r.outputs,c=n.method;if(t){var s=l.map(function(e){return n.bip32Path});return Object(Le.HardwareWalletSignMultisigTransaction)({network:i,walletType:c,inputs:l,outputs:o,bip32Paths:s})}return Object(Le.HardwareWalletExportPublicKey)({network:i,walletType:c,bip32Path:n.bip32Path})},a.render=function(){var e=a.props.signatureImporter,t=a.state,r=t.verified,i=t.walletState,l=a.interaction();return i===Le.UNSUPPORTED?n.a.createElement(X.a,{error:!0},l.messageTextFor({walletState:i})):n.a.createElement(P.a,{mt:2},n.a.createElement(y.a,{container:!0},n.a.createElement(y.a,{item:!0,md:10},n.a.createElement(qe.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path",type:"text",value:e.bip32Path,onChange:a.handleBIP32PathChange,disabled:i!==Le.PENDING||r,error:a.hasBIP32PathError(),helperText:a.bip32PathError()})),n.a.createElement(y.a,{item:!0,md:2},!a.bip32PathIsDefault()&&n.a.createElement(R.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path,disabled:r||i!==Le.PENDING},"Default"))),n.a.createElement(X.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),n.a.createElement(P.a,{mt:2},a.renderAction()),a.renderDeviceConfirmInfo(),n.a.createElement(st,{messages:l.messagesFor({walletState:i}),excludeCodes:["bip32"]}))},a.renderDeviceConfirmInfo=function(){var e=a.props,t=e.fee,r=e.inputsTotalSats,i=a.state,l=i.verified,o=i.walletState;return l&&o===Le.ACTIVE?n.a.createElement(P.a,null,n.a.createElement("p",null,"Your device will ask you to verify the following information:"),n.a.createElement(Ea.a,null,n.a.createElement(ba.a,null,n.a.createElement(pa.a,{hover:!0},n.a.createElement(ha.a,null),n.a.createElement(ha.a,null,"Amount (BTC)"))),n.a.createElement(fa.a,null,a.renderTargets(),n.a.createElement(pa.a,{hover:!0},n.a.createElement(ha.a,null,"Fee"),n.a.createElement(ha.a,null,t)),n.a.createElement(pa.a,{hover:!0},n.a.createElement(ha.a,null,"Total"),n.a.createElement(ha.a,null,Object(H.satoshisToBitcoins)(r).toString()))))):""},a.renderTargets=function(){return a.props.outputs.map(function(e,t){return n.a.createElement(pa.a,{hover:!0,key:t},n.a.createElement(ha.a,null,"Address ",n.a.createElement("code",null,e.address)),n.a.createElement(ha.a,null,e.amount))})},a.renderAction=function(){var e=a.state,t=e.verified,r=e.verifyError,i=e.signatureError,l=e.walletState;return t?n.a.createElement(y.a,{container:!0,alignItems:"center"},n.a.createElement(y.a,{item:!0,md:3},n.a.createElement(R.a,{variant:"contained",size:"large",color:"primary",onClick:a.sign,disabled:l!==Le.PENDING},"Sign")),n.a.createElement(y.a,{item:!0,md:9},n.a.createElement(X.a,{error:!0},i))):n.a.createElement(y.a,{container:!0,alignItems:"center"},n.a.createElement(y.a,{item:!0,md:3},n.a.createElement(R.a,{variant:"contained",size:"large",onClick:a.verify,color:"primary",disabled:l!==Le.PENDING||a.hasBIP32PathError()},"Verify")),n.a.createElement(y.a,{item:!0,md:9},n.a.createElement(X.a,{error:!0},r)))},a.hasBIP32PathError=function(){var e=a.state,t=e.bip32PathError,r=e.walletState;return""!==t||a.interaction().hasMessagesFor({walletState:r,level:Le.ERROR,code:"bip32"})},a.bip32PathError=function(){var e=a.state,t=e.bip32PathError,r=e.walletState;return""!==t?t:a.interaction().messageTextFor({walletState:r,level:Le.ERROR,code:"bip32"})},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},a.setBIP32PathError)},a.bip32PathIsDefault=function(){var e=a.props,t=e.signatureImporter,r=e.defaultBIP32Path;return t.bip32Path===r},a.resetBIP32Path=function(){var e=a.props.resetBIP32Path;a.setBIP32PathError(""),e()},a.verify=Object(it.a)(nt.a.mark(function e(){var t,r,n,i;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.disableChangeMethod,n=t.enableChangeMethod,r(),a.setState({verifyError:"",walletState:Le.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:i=e.sent,a.verifyPublicKey(i),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({verifyError:e.t0.message,walletState:Le.PENDING}),n();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),a.verifyPublicKey=function(e){for(var t=a.props,r=t.inputs,i=t.signatureImporters,l=t.enableChangeMethod,o="",c=0;c<r.length;c++){var s=r[c];if(Object(H.multisigPublicKeys)(s.multisig).indexOf(e)<0){o=n.a.createElement("span",null,n.a.createElement(ot.a,null),"\xa0 This device does not contain the correct key.  Are you sure the BIP32 path is correct?");break}for(var u=1;u<Object(H.multisigRequiredSigners)(s.multisig);u++){for(var m=i[u],d=0;d<m.publicKeys.length;d++){if(m.publicKeys[d]===e){o=n.a.createElement("span",null,n.a.createElement(ot.a,null),"A signature from this key was already imported.");break}}if(""!==o)break}if(""!==o)break}a.setState({verified:""===o,verifyError:o,walletState:Le.PENDING}),l()},a.sign=Object(it.a)(nt.a.mark(function e(){var t,r,n,i,l;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.disableChangeMethod,n=t.validateAndSetSignature,i=t.enableChangeMethod,r(),a.setState({signatureError:"",walletState:Le.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:l=e.sent,n(l,function(e){var t={signatureError:e};""!==e&&(t.walletState=Le.PENDING),a.setState(t)}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({signatureError:e.t0.message,walletState:Le.PENDING});case 14:i();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),a.state={verified:!1,verifyError:"",signatureError:"",bip32PathError:"",walletState:a.interaction(!0).isSupported()?Le.PENDING:Le.UNSUPPORTED},a}return Object(z.a)(t,e),t}(n.a.Component),La=Ee({setSignatureImporterName:"SET_SIGNATURE_IMPORTER_NAME",setSignatureImporterMethod:"SET_SIGNATURE_IMPORTER_METHOD",setSignatureImporterBIP32Path:"SET_SIGNATURE_IMPORTER_BIP32_PATH",setSignatureImporterPublicKeys:"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS",setSignatureImporterSignature:"SET_SIGNATURE_IMPORTER_SIGNATURE",setSignatureImporterFinalized:"SET_SIGNATURE_IMPORTER_FINALIZED",setSignatureImporterComplete:"SET_SIGNATURE_IMPORTER_COMPLETE"}),za=La.setSignatureImporterName,Fa=La.setSignatureImporterMethod,Ha=La.setSignatureImporterBIP32Path,Wa=La.setSignatureImporterPublicKeys,Ga=La.setSignatureImporterSignature,qa=La.setSignatureImporterFinalized,Ya=La.setSignatureImporterComplete,Xa="text",Va=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).titleRef=n.a.createRef(),a.state={disableChangeMethod:!1,showUnsignedTransaction:!1},a.componentDidMount=function(){a.resetBIP32Path(),a.scrollToTitle()},a.componentDidUpdate=function(){a.scrollToTitle()},a.scrollToTitle=function(){a.props.number===a.getCurrent()&&a.titleRef.current.scrollIntoView({behavior:"smooth"})},a.title=function(){var e=a.props,t=e.number,r=e.signatureImporter,i=e.setName;return n.a.createElement(ht,{number:t,name:r.name,setName:i})},a.renderImport=function(){var e=a.props,t=e.signatureImporter,r=e.number,i=r>a.getCurrent(),l=a.state.disableChangeMethod,o="signature-".concat(r,"-importer-select-label");return i?n.a.createElement("p",null,"Once you have imported the signature above, you will be able to import another signature here."):n.a.createElement("form",null,n.a.createElement(W.a,{fullWidth:!0},n.a.createElement(ze.a,{id:o},"Select Method"),n.a.createElement(Fe.a,{labelId:o,id:"signature-".concat(r,"-importer-select"),disabled:l,value:t.method,onChange:a.handleMethodChange},n.a.createElement(He.a,{value:""},"< Select method >"),n.a.createElement(He.a,{value:Le.TREZOR},"Trezor"),n.a.createElement(He.a,{value:Le.LEDGER},"Ledger"),n.a.createElement(He.a,{value:Le.HERMIT},"Hermit"),n.a.createElement(He.a,{value:Xa},"Enter as text"))),a.renderImportByMethod())},a.renderImportByMethod=function(){var e=a.props,t=e.network,r=e.signatureImporter,i=e.signatureImporters,l=e.inputs,o=e.inputsTotalSats,c=e.outputs,s=e.fee;return r.method===Xa?n.a.createElement(xa,{signatureImporter:r,validateAndSetSignature:a.validateAndSetSignature}):r.method===Le.HERMIT?n.a.createElement(Ua,{network:t,signatureImporter:r,inputs:l,outputs:c,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,defaultBIP32Path:a.defaultBIP32Path(),validateAndSetSignature:a.validateAndSetSignature,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod}):r.method===Le.TREZOR||r.method===Le.LEDGER?n.a.createElement(Da,{network:t,signatureImporter:r,signatureImporters:i,inputs:l,outputs:c,inputsTotalSats:o,fee:s,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,defaultBIP32Path:a.defaultBIP32Path(),validateAndSetSignature:a.validateAndSetSignature,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod}):null},a.handleMethodChange=function(e){var t=a.props,r=t.number;(0,t.setMethod)(r,e.target.value),a.reset()},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.renderUnsignedTransaction=function(){var e=a.state.showUnsignedTransaction,t=a.props.unsignedTransaction;if(e){var r=t.toHex();return n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement(Re,{text:r},n.a.createElement("code",null,v(r)))),n.a.createElement("small",null,n.a.createElement(R.a,{size:"small",onClick:a.handleHideUnsignedTransaction},"Hide Unsigned Transaction")))}return n.a.createElement("small",null,n.a.createElement(R.a,{size:"small",onClick:a.handleShowUnsignedTransaction},"Show Unsigned Transaction"))},a.handleShowUnsignedTransaction=function(){a.setState({showUnsignedTransaction:!0})},a.handleHideUnsignedTransaction=function(){a.setState({showUnsignedTransaction:!1})},a.reset=function(){var e=a.props,t=e.number,r=e.setSignature,n=e.setPublicKeys,i=e.setFinalized;r(t,""),n(t,[]),i(t,!1)},a.defaultBIP32Path=function(){var e=a.props,t=e.addressType,r=e.network;return Object(H.multisigBIP32Path)(t,r)},a.resetBIP32Path=function(){var e=a.props,t=e.number;(0,e.setBIP32Path)(t,a.defaultBIP32Path())},a.validateAndSetBIP32Path=function(e,t,r,n){var i=a.props,l=i.number,o=i.setBIP32Path,c=Object(H.validateBIP32Path)(e,n);o(l,e),c?r(c):(r(""),t())},a.renderSignature=function(){var e=a.props.signatureImporter,t=JSON.stringify(e.signature);return n.a.createElement("div",null,n.a.createElement("p",null,"The following signature was imported:"),n.a.createElement(y.a,{container:!0,justify:"center"},n.a.createElement(Re,{text:t},n.a.createElement("small",null,n.a.createElement("code",null,v(t,128))))),n.a.createElement(P.a,{mt:2},n.a.createElement(R.a,{variant:"contained",color:"secondary",size:"small",onClick:a.reset},"Remove Signature")))},a.validateAndSetSignature=function(e,t){var r=a.props,n=r.number,i=r.inputs,l=r.signatureImporters,o=r.unsignedTransaction,c=r.setComplete;if(Array.isArray(e))if(e.length<i.length)t("Not enough signatures (must be exactly one for each input).");else if(e.length>i.length)t("Too many signatures (must be exactly one for each input).");else{for(var s=[],u=Object.values(l).filter(function(e){return e.finalized}),m=0;m<e.length;m+=1){var d=i[m],p=m+1,h=e[m];if(""!==Object(H.validateHex)(h))return void t("Signature for input ".concat(p," is not valid hex."));var E=void 0;try{E=Object(H.validateMultisigSignature)(o,m,d,h)}catch(v){return void t("Signature for input ".concat(p," is invalid."))}if(!E)return void t("Signature for input ".concat(p," is invalid."));for(var b=0;b<u.length;b++){var f=u[b];if(f.signature[m]===h||f.publicKeys[m]===E)return void t("Signature for input ".concat(p," is a duplicate of a previously provided signature."))}s.push(E)}c(n,{signature:e,publicKeys:s,finalized:!0})}else t("Signature is not an array of strings.")},a}return Object(z.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.props.signatureImporter;return n.a.createElement(I.a,null,n.a.createElement(S.a,{title:this.title(),ref:this.titleRef}),n.a.createElement(O.a,null,e.finalized?this.renderSignature():this.renderImport(),n.a.createElement(P.a,{mt:2},this.renderUnsignedTransaction())))}},{key:"getCurrent",value:function(){var e=this.props.signatureImporters;return Object.keys(e).reduce(function(t,a){return t+(e[a].finalized?1:0)},1)}}]),t}(n.a.Component);var Za={setName:za,setMethod:Fa,setBIP32Path:Ha,setPublicKeys:Wa,setSignature:Ga,setFinalized:qa,setComplete:Ya},Ja=Object(c.b)(function(e,t){return Object(M.a)({},{signatureImporters:e.spend.signatureImporters,signatureImporter:e.spend.signatureImporters[t.number],fee:e.spend.transaction.fee},e.spend.transaction)},Za)(Va),Qa=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(n)))).state={error:"",broadcasting:!1,txid:""},a.buildSignedTransaction=function(){var e=a.props,t=e.unsignedTransaction,r=e.inputs,n=e.signatureImporters,i=[];return r.forEach(function(e,t){var a={};Object.values(n).forEach(function(e){var r=e.publicKeys[t],n=e.signature[t];a[r]=n}),i.push(a)}),Object(H.signedMultisigTransaction)(t,r,i)},a.handleBroadcast=Object(it.a)(nt.a.mark(function e(){var t,r,n,i,l,o;return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.client,n=t.network,i=a.buildSignedTransaction(),l="",o="",a.setState({broadcasting:!0}),e.prev=5,e.next=8,Ft(i.toHex(),n,r);case 8:o=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),console.error(e.t0),l="There was an error broadcasting the transaction.: ".concat(e.t0);case 15:return e.prev=15,a.setState({txid:o,error:l,broadcasting:!1}),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[5,11,15,18]])})),a.transactionURL=function(){var e=a.props.network,t=a.state.txid;return Object(H.blockExplorerTransactionURL)(t,e)},a}return Object(z.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.broadcasting,r=e.txid,i=this.buildSignedTransaction(),l=i.toHex();return n.a.createElement(I.a,null,n.a.createElement(S.a,{title:"Broadcast"}),n.a.createElement(O.a,null,n.a.createElement("form",null,i&&n.a.createElement(P.a,{mt:4},n.a.createElement(g.a,{variant:"h6"},"Signed Transaction"),n.a.createElement(Re,{text:l},n.a.createElement("small",null,n.a.createElement("code",null,v(l,128))))),""===r?n.a.createElement(P.a,{mt:2},n.a.createElement(R.a,{variant:"contained",color:"primary",disabled:!i||a,onClick:this.handleBroadcast},"Broadcast Transaction"),n.a.createElement(X.a,{error:!0},t),n.a.createElement("small",null,n.a.createElement(X.a,null,"Warning: Broadcasting this transaction cannot be undone."))):n.a.createElement(P.a,{mt:2},n.a.createElement(g.a,{variant:"h5"},n.a.createElement(Re,{text:r},n.a.createElement("code",null,r)),"\xa0",f(this.transactionURL(),n.a.createElement(Ke.a,null))),n.a.createElement("p",null,"Transaction successfully broadcast.")))))}}]),t}(n.a.Component);var $a=Object(c.b)(function(e){return Object(M.a)({network:e.settings.network,client:e.client},e.client,{signatureImporters:e.spend.signatureImporters,inputs:e.spend.transaction.inputs,unsignedTransaction:e.spend.transaction.unsignedTransaction})},{})(Qa),er=a(363),tr=a.n(er),ar=a(364),rr=a.n(ar),nr=a(368),ir=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).titleRef=n.a.createRef(),a.state={disableChangeMethod:!1},a.componentDidMount=function(){a.resetBIP32Path(),a.scrollToTitle()},a.componentDidUpdate=function(){a.scrollToTitle()},a.scrollToTitle=function(){a.titleRef.current.scrollIntoView({behavior:"smooth"})},a.renderImportByMethod=function(){var e=a.props,t=e.network,r=e.publicKeyImporter,i=e.defaultBIP32Path;return r.method===Le.HERMIT?n.a.createElement(at,{publicKeyImporter:r,validateAndSetBIP32Path:a.validateAndSetBIP32Path,validateAndSetPublicKey:a.validateAndSetPublicKey,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,reset:a.reset}):r.method===Le.TREZOR||r.method===Le.LEDGER?n.a.createElement(ut,{network:t,publicKeyImporter:r,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,defaultBIP32Path:i,validateAndSetPublicKey:a.validateAndSetPublicKey,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod}):null},a.handleMethodChange=function(e){(0,a.props.setMethod)(e.target.value),a.reset()},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.reset=function(){(0,a.props.reset)()},a.resetBIP32Path=function(){(0,a.props.resetBIP32Path)()},a.validateAndSetBIP32Path=function(e,t,r,n){var i=a.props.setBIP32Path,l=Object(H.validateBIP32Path)(e,n);i(e),l?r(l):(r(""),t())},a.validateAndSetPublicKey=function(e,t,r){var n=a.props.setPublicKey,i=Object(H.validatePublicKey)(e);n(e),i?t&&t(i):(t&&t(""),r&&r())},a.renderConfirmation=function(){var e=a.props,t=e.publicKeys,r=e.publicKeyImporter;if(""===r.publicKey)return null;if(t.includes(r.publicKey)){var i=Object(nr.a)(j.a)({color:"green"});return n.a.createElement(T.a,null,n.a.createElement(w.a,null,n.a.createElement(i,null,n.a.createElement(tr.a,null)),n.a.createElement(C.a,null,"The public key exported at BIP32 path ",n.a.createElement("code",null,r.bip32Path)," is present in the provided redeem script.")))}return n.a.createElement(T.a,null,n.a.createElement(w.a,null,n.a.createElement(j.a,null,n.a.createElement(g.a,{color:"error"},n.a.createElement(rr.a,null))),n.a.createElement(C.a,null,"The public key exported at BIP32 path ",n.a.createElement("code",null,r.bip32Path)," is not present in the provided redeem script.")))},a}return Object(z.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.props.publicKeyImporter,t=this.state.disableChangeMethod;return n.a.createElement(I.a,null,n.a.createElement(S.a,{ref:this.titleRef,title:"Confirm Ownership"}),n.a.createElement(O.a,null,n.a.createElement("form",null,n.a.createElement("p",null,"How will you confirm your ownership of this address?"),n.a.createElement(W.a,{fullWidth:!0},n.a.createElement(ze.a,{id:"public-key-importer-select-label"},"Select Method"),n.a.createElement(Fe.a,{labelId:!0,id:"public-key-importer-select",disabled:t,value:e.method,onChange:this.handleMethodChange},n.a.createElement(He.a,{value:""},"< Select method >"),n.a.createElement(He.a,{value:Le.TREZOR},"Trezor"),n.a.createElement(He.a,{value:Le.LEDGER},"Ledger"),n.a.createElement(He.a,{value:Le.HERMIT},"Hermit"))),this.renderImportByMethod(),this.renderConfirmation(),""!==e.method&&n.a.createElement(R.a,{variant:"contained",size:"small",color:"secondary",role:"button",onClick:this.reset},"Start Again"))))}}]),t}(n.a.Component);var lr={setMethod:function(e){return{type:ca,value:e}},setBIP32Path:function(e){return{type:oa,value:e}},setPublicKey:function(e){return{type:sa,value:e}},resetBIP32Path:function(){return{type:la}},reset:function(){return{type:ia}}},or=Object(c.b)(function(e,t){return e.spend.ownership},lr)(ir),cr=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(D.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).render=function(){return n.a.createElement(P.a,{mt:2},n.a.createElement(y.a,{container:!0,spacing:3},n.a.createElement(y.a,{item:!0,md:8},n.a.createElement(P.a,null,n.a.createElement(da,null)),a.renderBody()),n.a.createElement(y.a,{item:!0,md:4},n.a.createElement(P.a,null,n.a.createElement(de,null)),n.a.createElement(P.a,{mt:2},n.a.createElement(ae,null)),n.a.createElement(P.a,{mt:2},n.a.createElement(Tt,null)))))},a.renderBody=function(){var e=a.props,t=e.transaction;return e.ownership.chosen?n.a.createElement(P.a,{mt:2},n.a.createElement(or,null)):n.a.createElement(P.a,null,a.spendable()&&n.a.createElement(P.a,null,n.a.createElement(P.a,{mt:2},n.a.createElement(Ia,null)),n.a.createElement(P.a,{mt:2},n.a.createElement(Ka,null))),t.finalizedOutputs&&n.a.createElement(P.a,null,a.renderSignatureImporters()),a.signaturesFinalized()&&n.a.createElement(P.a,{mt:2},n.a.createElement($a,null)))},a.renderSignatureImporters=function(){for(var e=a.props.transaction,t=[],r=1;r<=e.requiredSigners;r++)t.push(n.a.createElement(P.a,{key:r,mt:2},n.a.createElement(Ja,{number:r})));return t},a.spendable=function(){return a.props.transaction.inputs.length>0},a.signaturesFinalized=function(){var e=a.props.signatureImporters;return Object.values(e).length>0&&Object.values(e).every(function(e){return e.finalized})},a.confirmOwnership=function(e){a.setState({addressFinalized:!0,confirmOwnership:e})},a}return Object(z.a)(t,e),t}(n.a.Component);var sr=Object(c.b)(function(e){return e.spend})(cr),ur=a(365),mr=a(834),dr=a(835),pr=Object(ur.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}),hr=function(){var e=pr();return n.a.createElement("div",{className:e.root},n.a.createElement(mr.a,{position:"static"},n.a.createElement(dr.a,null,n.a.createElement(g.a,{variant:"h6",className:e.title},"Caravan"),n.a.createElement(R.a,{color:"inherit",href:"#/address",target:"_blank"},"Create"),n.a.createElement(R.a,{color:"inherit",href:"#/spend",target:"_blank"},"Interact"),n.a.createElement(R.a,{color:"inherit",href:"#/",target:"_blank"},"Help"))))},Er=a(366),br=a(748),fr=function(){return n.a.createElement(P.a,{mt:2},n.a.createElement("hr",null),n.a.createElement(y.a,{container:!0,alignItems:"center"},n.a.createElement(y.a,{item:!0,sm:2},f("https://www.unchained-capital.com",n.a.createElement("img",{src:br,className:"logo",alt:"Unchained Capital logo",height:"32"}))),n.a.createElement(y.a,{item:!0,sm:6},n.a.createElement("p",null,"Copyright 2019 by Unchained Capital and released under an MIT license.")),n.a.createElement(y.a,{item:!0,sm:1},n.a.createElement("p",null," v",Er.a," "))))},vr=a(836),Pr=a(837),gr=function(e){function t(e){var a;return Object(U.a)(this,t),(a=Object(D.a)(this,Object(L.a)(t).call(this,e))).state={error:null,errorInfo:null},a}return Object(z.a)(t,e),Object(F.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({errorInfo:t,error:e})}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.errorInfo;return a?n.a.createElement(P.a,{m:4},n.a.createElement(P.a,{m:2},n.a.createElement(g.a,{variant:"h3",component:"h1"},"Something went wrong.")),n.a.createElement(P.a,{m:2},n.a.createElement(g.a,{variant:"body1"},"Let us know what happened on ",n.a.createElement("a",{href:"https://github.com/unchained-capital/caravan/issues",target:"_blank"},"github"),".")),n.a.createElement(P.a,{mx:2,my:3},n.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},t&&t.toString(),n.a.createElement("br",null),a.componentStack))):this.props.children}}]),t}(n.a.Component),yr=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(vr.a,null),n.a.createElement(Pr.a,{maxWidth:"lg"},n.a.createElement(hr,null),n.a.createElement(gr,null,n.a.createElement(h.a,null,n.a.createElement(E.a,null,n.a.createElement(b.a,{path:"/address",component:yt}),n.a.createElement(b.a,{path:"/spend",component:sr}),n.a.createElement(b.a,{path:"/",component:N})))),n.a.createElement(fr,null)))},Ir=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Sr(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function Or(e,t){return Object(M.a)({},e,t)}var Tr={network:H.MAINNET,totalSigners:3,requiredSigners:2,addressType:H.P2SH,frozen:!1},wr={type:"public",url:"",username:"",password:"",url_error:"",username_error:"",password_error:"",status:"unknown"},jr={present:!0,bip32Path:"",publicKeys:[],multisig:{},address:"",balanceSats:new jt.a(0),utxos:[],change:!1,spend:!1,fetchedUTXOs:!1,fetchUTXOsError:""},Cr={nodes:{},trailingEmptyNodes:0,fetchUTXOsErrors:0,balanceSats:new jt.a(0)};var _r=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cr,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case e:return function(e,t){var a=Object(M.a)({},jr,e.nodes[t.value.bip32Path]||{},t.value),r={};r[a.bip32Path]=a;var n=Object(M.a)({},e,{nodes:Object(M.a)({},e.nodes,r),balanceSats:e.balanceSats.plus(a.balanceSats)}),i=0,l=0,o=Object.keys(n.nodes);o.sort(function(e,t){var a=(e||"").split("/"),r=(t||"").split("/");return parseInt(a[2])-parseInt(r[2])});for(var c=0;c<o.length;c++){var s=o[o.length-(c+1)],u=n.nodes[s];u.fetchedUTXOs&&a.balanceSats.isEqualTo(0)&&i++,""!==u.fetchUTXOsError&&l++}return n.trailingEmptyNodes=i,n.fetchUTXOsErrors=l,n}(t,a);default:return t}}},Rr=Ee({setExtendedPublicKeyImporterName:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME",resetExtendedPublicKeyImporterBIP32Path:"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterBIP32Path:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterMethod:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD",setExtendedPublicKeyImporterExtendedPublicKey:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY",setExtendedPublicKeyImporterFinalized:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED"});Rr.setExtendedPublicKeyImporterName,Rr.setExtendedPublicKeyImporterBIP32Path,Rr.resetExtendedPublicKeyImporterBIP32Path,Rr.setExtendedPublicKeyImporterMethod,Rr.setExtendedPublicKeyImporterExtendedPublicKey,Rr.setExtendedPublicKeyImporterFinalized;function Br(e){var t=(new Date).getTime().toString(),a=Object.values(e.extendedPublicKeyImporters).map(function(e){return e.extendedPublicKey}).join("");return"".concat(t,"-").concat(a)}var Kr={name:"",bip32Path:Object(H.multisigBIP32Root)(H.P2SH,H.MAINNET),bip32PathModified:!1,method:"",extendedPublicKey:"",finalized:!1},xr={extendedPublicKeyImporters:{1:Object(M.a)({},Kr,{name:"Extended Public Key 1"}),2:Object(M.a)({},Kr,{name:"Extended Public Key 2"}),3:Object(M.a)({},Kr,{name:"Extended Public Key 3"})},defaultBIP32Path:Object(H.multisigBIP32Root)(H.P2SH,H.MAINNET),network:H.MAINNET,addressType:H.P2SH,fingerprint:""};function kr(e,t,a){var r={};r[a]=t.value;var n=Object(M.a)({},e,{nodes:{}});return n.extendedPublicKeyImporters[t.number]=Or(e.extendedPublicKeyImporters[t.number],r),Or(n,{fingerprint:Br(n)})}var Ar="text";function Nr(e){var t=(new Date).getTime().toString(),a=Object.values(e.publicKeyImporters).map(function(e){return e.publicKey}).join("");return"".concat(t,"-").concat(a)}var Mr={name:"",bip32Path:Object(H.multisigBIP32Path)(H.P2SH,H.MAINNET),bip32PathModified:!1,method:"",publicKey:"",finalized:!1,conflict:!1},Ur={publicKeyImporters:{1:Object(M.a)({},Mr,{name:"Public Key 1"}),2:Object(M.a)({},Mr,{name:"Public Key 2"}),3:Object(M.a)({},Mr,{name:"Public Key 3"})},defaultBIP32Path:Object(H.multisigBIP32Path)(H.P2SH,H.MAINNET),network:H.MAINNET,addressType:H.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:""};function Dr(e,t,a){var r={};r[a]=t.value;var n=Object(M.a)({},e);return n.publicKeyImporters[t.number]=Or(e.publicKeyImporters[t.number],r),Lr(n.publicKeyImporters[t.number],e),Or(n,{fingerprint:Nr(n)})}function Lr(e,t){t.finalizedNetwork&&(e.conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType)}function zr(e,t,a){for(var r=1;r<=Object.values(e.publicKeyImporters).length;r++){var n=t.publicKeyImporters[r];n.bip32PathModified||n.finalized||(n.bip32Path=a),Lr(n,t)}}var Fr={chosen:!1,publicKeyImporter:Object(M.a)({},{bip32Path:"",method:"",publicKey:""}),network:H.MAINNET,addressType:H.P2SH,publicKeys:[],address:"",defaultBIP32Path:Object(H.multisigBIP32Path)(H.P2SH,H.MAINNET)};function Hr(e,t,a){var r={};return r[a]=t.value,Object(M.a)({},e,{publicKeyImporter:Object(M.a)({},e.publicKeyImporter,r)})}var Wr={name:"",method:"",publicKeys:[],signature:[],bip32Path:"",finalized:!1},Gr={};function qr(e,t,a){var r={};r[a]=t.value;var n=Object(M.a)({},e);return n[t.number]=Or(e[t.number],r),n}var Yr=a(244);function Xr(e,t){var a=e.txid.toLowerCase(),r=t.txid.toLowerCase();return a<r?-1:a>r?1:e.n<t.n?-1:e.n>t.n?1:0}var Vr={address:"",amount:"",amountSats:"",addressError:"",amountError:""},Zr=[Object(M.a)({},Vr)],Jr={chosen:!1,network:H.MAINNET,inputs:[],inputsTotalSats:new jt.a(0),outputs:[].concat(Zr),feeRate:"",feeRateError:"",fee:"",feeError:"",finalizedOutputs:!1,txid:"",balanceError:"",addressType:H.P2SH,requiredSigners:2,totalSigners:3,unsignedTransaction:{}};function Qr(e){if(e.outputs.find(function(e){return""!==e.addressError||""!==e.amountError})||""!==e.feeError||""!==e.feeRateError)return Object(M.a)({},e,{balanceError:""});var t=Object(H.bitcoinsToSatoshis)(new jt.a(e.fee)),a=e.outputs.map(function(e){return Object(H.bitcoinsToSatoshis)(new jt.a(e.amount||0))}).reduce(function(e,t){return e.plus(t)},new jt.a(0));if(e.inputsTotalSats.isEqualTo(a.plus(t)))return Object(M.a)({},e,{balanceError:""});var r,n=a.plus(t).minus(e.inputsTotalSats);if(n.isNaN())r="Cannot calculate total.";else{var i=n.isLessThan(0)?"Increase":"Decrease";r="".concat(i," by ").concat(Object(H.satoshisToBitcoins)(n.absoluteValue()).toFixed(8),".")}return Object(M.a)({},e,{balanceError:r})}function $r(e,t,a){return Object(H.satoshisToBitcoins)(Object(H.estimateMultisigTransactionFee)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:a,m:e.requiredSigners,n:e.totalSigners,feesPerByteInSatoshis:t})).toString()}var en="UPDATE_DEPOSIT_NODE",tn="UPDATE_CHANGE_NODE";var an=Object(o.c)({ownership:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ra:return Or(e,{chosen:!0});case V:return Or(e,{network:t.value});case na:return function(e,t){var a=t.value,r=Object(H.multisigAddressType)(a),n=Object(H.multisigBIP32Path)(r,e.network);return Object(M.a)({},e,{network:e.network,addressType:r,publicKeys:Object(H.multisigPublicKeys)(a),address:a.address,defaultBIP32Path:n})}(e,t);case oa:var a=Hr(e,{value:""},"publicKey");return Hr(a,t,"bip32Path");case ca:return Hr(e,t,"method");case sa:return Hr(e,t,"publicKey");case la:return Hr(e,{value:e.defaultBIP32Path},"bip32Path");case ia:return Object(M.a)({},e,{publicKeyImporter:Object(M.a)({},e.publicKeyImporter,{bip32Path:e.defaultBIP32Path,publicKey:""})});default:return e}},transaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ht:return Or(e,{chosen:!0});case V:return Or(e,{network:t.value});case Q:return Or(e,{addressType:t.value});case Wt:return Or(e,{requiredSigners:t.value});case Gt:return Or(e,{totalSigners:t.value});case qt:return function(e,t){var a=t.value.map(function(e){return e.amountSats}).reduce(function(e,t){return e.plus(t)},new jt.a(0));return Or(e,{inputs:t.value.sort(Xr),inputsTotalSats:a})}(e,t);case Yt:return Qr(function(e,t){var a=e.outputs.concat(Object(M.a)({},Vr));return Object(M.a)({},e,{outputs:a,fee:$r(e,e.feeRate,a.length)})}(e));case Xt:return Qr(function(e,t){var a=Object(Yr.a)(e.outputs),r=t.value,n=Object(H.validateAddress)(r,e.network);if(""===n)for(var i=0;i<e.inputs.length;i++)if(r===e.inputs[i].address){n="Output address cannot equal input address.";break}if(""===n)for(var l=0;l<e.outputs.length;l++)if(l!==t.number-1&&e.outputs[l].address===r){n="Duplicate output address.";break}return a[t.number-1].address=r,a[t.number-1].addressError=n,Object(M.a)({},e,{outputs:a})}(e,t));case Vt:return Qr(function(e,t){var a=Object(Yr.a)(e.outputs),r=t.value,n=Object(H.validateOutputAmountBTC)(r,e.inputsTotalSats);return a[t.number-1].amount=r,a[t.number-1].amountError=n,a[t.number-1].amountSats=n?"":Object(H.bitcoinsToSatoshis)(new jt.a(t.value)),Object(M.a)({},e,{outputs:a})}(e,t));case Zt:return Qr(function(e,t){for(var a=[],r=0;r<e.outputs.length;r++)r!==t.number-1&&a.push(e.outputs[r]);return Object(M.a)({},e,{outputs:a,fee:$r(e,e.feeRate,a.length)})}(e,t));case Jt:return Qr(function(e,t){var a=t.value,r=Object(H.validateFeeRate)(a);return Or(e,{feeRate:a,feeRateError:r,fee:""===r?$r(e,a,e.outputs.length):"",feeError:""})}(e,t));case Qt:return Qr(function(e,t){var a=t.value,r=Object(H.validateFeeBTC)(a,e.inputsTotalSats);return Or(e,{fee:a,feeError:r,feeRate:""===r?Object(H.estimateMultisigTransactionFeeRate)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:e.outputs.length,m:e.requiredSigners,n:e.totalSigners,feesInSatoshis:Object(H.bitcoinsToSatoshis)(new jt.a(a))}).toString():"",feeRateError:""})}(e,t));case $t:return function(e){var t=Object(H.unsignedMultisigTransaction)(e.network,e.inputs,e.outputs);return Object(M.a)({},e,{finalizedOutputs:!0,unsignedTransaction:t})}(e);case ea:return Or(e,{outputs:Zr,fee:"",balanceError:""});case ta:return Or(e,{txid:t.value});default:return e}},signatureImporters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_SIGNATURES":return Object(M.a)({},Gr);case Wt:return function(e,t){for(var a={},r=1;r<=t.value;r++)a[r]=Object(M.a)({},Wr,{name:"Signature ".concat(r)});return Object(M.a)({},e,a)}(e,t);case"SET_SIGNATURE_IMPORTER_NAME":return qr(e,t,"name");case"SET_SIGNATURE_IMPORTER_METHOD":return qr(e,t,"method");case"SET_SIGNATURE_IMPORTER_BIP32_PATH":return qr(e,t,"bip32Path");case"SET_SIGNATURE_IMPORTER_SIGNATURE":return qr(e,t,"signature");case"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS":return qr(e,t,"publicKeys");case"SET_SIGNATURE_IMPORTER_FINALIZED":return qr(e,t,"finalized");case"SET_SIGNATURE_IMPORTER_COMPLETE":return function(e,t){var a=Object(M.a)({},e);return a[t.number]=Or(e[t.number],t.value),a}(e,t);default:return e}}}),rn=Object(o.c)({deposits:_r(en),change:_r(tn)}),nn=Object(o.c)({settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Or(e,{network:t.value});case Z:return Or(e,{totalSigners:t.value});case J:return Or(e,{requiredSigners:t.value});case Q:return Or(e,{addressType:t.value});case $:return Or(e,{frozen:t.value});default:return e}},client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CLIENT_TYPE":return Or(e,{type:t.value});case"SET_CLIENT_URL":return Or(e,{url:t.value});case"SET_CLIENT_USERNAME":return Or(e,{username:t.value});case"SET_CLIENT_PASSWORD":return Or(e,{password:t.value});case"SET_CLIENT_URL_ERROR":return Or(e,{url_error:t.value});case"SET_CLIENT_USERNAME_ERROR":return Or(e,{username_error:t.value});case"SET_CLIENT_PASSWORD_ERROR":return Or(e,{password_error:t.value});case"SET_CLIENT_STATUS":return Or(e,{status:t.value});default:return e}},address:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ur,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return function(e,t){var a=t.value,r=e.addressType,n=Object(H.multisigBIP32Path)(r,a),i=Object(M.a)({},e,{network:a,defaultBIP32Path:n});return zr(e,i,n),i}(e,t);case Q:return function(e,t){var a=e.network,r=t.value,n=Object(H.multisigBIP32Path)(r,a),i=Object(M.a)({},e,{addressType:r,defaultBIP32Path:n});return zr(e,i,n),i}(e,t);case Z:return function(e,t){for(var a=t.value,r={},n=1;n<=a;n++)r[n]=e.publicKeyImporters[n]||Object(M.a)({},Mr,{name:"Public Key ".concat(n)});var i=Object(M.a)({},e,{publicKeyImporters:r,stub:t.type});return Or(i,{fingerprint:Nr(i)})}(e,t);case"SET_PUBLIC_KEY_IMPORTER_NAME":return Dr(e,t,"name");case"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Dr(Dr(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Dr(Dr(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_METHOD":return Dr(e,t,"method");case"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY":return Dr(e,t,"publicKey");case"SET_PUBLIC_KEY_IMPORTER_FINALIZED":return Dr(function(e,t){var a=Object(M.a)({},e);return!0===t.value&&""===e.finalizedNetwork&&a.publicKeyImporters[t.number].method!==Ar?(a.finalizedNetwork=e.network,a.finalizedAddressType=e.addressType):!1===t.value&&""!==e.finalizedNetwork&&1===Object.values(e.publicKeyImporters).reduce(function(e,t){return!0===t.finalized&&t.method!==Ar?e+1:e},0)&&(a.finalizedNetwork="",a.finalizedAddressType="",Object.values(a.publicKeyImporters).forEach(function(e){return e.conflict=!1})),a}(e,t),t,"finalized");case"MOVE_PUBLIC_KEY_IMPORTER_UP":return function(e,t){if(1===t.number)return e;var a=Object(M.a)({},e),r=e.publicKeyImporters[t.number-1],n=e.publicKeyImporters[t.number];return a.publicKeyImporters[t.number-1]=n,a.publicKeyImporters[t.number]=r,Or(a,{fingerprint:Nr(a)})}(e,t);case"MOVE_PUBLIC_KEY_IMPORTER_DOWN":return function(e,t){if(t.number===Object.values(e.publicKeyImporters).length)return e;var a=Object(M.a)({},e),r=e.publicKeyImporters[t.number+1],n=e.publicKeyImporters[t.number];return a.publicKeyImporters[t.number+1]=n,a.publicKeyImporters[t.number]=r,Or(a,{fingerprint:Nr(a)})}(e,t);case be:return function(e,t){for(var a=Object.values(e.publicKeyImporters),r=a.map(function(e){return e.publicKey}).sort().map(function(e){return a.find(function(t){return t.publicKey===e})}),n={},i=1;i<=r.length;i++)n[i]=r[i-1];var l=Object(M.a)({},e,{publicKeyImporters:n});return Or(l,{fingerprint:Nr(l)})}(e);default:return e}},spend:an,quorum:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return function(e,t){for(var a=e.addressType,r=t.value,n=Object(H.multisigBIP32Root)(a,r),i=Object(M.a)({},e,{network:r,defaultBIP32Path:n}),l=1;l<=Object.values(e.extendedPublicKeyImporters).length;l++){var o=i.extendedPublicKeyImporters[l];o.bip32PathModified||(o.bip32Path=n)}return i}(e,t);case Q:return function(e,t){for(var a=t.value,r=e.network,n=Object(H.multisigBIP32Root)(a,r),i=Object(M.a)({},e,{addressType:a,defaultBIP32Path:n}),l=1;l<=Object.values(e.extendedPublicKeyImporters).length;l++){var o=i.extendedPublicKeyImporters[l];o.bip32PathModified||(o.bip32Path=n)}return i}(e,t);case Z:return function(e,t){for(var a=t.value,r={},n=1;n<=a;n++)r[n]=e.extendedPublicKeyImporters[n]||Object(M.a)({},Kr,{name:"Extended Public key ".concat(n)});return Object(M.a)({},e,{extendedPublicKeyImporters:r})}(e,t);case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME":return kr(e,t,"name");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return kr(kr(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return kr(kr(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD":return kr(e,t,"method");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY":return kr(e,t,"extendedPublicKey");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED":return kr(e,t,"finalized");default:return e}},wallet:rn}),ln=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,on=Object(o.e)(nn,ln(Object(o.a)(u.a,d.a,p.a)));l.a.render(n.a.createElement(c.a,{store:on},n.a.createElement(yr,null)),document.getElementById("app")),function(){if("serviceWorker"in navigator){if(new URL("/caravan",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/caravan","/service-worker.js");Ir?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Sr(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Sr(e)})}}()}},[[380,1,2]]]);
//# sourceMappingURL=main.8928d87a.chunk.js.map