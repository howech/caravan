(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{140:function(e,t,a){e.exports={feeMagicBtn:"styles_feeMagicBtn__3rvPV",utxoTxid:"styles_utxoTxid__2mEZz",outputsFormInput:"styles_outputsFormInput__1c3_M",unconfirmed:"styles_unconfirmed__3rm0X"}},234:function(e,t,a){},367:function(e){e.exports={a:"0.1.6-0"}},381:function(e,t,a){e.exports=a(750)},570:function(e,t){},573:function(e,t){},593:function(e,t){},595:function(e,t){},748:function(e,t,a){e.exports=a.p+"static/media/logo.66481e66.png"},750:function(e,t,a){"use strict";a.r(t);a(382);var r=a(0),n=a.n(r),i=a(29),l=a.n(i),o=a(83),c=a(21),s=a(352),u=a.n(s),d=a(353),p=a.n(d),m=a(354),h=a(839),E=a(842),b=a(845);function f(e,t){return n.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},t)}var v=a(838),P=a(85),g=a(797),y=a(791),I=a(795),S=a(796),O=a(798),T=a(752),w=a(799),j=a(801),C=a(804),_=a(805),R=a(800),B=a(802),K=a(803),x=a(806),k=function(){return n.a.createElement(y.a,null,n.a.createElement(I.a,{title:"Disclaimer"}),n.a.createElement(S.a,null,n.a.createElement("small",null,"This application is in \u201calpha\u201d state and is presented for evaluation and testing only. It is provided \u201cas is,\u201d and any express or implied warranties, including but not limited to the implied warranties of merchantability and fitness for a particular purpose, are disclaimed. By using this application, you accept all risks of such use, including full responsibility for any direct or indirect loss of any kind resulting from the use of this application, which may involve complete loss of any Bitcoin or other coins associated with addresses used with this application. In no event shall Unchained Capital, Inc., its employees and affiliates, or developers of this application be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this application, even if advised of the possibility of such damage.")))},A=function(){return n.a.createElement("div",null,n.a.createElement(v.a,{mt:4,mb:2},n.a.createElement(P.a,{variant:"h2"},"Welcome to Caravan!")),n.a.createElement(g.a,{container:!0,spacing:3},n.a.createElement(g.a,{container:!0,item:!0,md:8,spacing:2,direction:"column"},n.a.createElement(g.a,{item:!0},n.a.createElement(y.a,null,n.a.createElement(I.a,{title:"Stateless Multisig Coordinator"}),n.a.createElement(S.a,null,n.a.createElement("p",null,"Caravan is making bitcoin ",n.a.createElement("strong",null,"multisig")," custody easier and safer through transparency and standards."),n.a.createElement("p",null,"Caravan is a ",n.a.createElement("strong",null,"coordination")," software.  It connects to a source of consensus and your keys to build and interact with multisig bitcoin addresses."),n.a.createElement("p",null,"Caravan is also ",n.a.createElement("strong",null,"stateless"),".  It does not itself store any data.  You must safekeep the addresses (and redeem scripts & BIP32 paths) you create.")))),n.a.createElement(g.a,{item:!0},n.a.createElement(y.a,null,n.a.createElement(I.a,{title:"Keys"}),n.a.createElement(S.a,null,n.a.createElement("p",null,"All bitcoin is ultimately protected by private keys."),n.a.createElement("p",null,"Your private key may live on a piece of paper, a hardware wallet, some software on a laptop, or even just in your mind.  Caravan, being stateless, cannot store your private key but it can talk to hardware devices or software applications which do."),n.a.createElement("p",null,"Caravan supports entering public keys and signatures via text, so any wallet which can export such data can be made compatible with Caravan.")))),n.a.createElement(g.a,{item:!0},n.a.createElement(y.a,null,n.a.createElement(I.a,{title:"Consensus"}),n.a.createElement(S.a,null,n.a.createElement("p",null,"In order to look up address balances and broadcast transactions, Caravan requires knowledge of the constantly changing bitcoin network."),n.a.createElement("p",null,"Running a full bitcoin node is the best way to determine the current state of the bitcoin network.  Caravan can be easily configured to use your own bitcoin node for consensus information and broadcasting transactions."),n.a.createElement("p",null,"If you don't want to or cannot run your own full node, Caravan defaults to using the freely available API at ",n.a.createElement("code",null,"blockstream.info"),"."))))),n.a.createElement(g.a,{container:!0,item:!0,md:4,spacing:4,direction:"column"},n.a.createElement(g.a,{item:!0},n.a.createElement(y.a,null,n.a.createElement(I.a,{title:"Learn More"}),n.a.createElement(S.a,null,n.a.createElement(O.a,null,n.a.createElement(T.a,null,n.a.createElement(w.a,null,n.a.createElement(R.a,null)),n.a.createElement(j.a,null,f("https://www.unchained-capital.com/blog/the-caravan-arrives/","Blog Post"))),n.a.createElement(T.a,null,n.a.createElement(w.a,null,n.a.createElement(B.a,null)),n.a.createElement(j.a,null,f("https://www.youtube.com/playlist?list=PLUM8mrUjWoPRsVGEZ1gTntqPd4xrQZoiH","Video Tutorials"))),n.a.createElement(T.a,null,n.a.createElement(w.a,null,n.a.createElement(K.a,null)),n.a.createElement(j.a,null,f("https://github.com/unchained-capital/caravan","Source Code"))))))),n.a.createElement(g.a,{item:!0},n.a.createElement(y.a,null,n.a.createElement(I.a,{title:"Supported Devices"}),n.a.createElement(S.a,null,"Caravan has been tested with the following hardware wallets:",n.a.createElement("ul",null,n.a.createElement("li",null,f("https://shop.trezor.io/product/trezor-one-white","Trezor One")),n.a.createElement("li",null,f("https://www.ledger.com/products/ledger-nano-s","Ledger Nano S"))),"And web browsers:",n.a.createElement("ul",null,n.a.createElement("li",null,f("https://www.google.com/chrome/","Chrome")),n.a.createElement("li",null,f("https://www.mozilla.org/en-US/firefox/new/","Firefox"))),"Seeing a bug or need a feature?"),n.a.createElement(C.a,null,n.a.createElement(_.a,{href:"https://github.com/unchained-capital/caravan/issues"},n.a.createElement(x.a,null)," \xa0 Report Issue")))))),n.a.createElement(v.a,{mt:2},n.a.createElement(k,null)))},N=a(8),M=a(10),U=a(12),D=a(11),L=a(13),z=a(26),F=a(2),H=a(753),W=a(807),G=a(808),q=a(841),Y=a(756),X="SET_NETWORK",V="SET_TOTAL_SIGNERS",Z="SET_REQUIRED_SIGNERS",J="SET_ADDRESS_TYPE",Q="SET_FROZEN";var $=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(n)))).handleNetworkChange=function(e){(0,a.props.setNetwork)(e.target.value)},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props,t=e.network,a=e.frozen;return n.a.createElement(y.a,null,n.a.createElement(I.a,{title:"Network"}),n.a.createElement(S.a,null,n.a.createElement(H.a,{component:"fieldset"},n.a.createElement(W.a,null,n.a.createElement(G.a,{id:"mainnet",control:n.a.createElement(q.a,{color:"primary"}),name:"network",value:"mainnet",label:n.a.createElement("strong",null,"Mainnet"),onChange:this.handleNetworkChange,checked:t===F.MAINNET,disabled:a}),n.a.createElement(G.a,{id:"testnet",control:n.a.createElement(q.a,{color:"primary"}),name:"network",value:"testnet",label:"Testnet",onChange:this.handleNetworkChange,checked:t===F.TESTNET,disabled:a})),n.a.createElement(Y.a,null,n.a.createElement("small",null,"Choose 'Mainnet' if you don't understand the difference.")))))}}]),t}(n.a.Component);var ee={setNetwork:function(e){return{type:X,value:e}}},te=Object(c.b)(function(e){return{network:e.settings.network,frozen:e.settings.frozen}},ee)($),ae=a(755),re=a(809),ne=a(810),ie=(a(234),7),le=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).renderIncrementRequiredSigners=function(){var e=a.props,t=e.requiredSigners,r=e.totalSigners,i=e.frozen,l=t===r||i;return n.a.createElement(ae.a,{color:"primary",onClick:a.handleIncrementRequiredSigners,disabled:l},n.a.createElement(re.a,null))},a.renderDecrementRequiredSigners=function(){var e=a.props,t=e.requiredSigners,r=e.frozen,i=1===t||r;return n.a.createElement(ae.a,{color:"secondary",onClick:a.handleDecrementRequiredSigners,disabled:i},n.a.createElement(ne.a,null))},a.renderIncrementTotalSigners=function(){var e=a.props,t=e.totalSigners,r=e.frozen,i=t===ie||r;return n.a.createElement(ae.a,{color:"primary",onClick:a.handleIncrementTotalSigners,disabled:i},n.a.createElement(re.a,null))},a.renderDecrementTotalSigners=function(){var e=a.props,t=e.requiredSigners,r=e.totalSigners,i=e.frozen,l=r===t||2===r||i;return n.a.createElement(ae.a,{color:"secondary",onClick:a.handleDecrementTotalSigners,disabled:l},n.a.createElement(ne.a,null))},a.handleIncrementRequiredSigners=function(e){var t=a.props,r=t.requiredSigners;(0,t.setRequiredSigners)(r+1),e.preventDefault()},a.handleDecrementRequiredSigners=function(e){var t=a.props,r=t.requiredSigners;(0,t.setRequiredSigners)(r-1),e.preventDefault()},a.handleIncrementTotalSigners=function(e){var t=a.props,r=t.totalSigners;(0,t.setTotalSigners)(r+1),e.preventDefault()},a.handleDecrementTotalSigners=function(e){var t=a.props,r=t.totalSigners;(0,t.setTotalSigners)(r-1),e.preventDefault()},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props,t=e.requiredSigners,a=e.totalSigners;return n.a.createElement(y.a,null,n.a.createElement(I.a,{title:"Quorum"}),n.a.createElement(S.a,null,n.a.createElement(v.a,null,n.a.createElement(g.a,{container:!0,justify:"center"},n.a.createElement(g.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0"),n.a.createElement(g.a,{container:!0,item:!0,xs:3,direction:"column",alignItems:"center"},n.a.createElement(g.a,{item:!0},this.renderIncrementRequiredSigners()),n.a.createElement(g.a,{item:!0},n.a.createElement(P.a,{variant:"h2"},t)),n.a.createElement(g.a,{item:!0},n.a.createElement("small",null,n.a.createElement("p",null,"Required"))),n.a.createElement(g.a,{item:!0},this.renderDecrementRequiredSigners())),n.a.createElement(g.a,{container:!0,item:!0,xs:2,direction:"column",alignItems:"center",justify:"center"},n.a.createElement(g.a,{item:!0},n.a.createElement(P.a,{variant:"h6"},"of"))),n.a.createElement(g.a,{item:!0,container:!0,xs:3,direction:"column",alignItems:"center"},n.a.createElement(g.a,{item:!0},this.renderIncrementTotalSigners()),n.a.createElement(g.a,{item:!0},n.a.createElement(P.a,{variant:"h2"},a)),n.a.createElement(g.a,{item:!0},n.a.createElement("small",null,n.a.createElement("p",null,"Total"))),n.a.createElement(g.a,{item:!0},this.renderDecrementTotalSigners())),n.a.createElement(g.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0")))))}}]),t}(n.a.Component);var oe={setTotalSigners:function(e){return{type:V,value:e}},setRequiredSigners:function(e){return{type:Z,value:e}}},ce=Object(c.b)(function(e){return e.settings},oe)(le),se=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(n)))).handleTypeChange=function(e){(0,a.props.setType)(e.target.value)},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props,t=e.addressType,a=e.frozen;return n.a.createElement(y.a,null,n.a.createElement(I.a,{title:"Address Type"}),n.a.createElement(S.a,null,n.a.createElement(H.a,{component:"fieldset"},n.a.createElement(W.a,null,n.a.createElement(G.a,{id:F.P2SH,control:n.a.createElement(q.a,{color:"primary"}),name:"type",value:F.P2SH,label:F.P2SH,onChange:this.handleTypeChange,checked:t===F.P2SH,disabled:a}),n.a.createElement(G.a,{id:F.P2SH_P2WSH,control:n.a.createElement(q.a,{color:"primary"}),name:"type",value:F.P2SH_P2WSH,label:F.P2SH_P2WSH,onChange:this.handleTypeChange,checked:t===F.P2SH_P2WSH,disabled:a}),n.a.createElement(G.a,{id:F.P2WSH,control:n.a.createElement(q.a,{color:"primary"}),name:"type",value:F.P2WSH,label:F.P2WSH,onChange:this.handleTypeChange,checked:t===F.P2WSH,disabled:a})),n.a.createElement(Y.a,null,n.a.createElement("small",null,"Choose '",F.P2WSH,"' for best practices, '",F.P2SH,"' for greatest compatibility.")))))}}]),t}(n.a.Component);var ue={setType:function(e){return{type:J,value:e}}},de=Object(c.b)(function(e){return e.settings},ue)(se);function pe(e){return function(t){return{type:e,value:t}}}function me(e){return function(t,a){return{type:e,number:t,value:a}}}function he(e){var t,a={},r=Object.keys(e);for(t=0;t<r.length;t+=1){var n=r[t],i=e[n];a[n]=me(i)}return a}var Ee="SORT_PUBLIC_KEY_IMPORTERS";var be=he({setPublicKeyImporterName:"SET_PUBLIC_KEY_IMPORTER_NAME",resetPublicKeyImporterBIP32Path:"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterBIP32Path:"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterMethod:"SET_PUBLIC_KEY_IMPORTER_METHOD",setPublicKeyImporterPublicKey:"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY",setPublicKeyImporterFinalized:"SET_PUBLIC_KEY_IMPORTER_FINALIZED",movePublicKeyImporterUp:"MOVE_PUBLIC_KEY_IMPORTER_UP",movePublicKeyImporterDown:"MOVE_PUBLIC_KEY_IMPORTER_DOWN"}),fe=be.setPublicKeyImporterName,ve=be.setPublicKeyImporterBIP32Path,Pe=be.resetPublicKeyImporterBIP32Path,ge=be.setPublicKeyImporterMethod,ye=be.setPublicKeyImporterPublicKey,Ie=be.setPublicKeyImporterFinalized,Se=be.movePublicKeyImporterUp,Oe=be.movePublicKeyImporterDown,Te=a(359),we=a.n(Te),je=a(811),Ce=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).state={copied:!1,timer:null},a.componentWillUnmount=function(){var e=a.state.timer;e&&clearTimeout(e)},a.render=function(){var e=a.props,t=e.newline,r=e.text,i=e.children;return n.a.createElement(we.a,{text:r,onCopy:a.onCopy,options:{format:"text/plain"}},n.a.createElement("span",{className:"copyable"},i||r,t&&n.a.createElement("br",null),a.badge()))},a.badge=function(){return a.state.copied?n.a.createElement(je.a,{fontSize:"small"}):null},a.onCopy=function(){var e=setTimeout(function(){a.setState({copied:!1,timer:null})},1e3);a.setState({copied:!0,timer:e})},a}return Object(L.a)(t,e),t}(n.a.Component);Ce.defaultProps={newline:!1,icon:!0};var _e=Ce,Re=a(844),Be=a(812),Ke=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).renderScript=function(e,t){var a=Object(F.scriptToHex)(t),r=Object(F.scriptToOps)(t);return n.a.createElement(v.a,{mt:2},n.a.createElement(P.a,{variant:"h6"},e),n.a.createElement(g.a,{container:!0,spacing:2},n.a.createElement(g.a,{item:!0,sm:6},n.a.createElement(_e,{text:a},n.a.createElement("code",null,a))),n.a.createElement(g.a,{item:!0,sm:6},n.a.createElement(_e,{text:r},n.a.createElement("code",null,r)))))},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props,t=e.network,a=e.multisig,r=a.address,i=Object(F.multisigRedeemScript)(a),l=Object(F.multisigWitnessScript)(a);return n.a.createElement(v.a,{mt:2},n.a.createElement(P.a,{variant:"h6"},"Address"),n.a.createElement(P.a,{align:"center",variant:"h5"},n.a.createElement(g.a,{container:!0,direction:"column",spacing:2},n.a.createElement(g.a,{item:!0},n.a.createElement(_e,{text:r},n.a.createElement("code",null,r)),"\xa0",f(Object(F.blockExplorerAddressURL)(r,t),n.a.createElement(Be.a,null))),n.a.createElement(g.a,{item:!0,justify:"center",container:!0,spacing:3},n.a.createElement(g.a,{item:!0},n.a.createElement(Re.a,{label:"BTC"})),n.a.createElement(g.a,{item:!0},n.a.createElement(Re.a,{label:Object(F.networkLabel)(t)})),n.a.createElement(g.a,{item:!0},n.a.createElement(Re.a,{label:"".concat(Object(F.multisigRequiredSigners)(a),"-of-").concat(Object(F.multisigTotalSigners)(a))})),n.a.createElement(g.a,{item:!0},n.a.createElement(Re.a,{label:Object(F.multisigAddressType)(a)}))))),this.renderScript("Script",a),i&&this.renderScript("Redeem Script",i),l&&this.renderScript("Witness Script",l))}}]),t}(n.a.Component);var xe=Object(c.b)(function(e){return e.settings},{})(Ke),ke=a(813),Ae=function(){return n.a.createElement("small",null,n.a.createElement(O.a,null,n.a.createElement(T.a,{color:"error.main"},n.a.createElement(w.a,null,n.a.createElement(P.a,{color:"error"},n.a.createElement(ke.a,null))),n.a.createElement(j.a,null,n.a.createElement(P.a,{color:"error"},"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!")))))},Ne=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).title=function(){var e=a.props,t=e.totalSigners,r=e.requiredSigners,i=e.addressType;return n.a.createElement(g.a,{container:!0,justify:"space-between"},n.a.createElement(g.a,{item:!0},r,"-of-",t," Multisig ",i," Address"),n.a.createElement(g.a,{item:!0},n.a.createElement("small",null,"Public Keys: ".concat(a.publicKeyCount(),"/").concat(t))))},a.isInConflict=function(){var e=a.props.publicKeyImporters;return Object.values(e).some(function(e){return e.conflict})},a.publicKeyCount=function(){var e=a.props.publicKeyImporters;return Object.values(e).filter(function(e){return e.finalized}).length},a.publicKeysAreCanonicallySorted=function(){var e=a.props.publicKeyImporters,t=Object.values(e).map(function(e){return e.publicKey}).filter(function(e){return""!==e}),r=Object.values(e).map(function(e){return e.publicKey}).filter(function(e){return""!==e}).sort();return t.filter(function(e,t){return e===r[t]}).length===t.length},a.canonicallySortPublicKeys=function(){(0,a.props.sortPublicKeyImporters)()},a.generateMultisig=function(){for(var e=a.props,t=e.network,r=e.publicKeyImporters,n=e.totalSigners,i=e.requiredSigners,l=e.addressType,o=[],c=1;c<=n;c++)o.push(r[c].publicKey);return F.generateMultisigFromPublicKeys.apply(void 0,[t,l,i].concat(o))},a.downloadAddressDetails=function(e){e.preventDefault();var t=a.generateMultisig(),r=a.addressDetailsText(t),n=a.addressDetailsFilename(t),i=new Blob([r],{type:"text/plain"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(i,n);else{var l=window.document.createElement("a");l.href=window.URL.createObjectURL(i),l.download=n,document.body.appendChild(l),l.click(),document.body.removeChild(l)}},a.addressDetailsFilename=function(e){var t=a.props,r=t.totalSigners,n=t.requiredSigners,i=t.addressType;return"bitcoin-".concat(n,"-of-").concat(r,"-").concat(i,"-").concat(e.address,".txt")},a.addressDetailsText=function(e){var t=a.props,r=t.addressType,n=t.network,i=t.totalSigners,l=t.requiredSigners,o=Object(F.multisigRedeemScript)(e),c=Object(F.multisigWitnessScript)(e),s=o?"Redeem Script: ".concat(Object(F.scriptToHex)(o)):"",u=c?"Witness Script: ".concat(Object(F.scriptToHex)(c)):"",d=o&&c?"\n\n":"";return"Address: ".concat(e.address,"\n\nType: ").concat(r,"\n\nNetwork: ").concat(n,"\n\nQuorum: ").concat(l,"-of-").concat(i,"\n\nBIP32 Paths:\n").concat(a.publicKeyImporterBIP32Paths(),"\n\n").concat(s).concat(d).concat(u,"\n")},a.publicKeyImporterBIP32Paths=function(){for(var e=a.props.totalSigners,t=[],r=1;r<=e;r++)t.push(a.publicKeyImporterBIP32Path(r));return t.join("\n")},a.publicKeyImporterBIP32Path=function(e){var t=a.props.publicKeyImporters[e],r="text"===t.method?"Unknown (make sure you have written this down previously!)":t.bip32Path;return"  * ".concat(t.name,": ").concat(r)},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){return n.a.createElement(y.a,null,n.a.createElement(I.a,{title:this.title()}),n.a.createElement(S.a,null,this.body()))}},{key:"body",value:function(){var e=this.props.totalSigners;if(this.publicKeyCount()===e){var t=this.generateMultisig(),a=this.publicKeysAreCanonicallySorted();return n.a.createElement("div",null,this.isInConflict()&&n.a.createElement(Ae,null),!a&&n.a.createElement(g.a,{container:!0,justify:"space-between"},n.a.createElement(g.a,{item:!0,md:8},n.a.createElement(Y.a,{error:!0},"WARNING: These public keys are not in the standard ",f("https://github.com/bitcoin/bips/blob/master/bip-0067.mediawiki","BIP67 order"),".")),n.a.createElement(g.a,{item:!0,md:4},n.a.createElement(_.a,{variant:"contained",color:"primary",onClick:this.canonicallySortPublicKeys},"Sort Public Keys"))),n.a.createElement(v.a,{mt:2},n.a.createElement(xe,{multisig:t})),n.a.createElement(v.a,{mt:2},n.a.createElement(_.a,{variant:"contained",color:"primary",onClick:this.downloadAddressDetails},"Download Address Details")))}return n.a.createElement("p",null,"Once you have imported all ".concat(e," public keys, "),"your address details will be displayed here.")}}]),t}(n.a.Component);var Me={sortPublicKeyImporters:function(){return{type:Ee}}},Ue=Object(c.b)(function(e){return Object(N.a)({},e.settings,e.address)},Me)(Ne),De=a(9),Le=a(761),ze=a(760),Fe=a(823),He=a(821),We=a(822),Ge=a(814),qe=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).state={error:"",publicKey:""},a.render=function(){var e=a.state,t=e.error,r=e.publicKey;return n.a.createElement(v.a,{mt:2},n.a.createElement(Ge.a,{fullWidth:!0,name:"publicKey",label:"Public Key",value:r,onChange:a.handleChange,error:a.hasError(),helperText:t}),n.a.createElement(v.a,{mt:2},n.a.createElement(_.a,{variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:""===r||a.hasError()},"Add Public Key")))},a.import=function(){(0,a.props.validateAndSetPublicKey)(a.state.publicKey,a.setError)},a.hasError=function(){return""!==a.state.error},a.setError=function(e){a.setState({error:e})},a.handleChange=function(e){var t=e.target.value,r=Object(F.validatePublicKey)(t);a.setState({publicKey:t,error:r})},a}return Object(L.a)(t,e),t}(n.a.Component),Ye="m/0",Xe=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).componentDidMount=function(){a.setBIP32PathToDefault()},a.state={extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:""},a.render=function(){var e=a.props.publicKeyImporter,t=a.state,r=t.extendedPublicKey,i=t.extendedPublicKeyError,l=t.bip32PathError;return n.a.createElement("div",null,n.a.createElement(v.a,{mt:2},n.a.createElement(Ge.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:r,onChange:a.handleExtendedPublicKeyChange,error:a.hasExtendedPublicKeyError(),helperText:i})),n.a.createElement(v.a,{mt:2},n.a.createElement(g.a,{container:!0},n.a.createElement(g.a,{item:!0,md:10},n.a.createElement(Ge.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:e.bip32Path,onChange:a.handleBIP32PathChange,error:a.hasBIP32PathError(),helperText:l}),n.a.createElement(Y.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),n.a.createElement(g.a,{item:!0,md:2},!a.bip32PathIsDefault()&&n.a.createElement(_.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path},"Default"))),n.a.createElement(v.a,{mt:2},n.a.createElement(_.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:""===r||a.hasError()},"Import Public Key"))))},a.import=function(){var e=a.props,t=e.network,r=e.publicKeyImporter,n=e.validateAndSetPublicKey,i=a.state.extendedPublicKey;n(Object(F.deriveChildPublicKey)(i,r.bip32Path,t),function(e){return a.setState({bip32PathError:e})})},a.setBIP32PathToDefault=function(){(0,a.props.validateAndSetBIP32Path)(Ye,function(){},function(){})},a.hasBIP32PathError=function(){return""!==a.state.bip32PathError},a.hasExtendedPublicKeyError=function(){return""!==a.state.extendedPublicKeyError},a.hasError=function(){return a.hasBIP32PathError()||a.hasExtendedPublicKeyError()},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},a.setBIP32PathError,{mode:"unhardened"})},a.bip32PathIsDefault=function(){return a.props.publicKeyImporter.bip32Path===Ye},a.resetBIP32Path=function(){a.setBIP32PathToDefault(),a.setBIP32PathError("")},a.handleExtendedPublicKeyChange=function(e){var t=a.props.network,r=e.target.value,n=Object(F.validateExtendedPublicKey)(r,t);a.setState({extendedPublicKey:r,extendedPublicKeyError:n})},a}return Object(L.a)(t,e),t}(n.a.Component),Ve=a(754),Ze=a(360),Je=a.n(Ze),Qe=300,$e=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).state={walletState:De.PENDING,error:""},a.render=function(){var e=a.state,t=e.walletState,r=e.error,i=a.props,l=i.interaction,o=i.width,c=i.startText;if(t===De.PENDING){var s=l.messageFor({walletState:t,code:"hermit.command"});return n.a.createElement("div",null,n.a.createElement("p",null,s.instructions),n.a.createElement(g.a,{container:!0,justify:"center",className:"mb-2"},n.a.createElement(_e,{text:s.command},n.a.createElement("code",null,n.a.createElement("strong",null,s.mode,">")," ",s.command))),n.a.createElement("p",null,"When you are ready, scan the QR code produced by Hermit:"),n.a.createElement(v.a,{mt:2},n.a.createElement(_.a,{variant:"contained",color:"primary",className:"mt-2",size:"large",onClick:a.handleStart},c)))}return t===De.ACTIVE?n.a.createElement(g.a,{container:!0,direction:"column"},n.a.createElement(g.a,{item:!0},n.a.createElement(Je.a,{delay:Qe,onError:a.handleError,onScan:a.handleScan,style:{width:o},facingMode:"user"})),n.a.createElement(g.a,{item:!0},n.a.createElement(_.a,{variant:"contained",color:"secondary",size:"small",onClick:a.handleStop},"Cancel"))):"error"===t||"success"===t?n.a.createElement("div",null,n.a.createElement(Y.a,{error:!0},r),n.a.createElement(_.a,{variant:"contained",color:"secondary",size:"small",onClick:a.handleStop},"Reset")):null},a.handleStart=function(){var e=a.props.onStart;a.setState({walletState:De.ACTIVE,error:""}),e&&e()},a.handleError=function(e){var t=a.props.onClear;a.setState({walletState:"error",error:e.message}),t&&t()},a.handleScan=function(e){var t=a.props,r=t.onSuccess,n=t.interaction;if(e)try{r(n.parse(e)),a.setState({walletState:"success"})}catch(i){a.handleError(i)}},a.handleStop=function(){var e=a.props.onClear;a.setState({walletState:De.PENDING,error:""}),e&&e()},a}return Object(L.a)(t,e),t}(r.Component);$e.defaultProps={width:"256px",startText:"Scan"};var et=$e,tt=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).state={publicKeyError:"",walletState:De.PENDING},a.componentDidMount=function(){(0,a.props.resetBIP32Path)()},a.interaction=function(){var e=a.props,t=e.network,r=e.publicKeyImporter;return new De.HermitExportPublicKey({network:t,bip32Path:r.bip32Path})},a.render=function(){var e=a.props.disableChangeMethod,t=a.state.publicKeyError;return n.a.createElement(Ve.a,null,n.a.createElement(et,{startText:"Import Public Key",interaction:a.interaction(),onStart:e,onSuccess:a.import,onClear:a.onClear}),n.a.createElement(Y.a,{error:!0},t))},a.setError=function(e){a.setState({publicKeyError:e})},a.import=function(e){var t=a.props,r=t.validateAndSetBIP32Path,n=t.validateAndSetPublicKey;(0,t.enableChangeMethod)();var i=e.pubkey;r(e.bip32_path,function(){n(i,a.setError)},a.setError)},a.onClear=function(){var e=a.props,t=e.reset,r=e.enableChangeMethod;t(!0),a.setError(""),r()},a}return Object(L.a)(t,e),t}(n.a.Component),at=a(15),rt=a.n(at),nt=a(33),it=a(816),lt=a(817),ot=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).render=function(){return n.a.createElement("small",null,n.a.createElement(O.a,null,a.filteredMessages().map(function(e,t){return a.renderMessage(e,t)})))},a.renderMessage=function(e,t){return n.a.createElement(T.a,{key:t},n.a.createElement(w.a,null,a.messageIcon(e)),n.a.createElement(j.a,null,e.text))},a.filteredMessages=function(){var e=a.props,t=e.messages,r=e.excludeCodes;return t.filter(function(e){for(var t=0;t<r.length;t++){var a=r[t];if((e.code||"").includes(a))return!1}return!0})},a.messageIcon=function(e){switch(e.level){case De.INFO:return n.a.createElement(it.a,null);case De.WARNING:return n.a.createElement(ke.a,null);case De.ERROR:return n.a.createElement(lt.a,null);default:return null}},a.messageColrName=function(e){switch(e.level){case De.INFO:return"primary.main";case De.WARNING:return"text.secondary";case De.ERROR:return"error.main";default:return""}},a}return Object(L.a)(t,e),t}(n.a.Component);ot.defaultProps={messages:[],excludeCodes:[]};var ct=ot,st=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(U.a)(this,Object(D.a)(t).call(this,e))).componentDidMount=function(){a.resetBIP32Path()},a.interaction=function(){var e=a.props,t=e.network,r=e.publicKeyImporter;return Object(De.HardwareWalletExportPublicKey)({network:t,walletType:r.method,bip32Path:r.bip32Path})},a.render=function(){var e=a.props.publicKeyImporter,t=a.state,r=t.walletState,i=t.publicKeyError,l=a.interaction();return r===De.UNSUPPORTED?n.a.createElement(Y.a,{error:!0},l.messageTextFor({walletState:r})):n.a.createElement(v.a,{mt:2},n.a.createElement(g.a,{container:!0},n.a.createElement(g.a,{item:!0,md:6},n.a.createElement(Ge.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:a.handleBIP32PathChange,disabled:r!==De.PENDING,error:a.hasBIP32PathError(),helperText:a.bip32PathError()})),n.a.createElement(g.a,{item:!0,md:6},!a.bip32PathIsDefault()&&n.a.createElement(_.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path,disabled:r!==De.PENDING},"Default"))),n.a.createElement(Y.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),n.a.createElement(v.a,{mt:2},n.a.createElement(_.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:a.hasBIP32PathError()||r===De.ACTIVE},"Import Public Key")),n.a.createElement(ct,{messages:l.messagesFor({walletState:r}),excludeCodes:["bip32"]}),n.a.createElement(Y.a,{error:!0},i))},a.import=Object(nt.a)(rt.a.mark(function e(){var t,r,n,i;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.validateAndSetPublicKey,n=t.enableChangeMethod,(0,t.disableChangeMethod)(),a.setState({publicKeyError:"",walletState:De.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:i=e.sent,r(i,function(e){a.setState({publicKeyError:e,walletState:De.PENDING})}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({publicKeyError:e.t0.message,walletState:De.PENDING});case 14:n();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),a.hasBIP32PathError=function(){var e=a.state,t=e.bip32PathError,r=e.walletState;return""!==t||a.interaction().hasMessagesFor({walletState:r,level:De.ERROR,code:"bip32"})},a.bip32PathError=function(){var e=a.state,t=e.bip32PathError,r=e.walletState;return""!==t?t:a.interaction().messageTextFor({walletState:r,level:De.ERROR,code:"bip32"})},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},a.setBIP32PathError)},a.bip32PathIsDefault=function(){var e=a.props,t=e.publicKeyImporter,r=e.defaultBIP32Path;return t.bip32Path===r},a.resetBIP32Path=function(){var e=a.props.resetBIP32Path;a.setBIP32PathError(""),e()},a.state={publicKeyError:"",bip32PathError:"",walletState:a.interaction().isSupported()?De.PENDING:De.UNSUPPORTED},a}return Object(L.a)(t,e),t}(n.a.Component),ut=a(818),dt=a(819),pt=a(820),mt=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).state={editing:!1,newName:"",error:""},a.componentDidMount=function(){var e=a.props.name;a.setState({newName:e})},a.render=function(){var e=a.props.name,t=a.state,r=t.editing,i=t.newName,l=t.error;return r?n.a.createElement(g.a,{container:!0,alignItems:"center"},n.a.createElement(g.a,{item:!0},n.a.createElement(Ge.a,{label:"Name",value:i,onChange:a.handleChange,error:a.hasError(),helperText:l})),n.a.createElement(g.a,{item:!0},n.a.createElement(ae.a,{size:"small",onClick:a.submit,disabled:a.hasError()},n.a.createElement(ut.a,null))),n.a.createElement(g.a,{item:!0},n.a.createElement(ae.a,{color:"secondary",size:"small",onClick:a.cancel},n.a.createElement(dt.a,null)))):n.a.createElement("span",null,n.a.createElement(ae.a,{size:"small",onClick:a.startEditing},n.a.createElement(pt.a,null)),"\xa0",e)},a.hasError=function(){return""!==a.state.error},a.startEditing=function(e){var t=a.props.name;e.preventDefault(),a.setState({editing:!0,newName:t})},a.handleChange=function(e){var t=e.target.value,r="";null!==t&&void 0!==t&&""!==t||(r="Name cannot be blank."),a.setState({newName:t,error:r})},a.submit=function(){var e=a.props;(0,e.setName)(e.number,a.state.newName),a.setState({editing:!1})},a.cancel=function(){var e=a.props.name;a.setState({error:"",newName:e,editing:!1})},a}return Object(L.a)(t,e),t}(n.a.Component),ht="xpub",Et="text",bt=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).state={disableChangeMethod:!1},a.title=function(){var e=a.props,t=e.number,r=e.totalSigners,i=e.publicKeyImporter,l=e.setName;return n.a.createElement(g.a,{container:!0,justify:"space-between"},n.a.createElement(g.a,{item:!0},n.a.createElement(mt,{number:t,name:i.name,setName:l})),n.a.createElement(g.a,{item:!0},n.a.createElement(g.a,{container:!0,justify:"flex-end"},n.a.createElement(_.a,{type:"button",variant:"contained",onClick:a.moveUp,disabled:1===t},n.a.createElement(He.a,null)),n.a.createElement("span",null,"\xa0"),n.a.createElement(_.a,{type:"button",variant:"contained",onClick:a.moveDown,disabled:t===r},n.a.createElement(We.a,null)))))},a.renderImport=function(){var e=a.props,t=e.publicKeyImporter,r=e.number,i=a.state.disableChangeMethod,l="public-key-".concat(r,"-importer-select-label");return n.a.createElement("div",null,n.a.createElement(H.a,{fullWidth:!0},n.a.createElement(Le.a,{id:l},"Select Method"),n.a.createElement(ze.a,{labelId:l,id:"public-key-".concat(r,"-importer-select"),disabled:i,value:t.method,onChange:a.handleMethodChange},n.a.createElement(Fe.a,{value:""},"< Select method >"),n.a.createElement(Fe.a,{value:De.TREZOR},"Trezor"),n.a.createElement(Fe.a,{value:De.LEDGER},"Ledger"),n.a.createElement(Fe.a,{value:De.HERMIT},"Hermit"),n.a.createElement(Fe.a,{value:ht},"Derive from extended public key"),n.a.createElement(Fe.a,{value:Et},"Enter as text"))),a.renderImportByMethod())},a.renderImportByMethod=function(){var e=a.props,t=e.publicKeyImporter,r=e.network,i=e.addressType,l=e.defaultBIP32Path;return t.method===De.TREZOR||t.method===De.LEDGER?n.a.createElement(st,{publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,addressType:i,defaultBIP32Path:l,network:r}):t.method===De.HERMIT?n.a.createElement(tt,{publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,reset:a.reset}):t.method===ht?n.a.createElement(Xe,{network:r,publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path}):t.method===Et?n.a.createElement(qe,{publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey}):null},a.handleMethodChange=function(e){var t=a.props,r=t.number,n=t.setMethod,i=t.setPublicKey;n(r,e.target.value),i(r,"")},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.finalize=function(){var e=a.props,t=e.number;(0,e.setFinalized)(t,!0)},a.reset=function(e){var t=a.props,r=t.number,n=t.setPublicKey,i=t.setFinalized;n(r,""),i(r,!1),e&&a.resetBIP32Path()},a.moveUp=function(e){var t=a.props,r=t.moveUp,n=t.number;e.preventDefault(),r(n)},a.moveDown=function(e){var t=a.props,r=t.moveDown,n=t.number;e.preventDefault(),r(n)},a.renderBIP32Path=function(){var e=a.props.publicKeyImporter;return e.method!==Et?n.a.createElement(v.a,{mt:4},n.a.createElement("p",null,"The BIP32 path for this public key is:"),n.a.createElement(g.a,{container:!0,justify:"center"},n.a.createElement(_e,{text:e.bip32Path},n.a.createElement("code",null,e.bip32Path))),n.a.createElement(v.a,{mt:4},n.a.createElement("p",null,"You will need this BIP32 path to sign for this key later.  ",n.a.createElement("strong",null,"Write down this BIP32 path!")))):null},a.validateAndSetBIP32Path=function(e,t,r,n){var i=a.props,l=i.number,o=i.setBIP32Path,c=Object(F.validateBIP32Path)(e,n);o(l,e),c?r(c):(r(""),t())},a.resetBIP32Path=function(){var e=a.props,t=e.number;(0,e.resetBIP32Path)(t)},a.renderPublicKey=function(){var e=a.props.publicKeyImporter;return n.a.createElement("div",null,n.a.createElement("p",null,"The following public key was imported:"),n.a.createElement(g.a,{container:!0,justify:"center"},n.a.createElement(_e,{text:e.publicKey},n.a.createElement("code",null,e.publicKey))),a.renderBIP32Path(),n.a.createElement(v.a,{mt:2},n.a.createElement(_.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){a.reset(e.method===De.HERMIT)}},"Remove Public Key")))},a.validateAndSetPublicKey=function(e,t,r){var n=a.props,i=n.number,l=n.publicKeyImporters,o=n.setPublicKey,c=Object(F.validatePublicKey)(e);o(i,e),c?t&&t(c):e&&Object.values(l).find(function(t,a){return a!==i-1&&t.publicKey===e})?t&&t("This public key has already been imported."):(t&&t(""),a.finalize(),r&&r())},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.publicKeyImporter;return n.a.createElement(y.a,null,n.a.createElement(I.a,{title:this.title()}),n.a.createElement(S.a,null,e.method&&e.method!==Et&&e.conflict&&n.a.createElement(Ae,null),e.finalized?this.renderPublicKey():this.renderImport()))}}]),t}(n.a.Component);var ft={setName:fe,setBIP32Path:ve,resetBIP32Path:Pe,setMethod:ge,setPublicKey:ye,setFinalized:Ie,moveUp:Se,moveDown:Oe},vt=Object(c.b)(function(e,t){return Object(N.a)({},e.settings,e.address,{publicKeyImporter:e.address.publicKeyImporters[t.number]})},ft)(bt),Pt=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).render=function(){return n.a.createElement(v.a,{mt:2},n.a.createElement(g.a,{container:!0,spacing:3},n.a.createElement(g.a,{item:!0,md:8},a.renderPublicKeyImporters(),n.a.createElement(v.a,{mt:2},n.a.createElement(Ue,null))),n.a.createElement(g.a,{item:!0,md:4},n.a.createElement(v.a,null,n.a.createElement(ce,null)),n.a.createElement(v.a,{mt:2},n.a.createElement(de,null)),n.a.createElement(v.a,{mt:2},n.a.createElement(te,null)))))},a.renderPublicKeyImporters=function(){for(var e=a.props.totalSigners,t=[],r=1;r<=e;r++)t.push(n.a.createElement(v.a,{key:r,mt:1===r?0:2},n.a.createElement(vt,{number:r})));return t},a}return Object(L.a)(t,e),t}(n.a.Component);var gt=Object(c.b)(function(e){return Object(N.a)({},{totalSigners:e.settings.totalSigners},e.address)})(Pt),yt=a(824),It=a(825),St=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).state={url_edited:!1},a.handleTypeChange=function(e){var t=a.props,r=t.setType,n=t.network,i=t.setUrl,l=e.target.checked?"private":"public";"private"!==l||a.state.url_edited||i("http://localhost:".concat("mainnet"===n?8332:18332)),r(l)},a.handleUrlChange=function(e){var t=a.props,r=t.setUrl,n=t.setUrlError,i=e.target.value,l=a.validateUrl(i);a.state.url_edited||l||a.setState({url_edited:!0}),r(i),n(l)},a.handleUsernameChange=function(e){var t=a.props,r=t.setUsername,n=t.setUsernameError,i=e.target.value,l=a.validateUsername(i);r(i),n(l)},a.handlePasswordChange=function(e){var t=a.props,r=t.setPassword,n=t.setPasswordError,i=e.target.value,l=a.validatePassword(i);r(i),n(l)},a.toggle=function(){var e=a.props.client,t=e.type.charAt(0).toUpperCase()+e.type.slice(1);return n.a.createElement(G.a,{control:n.a.createElement(yt.a,{color:"primary",checked:"private"===e.type,onChange:a.handleTypeChange,value:"private"}),label:t})},a.title=function(){return n.a.createElement(g.a,{container:!0,justify:"space-between"},n.a.createElement(g.a,{item:!0},"Consensus"),n.a.createElement(g.a,{item:!0},a.toggle()))},a.disabled=function(){return!1},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"validateUrl",value:function(e){return/^http(s)?:\/\/[^\s]+$/.exec(e)?"":"Must be a valid URL."}},{key:"validatePassword",value:function(e){return""}},{key:"validateUsername",value:function(e){return""}},{key:"render",value:function(){var e=this.props,t=e.client,a=e.url_error,r=e.username_error,i=e.password_error;return n.a.createElement(y.a,null,n.a.createElement(I.a,{title:this.title()}),n.a.createElement(S.a,null,"public"===t.type?n.a.createElement("p",null,"'Public' uses the ",n.a.createElement("code",null,"blockstream.info")," API. Switch to private to use a ",n.a.createElement("code",null,"bitcoind")," node."):n.a.createElement("div",null,n.a.createElement("p",null,"A ",n.a.createElement("code",null,"bitcoind"),"-compatible client is required to query UTXO data, estimate fees, and broadcast transactions."),n.a.createElement("p",null,n.a.createElement("small",null,"Due to CORS requirements, you must use a proxy around the node. Instructions are available ",f("https://github.com/unchained-capital/caravan#adding-cors-headers","here"),".")),n.a.createElement("form",null,n.a.createElement(g.a,{container:!0,direction:"column"},n.a.createElement(g.a,{item:!0},n.a.createElement(Ge.a,{fullWidth:!0,label:"URL",value:t.url,onChange:this.handleUrlChange,disabled:this.disabled(),error:""!==a,helperText:a,InputProps:{startAdornment:n.a.createElement(It.a,{position:"start"})}})),n.a.createElement(g.a,{item:!0}),n.a.createElement(g.a,{item:!0},n.a.createElement(Ge.a,{fullWidth:!0,label:"Username",value:t.username,onChange:this.handleUsernameChange,disabled:this.disabled(),error:r,helperText:r})),n.a.createElement(g.a,{item:!0},n.a.createElement(Ge.a,{fullWidth:!0,type:"password",label:"Password",value:t.password,onChange:this.handlePasswordChange,disabled:this.disabled(),error:i,helperText:i})))))))}}]),t}(n.a.Component);var Ot=Object(c.b)(function(e){return{network:e.settings.network,client:e.client,url_error:e.client.url_error,url:e.client.url}},function(e){var t,a={},r=Object.keys(e);for(t=0;t<r.length;t+=1){var n=r[t],i=e[n];a[n]=pe(i)}return a}({setType:"SET_CLIENT_TYPE",setUrl:"SET_CLIENT_URL",setUsername:"SET_CLIENT_USERNAME",setPassword:"SET_CLIENT_PASSWORD",setUrlError:"SET_CLIENT_URL_ERROR",setUsernameError:"SET_CLIENT_USERNAME_ERROR",setPasswordError:"SET_CLIENT_PASSWORD_ERROR",setStatus:"SET_CLIENT_STATUS"}))(St),Tt=a(24),wt=a.n(Tt),jt=a(120),Ct=a.n(jt);function _t(){return(_t=Object(nt.a)(rt.a.mark(function e(t,a){var r,n;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ct.a.get(Object(F.blockExplorerAPIURL)("/address/".concat(t,"/utxo"),a));case 3:return r=e.sent,n=r.data,e.next=7,Promise.all(n.map(function(){var e=Object(nt.a)(rt.a.mark(function e(t){var r,n,i;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct.a.get(Object(F.blockExplorerAPIURL)("/tx/".concat(t.txid,"/hex"),a));case 2:return r=e.sent,n=r.data,i=new wt.a(t.value),e.abrupt("return",{confirmed:t.status.confirmed,txid:t.txid,index:t.vout,amount:Object(F.satoshisToBitcoins)(i).toFixed(8),amountSats:i,transactionHex:n});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 13:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function Rt(){return(Rt=Object(nt.a)(rt.a.mark(function e(t){var a,r;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ct.a.get(Object(F.blockExplorerAPIURL)("/fee-estimates",t));case 3:return a=e.sent,r=a.data,e.abrupt("return",Math.ceil(r[2]));case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function Bt(){return(Bt=Object(nt.a)(rt.a.mark(function e(t,a){var r;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ct.a.post(Object(F.blockExplorerAPIURL)("/tx",a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function Kt(e,t,a){return xt.apply(this,arguments)}function xt(){return(xt=Object(nt.a)(rt.a.mark(function e(t,a,r){var n,i=arguments;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>3&&void 0!==i[3]?i[3]:[],e.abrupt("return",new Promise(function(){var e=Object(nt.a)(rt.a.mark(function e(i,l){return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ct()(t,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},auth:a,data:{jsonrpc:"2.0",id:0,method:"".concat(r),params:n}}).then(function(e){return i(e.data)}).catch(l);case 1:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kt(){return(kt=Object(nt.a)(rt.a.mark(function e(t){var a,r,n;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,r=t.auth,n=t.address,e.abrupt("return",new Promise(function(){var e=Object(nt.a)(rt.a.mark(function e(t){var i,l,o;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Kt(a,r,"listunspent",[0,9999999,[n]]);case 3:return i=e.sent,l=[],i.result.forEach(function(e){l.push(Kt(a,r,"getrawtransaction",[e.txid]))}),e.next=8,Promise.all(l);case 8:o=e.sent,t(i.result.map(function(e,t){var a=new wt.a(e.amount);return{confirmed:(e.confirmations||0)>0,txid:e.txid,index:e.vout,amount:a.toFixed(8),amountSats:Object(F.bitcoinsToSatoshis)(a),transactionHex:o[t].result}})),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function At(){return(At=Object(nt.a)(rt.a.mark(function e(t){var a,r,n,i,l,o;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,r=t.auth,n=t.numBlocks,i=void 0===n?2:n,e.next=3,Kt(a,r,"estimatesmartfee",[i]);case 3:return l=e.sent,o=l.result.feerate,e.abrupt("return",Math.ceil(1e5*o));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Nt(){return(Nt=Object(nt.a)(rt.a.mark(function e(t){var a,r,n,i;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,r=t.auth,n=t.hex,e.prev=1,e.next=4,Kt(a,r,"sendrawtransaction",[n]);case 4:return i=e.sent,e.abrupt("return",i.result);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("send tx error",e.t0),e.t0.response&&e.t0.response.data.error.message||e.t0;case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}var Mt="public";function Ut(e){return{url:e.url,auth:{username:e.username,password:e.password}}}function Dt(e,t,a){return a.type===Mt?function(e,t){return _t.apply(this,arguments)}(e,t):function(e){return kt.apply(this,arguments)}(Object(N.a)({},Ut(a),{address:e}))}function Lt(e,t){return t.type===Mt?function(e){return Rt.apply(this,arguments)}(e):function(e){return At.apply(this,arguments)}(Object(N.a)({},Ut(t),{numBlocks:1}))}function zt(e,t,a){return a.type===Mt?function(e,t){return Bt.apply(this,arguments)}(e,t):function(e){return Nt.apply(this,arguments)}(Object(N.a)({},Ut(a),{hex:e}))}var Ft="CHOOSE_PERFORM_SPEND",Ht="SET_REQUIRED_SIGNERS",Wt="SET_TOTAL_SIGNERS",Gt="SET_INPUTS",qt="ADD_OUTPUT",Yt="SET_OUTPUT_ADDRESS",Xt="SET_OUTPUT_AMOUNT",Vt="DELETE_OUTPUT",Zt="SET_FEE_RATE",Jt="SET_FEE",Qt="FINALIZE_OUTPUTS",$t="RESET_OUTPUTS",ea="SET_TXID";function ta(e,t){return{type:Xt,number:e,value:t}}var aa="CHOOSE_CONFIRM_OWNERSHIP",ra="SET_OWNERSHIP_MULTISIG",na="RESET_PUBLIC_KEY_IMPORTER",ia="RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",la="SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",oa="SET_PUBLIC_KEY_IMPORTER_METHOD",ca="SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY";var sa=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).state={scriptHex:"",scriptError:"",fetchUTXOsError:"",fetchedUTXOs:!1},a.disabled=function(){},a.hasScriptError=function(){return""!==a.state.scriptError},a.hasFetchUTXOsError=function(){return""!==a.state.fetchUTXOsError},a.hasError=function(){return a.hasScriptError()||a.hasFetchUTXOsError()},a.scriptName=function(){switch(a.props.addressType){case F.P2SH:return"redeem";case F.P2SH_P2WSH:case F.P2WSH:return"witness";default:return null}},a.scriptTitle=function(){var e=a.scriptName();return e.charAt(0).toUpperCase()+e.substring(1)},a.handleScriptChange=function(e){var t=e.target.value,r="";(""===t&&(r="".concat(a.scriptTitle()," script cannot be blank.")),""===r&&(t.includes("\n")||t.includes("\t")||t.includes(" "))&&(r="".concat(a.scriptTitle()," script should not contain spaces, tabs, or newlines.")),""===r)&&(""!==Object(F.validateHex)(t)&&(r="".concat(a.scriptTitle()," script is not valid hex.")));if(""!==t&&""===r)try{a.generateMultisig(t)}catch(n){console.error(n),r="Failed to parse ".concat(a.scriptName()," script.")}a.setState({scriptHex:t,scriptError:r,fetchUTXOsError:"",fetchedUTXOs:!1})},a.generateMultisig=function(e){var t=a.props,r=t.network,n=t.addressType;return e||(e=a.state.scriptHex),Object(F.generateMultisigFromHex)(r,n,e)},a.renderDetails=function(){var e=a.state.fetchUTXOsError,t=a.props,r=t.chosePerformSpend,i=t.choseConfirmOwnership,l=a.generateMultisig(),o=r||i;return n.a.createElement("div",null,n.a.createElement(xe,{multisig:l}),n.a.createElement(v.a,{mt:2},n.a.createElement(g.a,{container:!0,spacing:3},n.a.createElement(g.a,{item:!0},n.a.createElement(_.a,{variant:"contained",color:"primary",size:"large",onClick:a.performSpend,disabled:o},"Spend from this address")),n.a.createElement(g.a,{item:!0},n.a.createElement(_.a,{variant:"contained",size:"large",onClick:a.confirmOwnership,disabled:o},"Confirm ownership"))),n.a.createElement(Y.a,{error:!0},e)))},a.performSpend=Object(nt.a)(rt.a.mark(function e(){var t,r,n,i,l,o,c,s,u,d,p;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.setRequiredSigners,n=t.setTotalSigners,i=t.setInputs,l=t.setFrozen,o=t.choosePerformSpend,c=a.generateMultisig(),e.next=4,a.fetchUTXOs(c);case 4:(s=e.sent)?(u=s.utxos,d=s.inputsTotalSats,p="",d.isLessThanOrEqualTo(0)&&(p="This address has a zero balance."),a.setState({fetchedUTXOs:!0,fetchUTXOsError:p}),""===p&&(i(u),r(Object(F.multisigRequiredSigners)(c)),n(Object(F.multisigTotalSigners)(c)),l(!0),o())):a.setState({fetchedUTXOs:!1,fetchUTXOsError:"Failed to fetch UTXOs."});case 6:case"end":return e.stop()}},e)})),a.fetchUTXOs=function(){var e=Object(nt.a)(rt.a.mark(function e(t){var r,n,i,l;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props,n=r.network,i=r.client,l=null,e.prev=2,e.next=5,Dt(t.address,n,i);case 5:l=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",!1);case 12:if(null===l){e.next=14;break}return e.abrupt("return",{utxos:l.map(function(e){return Object(N.a)({},e,{multisig:t})}),inputsTotalSats:l.map(function(e){return e.amount}).reduce(function(e,t){return e.plus(t)},new wt.a(0))});case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),a.confirmOwnership=function(){var e=a.props,t=e.chooseConfirmOwnership,r=e.setOwnershipMultisig,n=e.setFrozen;r(a.generateMultisig()),t(),n(!0)},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.state,t=e.scriptHex,a=e.scriptError,r=e.fetchedUTXOs;return n.a.createElement(y.a,null,n.a.createElement(I.a,{title:"Enter ".concat(this.scriptTitle()," Script")}),n.a.createElement(S.a,null,n.a.createElement("form",null,n.a.createElement(Ge.a,{fullWidth:!0,multiline:!0,autoFocus:!0,variant:"outlined",label:"".concat(this.scriptTitle()," Script"),value:t,rows:5,onChange:this.handleScriptChange,disabled:r&&!this.hasFetchUTXOsError(),helperText:a,error:""!==a})),""===t||this.hasScriptError()?n.a.createElement("p",null,"Enter a valid ",this.scriptName()," script to generate an address to spend funds from."):this.renderDetails()))}}]),t}(n.a.Component);var ua={choosePerformSpend:function(){return{type:Ft}},setFrozen:function(e){return{type:Q,value:e}},setInputs:function(e){return{type:Gt,value:e}},setTotalSigners:function(e){return{type:Wt,value:e}},setRequiredSigners:function(e){return{type:Ht,value:e}},chooseConfirmOwnership:function(){return{type:aa}},setOwnershipMultisig:function(e){return{type:ra,value:e}}},da=Object(c.b)(function(e){return Object(N.a)({},e.settings,{client:e.client},{choseConfirmOwnership:e.spend.ownership.chosen,chosePerformSpend:e.spend.transaction.chosen})},ua)(sa),pa=a(826),ma=a(827),ha=a(828),Ea=a(829),ba=a(830),fa=a(831),va=(a(240),a(140)),Pa=a.n(va),ga=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).renderInputs=function(){var e=a.props,t=e.inputs,r=e.network;return t.map(function(e,t){var a="".concat(Pa.a.utxoTxid).concat(e.confirmed?"":" "+Pa.a.unconfirmed),i=e.confirmed?"confirmed":"unconfirmed";return n.a.createElement(pa.a,{hover:!0,key:e.txid},n.a.createElement(ma.a,null,t+1),n.a.createElement(ma.a,{className:a},n.a.createElement(_e,{text:e.txid},n.a.createElement("code",{title:i},e.txid))),n.a.createElement(ma.a,null,n.a.createElement(_e,{text:e.index.toString()})),n.a.createElement(ma.a,null,n.a.createElement(_e,{text:Object(F.satoshisToBitcoins)(e.amountSats).toString()})),n.a.createElement(ma.a,null,f(Object(F.blockExplorerTransactionURL)(e.txid,r),n.a.createElement(Be.a,null))))})},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props,t=e.inputs,a=e.inputsTotalSats;return n.a.createElement(y.a,null,n.a.createElement(I.a,{title:"Available Inputs (".concat(t.length,")")}),n.a.createElement(S.a,null,n.a.createElement("p",null,"The following UTXOs will be spent as inputs in a new transaction."),n.a.createElement(ha.a,null,n.a.createElement(Ea.a,null,n.a.createElement(pa.a,{hover:!0},n.a.createElement(ma.a,null,"Number"),n.a.createElement(ma.a,null,"TXID"),n.a.createElement(ma.a,null,"Index"),n.a.createElement(ma.a,null,"Amount (BTC)"),n.a.createElement(ma.a,null,"View"))),n.a.createElement(ba.a,null,this.renderInputs()),n.a.createElement(fa.a,null,n.a.createElement(pa.a,{hover:!0},n.a.createElement(ma.a,{colSpan:3},"TOTAL:"),n.a.createElement(ma.a,{colSpan:2},Object(F.satoshisToBitcoins)(a).toString()))))))}}]),t}(n.a.Component);var ya=Object(c.b)(function(e){return Object(N.a)({},e.settings,e.spend.transaction)})(ga),Ia=a(243),Sa=a(843),Oa=a(833),Ta=a(832),wa=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(n)))).handleAddressChange=function(e){var t=a.props,r=t.number;(0,t.setAddress)(r,e.target.value)},a.hasAddressError=function(){return""!==a.props.addressError},a.handleAmountChange=function(e){var t=a.props,r=t.number;(0,t.setAmount)(r,e.target.value)},a.hasAmountError=function(){return""!==a.props.amountError},a.isNotBalanceable=function(){var e=a.props,t=e.number,r=e.outputs,n=e.feeError,i=e.amountError,l=e.amount,o=e.inputsTotalSats;if(""!==n)return!0;for(var c=0;c<r.length;c++)if(c!==t-1&&(""!==r[c].amountError||""===r[c].amount))return!0;var s=a.autoBalancedAmount();return""!==Object(F.validateOutputAmountBTC)(s,o)||""===i&&s===new wt.a(l)},a.isBalanceable=function(){return!a.isNotBalanceable()},a.hasBalanceError=function(){return""!==a.props.balanceError},a.autoBalancedAmount=function(){var e=a.props,t=e.number,r=e.fee,n=e.inputsTotalSats,i=e.outputs.filter(function(e,a){return a!==t-1}).map(function(e){return Object(F.bitcoinsToSatoshis)(new wt.a(e.amount))}).reduce(function(e,t){return e.plus(t)},new wt.a(0)),l=Object(F.bitcoinsToSatoshis)(new wt.a(r));return Object(F.satoshisToBitcoins)(n.minus(i.plus(l)))},a.balanceAction=function(){var e=a.props.amount;return!a.hasBalanceError()||a.isNotBalanceable()?null:a.autoBalancedAmount()>new wt.a(e)?"Increase":"Decrease"},a.handleBalance=function(){var e=a.props,t=e.number;(0,e.setAmount)(t,a.autoBalancedAmount().toString())},a.hasError=function(){return a.hasAddressError()||a.hasAmountError()},a.handleDelete=function(){var e=a.props,t=e.number;(0,e.remove)(t)},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props,t=e.outputs,a=e.finalizedOutputs,r=e.address,i=e.amount,l=e.addressError,o=e.amountError;return n.a.createElement(g.a,{container:!0},n.a.createElement(g.a,{item:!0,xs:7},n.a.createElement(Ge.a,{fullWidth:!0,placeholder:"Address",name:"destination",className:Pa.a.outputsFormInput,disabled:a,onChange:this.handleAddressChange,value:r,error:this.hasAddressError(),helperText:l})),n.a.createElement(g.a,{item:!0,xs:3},n.a.createElement(Ge.a,{fullWidth:!0,placeholder:"Amount (BTC)",className:Pa.a.outputsFormInput,name:"amount",disabled:a,onChange:this.handleAmountChange,value:i,error:this.hasAmountError(),helperText:o})),!a&&this.hasBalanceError()&&this.isBalanceable()&&n.a.createElement(g.a,{item:!0,xs:1},n.a.createElement(Sa.a,{title:"".concat(this.balanceAction()," to ").concat(this.autoBalancedAmount().toString()),placement:"top"},n.a.createElement("small",null,n.a.createElement(ae.a,{onClick:this.handleBalance},"Increase"===this.balanceAction()?n.a.createElement(re.a,null):n.a.createElement(ne.a,null))))),!a&&t.length>1&&n.a.createElement(g.a,{item:!0,xs:1},n.a.createElement(Sa.a,{title:"Remove Output",placement:"top"},n.a.createElement(ae.a,{onClick:this.handleDelete},n.a.createElement(Ta.a,null)))))}}]),t}(n.a.Component);var ja={setAddress:function(e,t){return{type:Yt,number:e,value:t}},setAmount:ta,remove:function(e){return{type:Vt,number:e}}},Ca=Object(c.b)(function(e,t){return Object(N.a)({},e.spend.transaction,e.spend.transaction.outputs[t.number-1])},ja)(wa),_a=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).titleRef=n.a.createRef(),a.state={feeRateFetchError:""},a.componentDidMount=function(){a.initialOutputState(),a.scrollToTitle()},a.componentDidUpdate=function(){a.scrollToTitle()},a.scrollToTitle=function(){var e=a.props.signatureImporters;0===Object.keys(e).reduce(function(t,a){return t+e[a].finalized},0)&&a.titleRef.current.scrollIntoView({behavior:"smooth"})},a.renderOutputs=function(){var e=a.props.outputs;return Object(Ia.map)(e).map(function(e,t){return n.a.createElement(g.a,{container:!0,key:t},n.a.createElement(Ca,{number:t+1}))})},a.inputsTotal=function(){var e=a.props.inputsTotalSats;return Object(F.satoshisToBitcoins)(e)},a.outputsAndFeeTotal=function(){var e=a.props,t=e.outputs,r=e.fee;return t.map(function(e){return new wt.a(e.amount||0)}).reduce(function(e,t){return e.plus(t)},new wt.a(0)).plus(new wt.a(r))},a.hasFeeRateFetchError=function(){return""!==a.state.feeRateFetchError},a.hasFeeRateError=function(){return""!==a.props.feeRateError},a.hasFeeError=function(){return""!==a.props.feeError},a.hasBalanceError=function(){return""!==a.props.balanceError},a.hasError=function(){return a.hasFeeRateFetchError()||a.hasFeeRateError()||a.hasFeeError()||a.hasBalanceError()},a.handleAddOutput=function(){(0,a.props.addOutput)()},a.handleFeeRateChange=function(e){(0,a.props.setFeeRate)(e.target.value)},a.handleFeeChange=function(e){(0,a.props.setFee)(e.target.value)},a.handleFinalize=function(){(0,a.props.finalizeOutputs)()},a.handleReset=function(){(0,a.props.resetOutputs)(),a.initialOutputState()},a.getFeeEstimate=Object(nt.a)(rt.a.mark(function e(){var t,r,n,i,l,o;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.client,n=t.network,i=t.setFeeRate,l=1,o="",e.prev=3,e.next=6,Lt(n,r);case 6:l=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0),o="There was an error fetching the fee rate.";case 13:return e.prev=13,i(l.toString()),a.setState({feeRateFetchError:o}),e.finish(13);case 17:case"end":return e.stop()}},e,null,[[3,9,13,17]])})),a.gatherSignaturesDisabled=function(){var e=a.props,t=e.finalizedOutputs,r=e.outputs;if(t||a.hasError())return!0;for(var n=0;n<r.length;n++){var i=r[n];if(""===i.address||""===i.amount||""!==i.addressError||""!==i.amountError)return!0}return!1},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"initialOutputState",value:function(){var e=Object(nt.a)(rt.a.mark(function e(){var t,a,r,n,i,l;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getFeeEstimate();case 2:t=this.props,a=t.inputsTotalSats,r=t.fee,n=t.setOutputAmount,i=Object(F.bitcoinsToSatoshis)(new wt.a(r)),l=Object(F.satoshisToBitcoins)(a.minus(i)),n(1,l.toFixed(8));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.feeRate,a=e.fee,r=e.finalizedOutputs,i=e.feeRateError,l=e.feeError,o=e.balanceError,c=this.state.feeRateFetchError;return n.a.createElement(y.a,null,n.a.createElement(I.a,{ref:this.titleRef,title:"Define Outputs"}),n.a.createElement(S.a,null,n.a.createElement(v.a,null,n.a.createElement(g.a,null,this.renderOutputs()),n.a.createElement(g.a,{item:!0,container:!0,spacing:1},n.a.createElement(g.a,{item:!0,xs:4},n.a.createElement(_.a,{variant:"contained",disabled:r,onClick:this.handleAddOutput},"Add output")),n.a.createElement(g.a,{item:!0,xs:3},n.a.createElement(Ge.a,{fullWidth:!0,label:"Fee Rate (Sats/byte)",value:t,placeholder:"Sats/byte",name:"fee_rate",disabled:r,onChange:this.handleFeeRateChange,error:this.hasFeeRateError(),helperText:c||i,InputProps:{endAdornment:n.a.createElement(It.a,{position:"end"},n.a.createElement(Sa.a,{placement:"top",title:"Estimate best rate"},n.a.createElement("small",null,n.a.createElement(ae.a,{onClick:this.getFeeEstimate,disabled:r},n.a.createElement(Oa.a,null)))))}})),n.a.createElement(g.a,{item:!0,xs:3},n.a.createElement(Ge.a,{fullWidth:!0,label:"Estimated Fees (BTC)",placeholder:"BTC",name:"fee_total",disabled:r,value:a,onChange:this.handleFeeChange,error:this.hasFeeError(),helperText:l})),n.a.createElement(g.a,{item:!0,xs:2})),n.a.createElement(g.a,{item:!0,container:!0,spacing:1},n.a.createElement(g.a,{item:!0,xs:4}),n.a.createElement(g.a,{item:!0,xs:3},n.a.createElement(Ge.a,{fullWidth:!0,label:"Inputs Total",readOnly:!0,defaultValue:this.inputsTotal().toString(),disabled:r,InputProps:{readOnly:!0}})),n.a.createElement(g.a,{item:!0,xs:3},n.a.createElement(Ge.a,{fullWidth:!0,label:"Outputs & Fee Total",value:this.outputsAndFeeTotal().toString(),error:this.hasBalanceError(),disabled:r,helperText:o,InputProps:{readOnly:!0}})),n.a.createElement(g.a,{item:!0,xs:2})),n.a.createElement(g.a,{item:!0},n.a.createElement(g.a,{container:!0,spacing:3},n.a.createElement(g.a,{item:!0},n.a.createElement(_.a,{variant:"contained",color:"primary",disabled:this.gatherSignaturesDisabled(),onClick:this.handleFinalize},"Gather Signatures")),n.a.createElement(g.a,{item:!0},n.a.createElement(_.a,{variant:"contained",color:"secondary",disabled:r,onClick:this.handleReset},"Reset Outputs")))))))}}]),t}(n.a.Component);var Ra={addOutput:function(){return{type:qt}},setOutputAmount:ta,setFeeRate:function(e){return{type:Zt,value:e}},setFee:function(e){return{type:Jt,value:e}},finalizeOutputs:function(){return{type:Qt}},resetOutputs:function(){return{type:$t}}},Ba=Object(c.b)(function(e){return Object(N.a)({},{network:e.settings.network,client:e.client},e.spend.transaction,e.client,{signatureImporters:e.spend.signatureImporters})},Ra)(_a),Ka=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).state={signatureJSON:"",error:""},a.render=function(){var e=a.state,t=e.signatureJSON,r=e.error;return n.a.createElement(v.a,{mt:2},n.a.createElement(Ge.a,{fullWidth:!0,multiline:!0,variant:"outlined",name:"signature",label:"Signature",rows:5,value:t,onChange:a.handleChange,error:a.hasError(),helperText:r}),n.a.createElement(v.a,{mt:2},n.a.createElement(_.a,{variant:"contained",color:"primary",size:"large",onClick:a.finalize,disabled:""===t},"Add Signature")))},a.hasError=function(){return""!==a.state.error},a.setError=function(e){a.setState({error:e})},a.handleChange=function(e){var t=e.target.value,r="";try{JSON.parse(t)}catch(n){r="Invalid JSON."}a.setState({signatureJSON:t,error:r})},a.finalize=function(){var e=a.props.validateAndSetSignature,t=a.state.signatureJSON;e(JSON.parse(t),a.setError)},a}return Object(L.a)(t,e),t}(n.a.Component),xa=a(363),ka=a.n(xa),Aa=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).state={errorMessage:""},a.render=function(){var e=a.props,t=e.width,r=e.string;return n.a.createElement(_e,{text:r,newline:!0},n.a.createElement(ka.a,{size:t,value:r,level:"L"}))},a}return Object(L.a)(t,e),t}(n.a.Component);Aa.defaultProps={string:"",width:120};var Na=Aa,Ma=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(U.a)(this,Object(D.a)(t).call(this,e))).interaction=function(){var e=a.props,t=e.signatureImporter,r=e.network,n=e.inputs,i=e.outputs,l=n.map(function(e){return t.bip32Path});return new De.HermitSignTransaction({network:r,inputs:n,outputs:i,bip32Paths:l})},a.render=function(){var e=a.props,t=e.signatureImporter,r=e.disableChangeMethod,i=e.resetBIP32Path,l=a.state,o=l.bip32PathError,c=l.signatureError,s=l.walletState,u=a.interaction();return s===De.UNSUPPORTED?n.a.createElement(ct,{messages:u.messagesFor({walletState:s}),excludeCodes:["hermit.signature_request","hermit.command"]}):n.a.createElement(v.a,{mt:2},n.a.createElement(g.a,{container:!0},n.a.createElement(g.a,{item:!0,md:10},n.a.createElement(Ge.a,{name:"bip32Path",value:t.bip32Path,onChange:a.handleBIP32PathChange,disabled:s!==De.PENDING,error:a.hasBIP32PathError(),helperText:o})),n.a.createElement(g.a,{item:!0,md:2},!a.bip32PathIsDefault()&&n.a.createElement(_.a,{type:"button",variant:"contained",size:"small",onClick:i,disabled:s!==De.PENDING},"Default"))),n.a.createElement(Y.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),n.a.createElement(v.a,{mt:2},n.a.createElement(g.a,{container:!0,justify:"center"},n.a.createElement(g.a,{item:!0},n.a.createElement(Na,{width:400,string:u.messageFor({code:"hermit.signature_request"}).encodedData}))),n.a.createElement(et,{startText:"Scan Signature QR Code",interaction:u,onStart:r,onSuccess:a.import,onClear:a.clear}),n.a.createElement(ct,{messages:u.messagesFor({walletState:s}),excludeCodes:["hermit.signature_request","hermit.command"]}),n.a.createElement(Y.a,{error:!0},c)))},a.import=function(e){console.log("IMPORTED SIGNATURE:",e);var t=a.props,r=t.validateAndSetSignature,n=t.enableChangeMethod;a.setState({signatureError:""}),n(),r(e,function(e){a.setState({signatureError:e})})},a.clear=function(){var e=a.props,t=e.resetBIP32Path,r=e.enableChangeMethod;t(),a.setState({signatureError:""}),r()},a.hasBIP32PathError=function(){return""!==a.state.bip32PathError},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},function(e){a.setState({bip32PathError:e})})},a.bip32PathIsDefault=function(){var e=a.props,t=e.signatureImporter,r=e.defaultBIP32Path;return t.bip32Path===r},a.state={bip32PathError:"",bip32PathFinalized:!1,signatureError:"",walletState:a.interaction(!0).isSupported()?De.PENDING:De.UNSUPPORTED},a}return Object(L.a)(t,e),t}(n.a.Component),Ua=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(U.a)(this,Object(D.a)(t).call(this,e))).componentDidMount=function(){a.resetBIP32Path()},a.interaction=function(e){var t=!e&&a.state.verified,r=a.props,n=r.signatureImporter,i=r.network,l=r.inputs,o=r.outputs,c=n.method;if(t){var s=l.map(function(e){return n.bip32Path});return Object(De.HardwareWalletSignMultisigTransaction)({network:i,walletType:c,inputs:l,outputs:o,bip32Paths:s})}return Object(De.HardwareWalletExportPublicKey)({network:i,walletType:c,bip32Path:n.bip32Path})},a.render=function(){var e=a.props.signatureImporter,t=a.state,r=t.verified,i=t.walletState,l=a.interaction();return i===De.UNSUPPORTED?n.a.createElement(Y.a,{error:!0},l.messageTextFor({walletState:i})):n.a.createElement(v.a,{mt:2},n.a.createElement(g.a,{container:!0},n.a.createElement(g.a,{item:!0,md:10},n.a.createElement(Ge.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path",type:"text",value:e.bip32Path,onChange:a.handleBIP32PathChange,disabled:i!==De.PENDING||r,error:a.hasBIP32PathError(),helperText:a.bip32PathError()})),n.a.createElement(g.a,{item:!0,md:2},!a.bip32PathIsDefault()&&n.a.createElement(_.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path,disabled:r||i!==De.PENDING},"Default"))),n.a.createElement(Y.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),n.a.createElement(v.a,{mt:2},a.renderAction()),a.renderDeviceConfirmInfo(),n.a.createElement(ct,{messages:l.messagesFor({walletState:i}),excludeCodes:["bip32"]}))},a.renderDeviceConfirmInfo=function(){var e=a.props,t=e.fee,r=e.inputsTotalSats,i=a.state,l=i.verified,o=i.walletState;return l&&o===De.ACTIVE?n.a.createElement(v.a,null,n.a.createElement("p",null,"Your device will ask you to verify the following information:"),n.a.createElement(ha.a,null,n.a.createElement(Ea.a,null,n.a.createElement(pa.a,{hover:!0},n.a.createElement(ma.a,null),n.a.createElement(ma.a,null,"Amount (BTC)"))),n.a.createElement(ba.a,null,a.renderTargets(),n.a.createElement(pa.a,{hover:!0},n.a.createElement(ma.a,null,"Fee"),n.a.createElement(ma.a,null,t)),n.a.createElement(pa.a,{hover:!0},n.a.createElement(ma.a,null,"Total"),n.a.createElement(ma.a,null,Object(F.satoshisToBitcoins)(r).toString()))))):""},a.renderTargets=function(){return a.props.outputs.map(function(e,t){return n.a.createElement(pa.a,{hover:!0,key:t},n.a.createElement(ma.a,null,"Address ",n.a.createElement("code",null,e.address)),n.a.createElement(ma.a,null,e.amount))})},a.renderAction=function(){var e=a.state,t=e.verified,r=e.verifyError,i=e.signatureError,l=e.walletState;return t?n.a.createElement(g.a,{container:!0,alignItems:"center"},n.a.createElement(g.a,{item:!0,md:3},n.a.createElement(_.a,{variant:"contained",size:"large",color:"primary",onClick:a.sign,disabled:l!==De.PENDING},"Sign")),n.a.createElement(g.a,{item:!0,md:9},n.a.createElement(Y.a,{error:!0},i))):n.a.createElement(g.a,{container:!0,alignItems:"center"},n.a.createElement(g.a,{item:!0,md:3},n.a.createElement(_.a,{variant:"contained",size:"large",onClick:a.verify,color:"primary",disabled:l!==De.PENDING||a.hasBIP32PathError()},"Verify")),n.a.createElement(g.a,{item:!0,md:9},n.a.createElement(Y.a,{error:!0},r)))},a.hasBIP32PathError=function(){var e=a.state,t=e.bip32PathError,r=e.walletState;return""!==t||a.interaction().hasMessagesFor({walletState:r,level:De.ERROR,code:"bip32"})},a.bip32PathError=function(){var e=a.state,t=e.bip32PathError,r=e.walletState;return""!==t?t:a.interaction().messageTextFor({walletState:r,level:De.ERROR,code:"bip32"})},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,function(){},a.setBIP32PathError)},a.bip32PathIsDefault=function(){var e=a.props,t=e.signatureImporter,r=e.defaultBIP32Path;return t.bip32Path===r},a.resetBIP32Path=function(){var e=a.props.resetBIP32Path;a.setBIP32PathError(""),e()},a.verify=Object(nt.a)(rt.a.mark(function e(){var t,r,n,i;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.disableChangeMethod,n=t.enableChangeMethod,r(),a.setState({verifyError:"",walletState:De.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:i=e.sent,a.verifyPublicKey(i),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({verifyError:e.t0.message,walletState:De.PENDING}),n();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),a.verifyPublicKey=function(e){for(var t=a.props,r=t.inputs,i=t.signatureImporters,l=t.enableChangeMethod,o="",c=0;c<r.length;c++){var s=r[c];if(Object(F.multisigPublicKeys)(s.multisig).indexOf(e)<0){o=n.a.createElement("span",null,n.a.createElement(lt.a,null),"\xa0 This device does not contain the correct key.  Are you sure the BIP32 path is correct?");break}for(var u=1;u<Object(F.multisigRequiredSigners)(s.multisig);u++){for(var d=i[u],p=0;p<d.publicKeys.length;p++){if(d.publicKeys[p]===e){o=n.a.createElement("span",null,n.a.createElement(lt.a,null),"A signature from this key was already imported.");break}}if(""!==o)break}if(""!==o)break}a.setState({verified:""===o,verifyError:o,walletState:De.PENDING}),l()},a.sign=Object(nt.a)(rt.a.mark(function e(){var t,r,n,i,l;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.disableChangeMethod,n=t.validateAndSetSignature,i=t.enableChangeMethod,r(),a.setState({signatureError:"",walletState:De.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:l=e.sent,n(l,function(e){var t={signatureError:e};""!==e&&(t.walletState=De.PENDING),a.setState(t)}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({signatureError:e.t0.message,walletState:De.PENDING});case 14:i();case 15:case"end":return e.stop()}},e,null,[[3,10]])})),a.state={verified:!1,verifyError:"",signatureError:"",bip32PathError:"",walletState:a.interaction(!0).isSupported()?De.PENDING:De.UNSUPPORTED},a}return Object(L.a)(t,e),t}(n.a.Component),Da=he({setSignatureImporterName:"SET_SIGNATURE_IMPORTER_NAME",setSignatureImporterMethod:"SET_SIGNATURE_IMPORTER_METHOD",setSignatureImporterBIP32Path:"SET_SIGNATURE_IMPORTER_BIP32_PATH",setSignatureImporterPublicKeys:"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS",setSignatureImporterSignature:"SET_SIGNATURE_IMPORTER_SIGNATURE",setSignatureImporterFinalized:"SET_SIGNATURE_IMPORTER_FINALIZED",setSignatureImporterComplete:"SET_SIGNATURE_IMPORTER_COMPLETE"}),La=Da.setSignatureImporterName,za=Da.setSignatureImporterMethod,Fa=Da.setSignatureImporterBIP32Path,Ha=Da.setSignatureImporterPublicKeys,Wa=Da.setSignatureImporterSignature,Ga=Da.setSignatureImporterFinalized,qa=Da.setSignatureImporterComplete,Ya="text",Xa=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).titleRef=n.a.createRef(),a.state={disableChangeMethod:!1,showUnsignedTransaction:!1},a.componentDidMount=function(){a.resetBIP32Path(),a.scrollToTitle()},a.componentDidUpdate=function(){a.scrollToTitle()},a.scrollToTitle=function(){a.props.number===a.getCurrent()&&a.titleRef.current.scrollIntoView({behavior:"smooth"})},a.title=function(){var e=a.props,t=e.number,r=e.signatureImporter,i=e.setName;return n.a.createElement(mt,{number:t,name:r.name,setName:i})},a.renderImport=function(){var e=a.props,t=e.signatureImporter,r=e.number,i=r>a.getCurrent(),l=a.state.disableChangeMethod,o="signature-".concat(r,"-importer-select-label");return i?n.a.createElement("p",null,"Once you have imported the signature above, you will be able to import another signature here."):n.a.createElement("form",null,n.a.createElement(H.a,{fullWidth:!0},n.a.createElement(Le.a,{id:o},"Select Method"),n.a.createElement(ze.a,{labelId:o,id:"signature-".concat(r,"-importer-select"),disabled:l,value:t.method,onChange:a.handleMethodChange},n.a.createElement(Fe.a,{value:""},"< Select method >"),n.a.createElement(Fe.a,{value:De.TREZOR},"Trezor"),n.a.createElement(Fe.a,{value:De.LEDGER},"Ledger"),n.a.createElement(Fe.a,{value:De.HERMIT},"Hermit"),n.a.createElement(Fe.a,{value:Ya},"Enter as text"))),a.renderImportByMethod())},a.renderImportByMethod=function(){var e=a.props,t=e.network,r=e.signatureImporter,i=e.signatureImporters,l=e.inputs,o=e.inputsTotalSats,c=e.outputs,s=e.fee;return r.method===Ya?n.a.createElement(Ka,{signatureImporter:r,validateAndSetSignature:a.validateAndSetSignature}):r.method===De.HERMIT?n.a.createElement(Ma,{network:t,signatureImporter:r,inputs:l,outputs:c,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,defaultBIP32Path:a.defaultBIP32Path(),validateAndSetSignature:a.validateAndSetSignature,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod}):r.method===De.TREZOR||r.method===De.LEDGER?n.a.createElement(Ua,{network:t,signatureImporter:r,signatureImporters:i,inputs:l,outputs:c,inputsTotalSats:o,fee:s,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,defaultBIP32Path:a.defaultBIP32Path(),validateAndSetSignature:a.validateAndSetSignature,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod}):null},a.handleMethodChange=function(e){var t=a.props,r=t.number;(0,t.setMethod)(r,e.target.value),a.reset()},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.renderUnsignedTransaction=function(){var e=a.state.showUnsignedTransaction,t=a.props.unsignedTransaction;if(e){var r=t.toHex();return n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement(_e,{text:r},n.a.createElement("code",null,r))),n.a.createElement("small",null,n.a.createElement(_.a,{size:"small",onClick:a.handleHideUnsignedTransaction},"Hide Unsigned Transaction")))}return n.a.createElement("small",null,n.a.createElement(_.a,{size:"small",onClick:a.handleShowUnsignedTransaction},"Show Unsigned Transaction"))},a.handleShowUnsignedTransaction=function(){a.setState({showUnsignedTransaction:!0})},a.handleHideUnsignedTransaction=function(){a.setState({showUnsignedTransaction:!1})},a.reset=function(){var e=a.props,t=e.number,r=e.setSignature,n=e.setPublicKeys,i=e.setFinalized;r(t,""),n(t,[]),i(t,!1)},a.defaultBIP32Path=function(){var e=a.props,t=e.addressType,r=e.network;return Object(F.multisigBIP32Path)(t,r)},a.resetBIP32Path=function(){var e=a.props,t=e.number;(0,e.setBIP32Path)(t,a.defaultBIP32Path())},a.validateAndSetBIP32Path=function(e,t,r,n){var i=a.props,l=i.number,o=i.setBIP32Path,c=Object(F.validateBIP32Path)(e,n);o(l,e),c?r(c):(r(""),t())},a.renderSignature=function(){var e=a.props,t=e.signatureImporter,r=e.txid,i=JSON.stringify(t.signature);return n.a.createElement("div",null,n.a.createElement("p",null,"The following signature was imported:"),n.a.createElement(v.a,null,n.a.createElement(_e,{text:i},n.a.createElement("small",null,n.a.createElement("code",null,i)))),n.a.createElement(v.a,{mt:2},n.a.createElement(_.a,{variant:"contained",color:"secondary",disabled:""!==r,size:"small",onClick:a.reset},"Remove Signature")))},a.validateAndSetSignature=function(e,t){var r=a.props,n=r.number,i=r.inputs,l=r.signatureImporters,o=r.unsignedTransaction,c=r.setComplete;if(Array.isArray(e))if(e.length<i.length)t("Not enough signatures (must be exactly one for each input).");else if(e.length>i.length)t("Too many signatures (must be exactly one for each input).");else{for(var s=[],u=Object.values(l).filter(function(e){return e.finalized}),d=0;d<e.length;d+=1){var p=i[d],m=d+1,h=e[d];if(""!==Object(F.validateHex)(h))return void t("Signature for input ".concat(m," is not valid hex."));var E=void 0;try{E=Object(F.validateMultisigSignature)(o,d,p,h)}catch(v){return void t("Signature for input ".concat(m," is invalid."))}if(!E)return void t("Signature for input ".concat(m," is invalid."));for(var b=0;b<u.length;b++){var f=u[b];if(f.signature[d]===h||f.publicKeys[d]===E)return void t("Signature for input ".concat(m," is a duplicate of a previously provided signature."))}s.push(E)}c(n,{signature:e,publicKeys:s,finalized:!0})}else t("Signature is not an array of strings.")},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.signatureImporter;return n.a.createElement(y.a,null,n.a.createElement(I.a,{title:this.title(),ref:this.titleRef}),n.a.createElement(S.a,null,e.finalized?this.renderSignature():this.renderImport(),n.a.createElement(v.a,{mt:2},this.renderUnsignedTransaction())))}},{key:"getCurrent",value:function(){var e=this.props.signatureImporters;return Object.keys(e).reduce(function(t,a){return t+(e[a].finalized?1:0)},1)}}]),t}(n.a.Component);var Va={setName:La,setMethod:za,setBIP32Path:Fa,setPublicKeys:Ha,setSignature:Wa,setFinalized:Ga,setComplete:qa},Za=Object(c.b)(function(e,t){return Object(N.a)({},{signatureImporters:e.spend.signatureImporters,signatureImporter:e.spend.signatureImporters[t.number],fee:e.spend.transaction.fee,txid:e.spend.transaction.txid},e.spend.transaction)},Va)(Xa),Ja=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(n)))).state={error:"",broadcasting:!1,txid:""},a.buildSignedTransaction=function(){var e=a.props,t=e.unsignedTransaction,r=e.inputs,n=e.signatureImporters,i=[];return r.forEach(function(e,t){var a={};Object.values(n).forEach(function(e){var r=e.publicKeys[t],n=e.signature[t];a[r]=n}),i.push(a)}),Object(F.signedMultisigTransaction)(t,r,i)},a.handleBroadcast=Object(nt.a)(rt.a.mark(function e(){var t,r,n,i,l,o,c;return rt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.client,n=t.network,i=t.setTxid,l=a.buildSignedTransaction(),o="",c="",a.setState({broadcasting:!0}),e.prev=5,e.next=8,zt(l.toHex(),n,r);case 8:c=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),console.error(e.t0),o="There was an error broadcasting the transaction.: ".concat(e.t0);case 15:return e.prev=15,a.setState({txid:c,error:o,broadcasting:!1}),i(c),e.finish(15);case 19:case"end":return e.stop()}},e,null,[[5,11,15,19]])})),a.transactionURL=function(){var e=a.props.network,t=a.state.txid;return Object(F.blockExplorerTransactionURL)(t,e)},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.broadcasting,r=e.txid,i=this.buildSignedTransaction(),l=i.toHex();return n.a.createElement(y.a,null,n.a.createElement(I.a,{title:"Broadcast"}),n.a.createElement(S.a,null,n.a.createElement("form",null,i&&n.a.createElement(v.a,{mt:4},n.a.createElement(P.a,{variant:"h6"},"Signed Transaction"),n.a.createElement(_e,{text:l},n.a.createElement("small",null,n.a.createElement("code",null,l)))),""===r?n.a.createElement(v.a,{mt:2},n.a.createElement(_.a,{variant:"contained",color:"primary",disabled:!i||a,onClick:this.handleBroadcast},"Broadcast Transaction"),n.a.createElement(Y.a,{error:!0},t),n.a.createElement("small",null,n.a.createElement(Y.a,null,"Warning: Broadcasting this transaction cannot be undone."))):n.a.createElement(v.a,{mt:2},n.a.createElement(P.a,{variant:"h5"},n.a.createElement(_e,{text:r},n.a.createElement("code",null,r)),"\xa0",f(this.transactionURL(),n.a.createElement(Be.a,null))),n.a.createElement("p",null,"Transaction successfully broadcast.")))))}}]),t}(n.a.Component);var Qa={setTxid:function(e){return{type:ea,value:e}}},$a=Object(c.b)(function(e){return Object(N.a)({network:e.settings.network,client:e.client},e.client,{signatureImporters:e.spend.signatureImporters,inputs:e.spend.transaction.inputs,unsignedTransaction:e.spend.transaction.unsignedTransaction})},Qa)(Ja),er=a(364),tr=a.n(er),ar=a(365),rr=a.n(ar),nr=a(369),ir=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).titleRef=n.a.createRef(),a.state={disableChangeMethod:!1},a.componentDidMount=function(){a.resetBIP32Path(),a.scrollToTitle()},a.componentDidUpdate=function(){a.scrollToTitle()},a.scrollToTitle=function(){a.titleRef.current.scrollIntoView({behavior:"smooth"})},a.renderImportByMethod=function(){var e=a.props,t=e.network,r=e.publicKeyImporter,i=e.defaultBIP32Path;return r.method===De.HERMIT?n.a.createElement(tt,{publicKeyImporter:r,validateAndSetBIP32Path:a.validateAndSetBIP32Path,validateAndSetPublicKey:a.validateAndSetPublicKey,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,reset:a.reset}):r.method===De.TREZOR||r.method===De.LEDGER?n.a.createElement(st,{network:t,publicKeyImporter:r,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,defaultBIP32Path:i,validateAndSetPublicKey:a.validateAndSetPublicKey,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod}):null},a.handleMethodChange=function(e){(0,a.props.setMethod)(e.target.value),a.reset()},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.reset=function(){(0,a.props.reset)()},a.resetBIP32Path=function(){(0,a.props.resetBIP32Path)()},a.validateAndSetBIP32Path=function(e,t,r,n){var i=a.props.setBIP32Path,l=Object(F.validateBIP32Path)(e,n);i(e),l?r(l):(r(""),t())},a.validateAndSetPublicKey=function(e,t,r){var n=a.props.setPublicKey,i=Object(F.validatePublicKey)(e);n(e),i?t&&t(i):(t&&t(""),r&&r())},a.renderConfirmation=function(){var e=a.props,t=e.publicKeys,r=e.publicKeyImporter;if(""===r.publicKey)return null;if(t.includes(r.publicKey)){var i=Object(nr.a)(w.a)({color:"green"});return n.a.createElement(O.a,null,n.a.createElement(T.a,null,n.a.createElement(i,null,n.a.createElement(tr.a,null)),n.a.createElement(j.a,null,"The public key exported at BIP32 path ",n.a.createElement("code",null,r.bip32Path)," is present in the provided redeem script.")))}return n.a.createElement(O.a,null,n.a.createElement(T.a,null,n.a.createElement(w.a,null,n.a.createElement(P.a,{color:"error"},n.a.createElement(rr.a,null))),n.a.createElement(j.a,null,"The public key exported at BIP32 path ",n.a.createElement("code",null,r.bip32Path)," is not present in the provided redeem script.")))},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.publicKeyImporter,t=this.state.disableChangeMethod;return n.a.createElement(y.a,null,n.a.createElement(I.a,{ref:this.titleRef,title:"Confirm Ownership"}),n.a.createElement(S.a,null,n.a.createElement("form",null,n.a.createElement("p",null,"How will you confirm your ownership of this address?"),n.a.createElement(H.a,{fullWidth:!0},n.a.createElement(Le.a,{id:"public-key-importer-select-label"},"Select Method"),n.a.createElement(ze.a,{labelId:!0,id:"public-key-importer-select",disabled:t,value:e.method,onChange:this.handleMethodChange},n.a.createElement(Fe.a,{value:""},"< Select method >"),n.a.createElement(Fe.a,{value:De.TREZOR},"Trezor"),n.a.createElement(Fe.a,{value:De.LEDGER},"Ledger"),n.a.createElement(Fe.a,{value:De.HERMIT},"Hermit"))),this.renderImportByMethod(),this.renderConfirmation(),""!==e.method&&n.a.createElement(_.a,{variant:"contained",size:"small",color:"secondary",role:"button",onClick:this.reset},"Start Again"))))}}]),t}(n.a.Component);var lr={setMethod:function(e){return{type:oa,value:e}},setBIP32Path:function(e){return{type:la,value:e}},setPublicKey:function(e){return{type:ca,value:e}},resetBIP32Path:function(){return{type:ia}},reset:function(){return{type:na}}},or=Object(c.b)(function(e,t){return e.spend.ownership},lr)(ir),cr=function(e){function t(){var e,a;Object(M.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).render=function(){return n.a.createElement(v.a,{mt:2},n.a.createElement(g.a,{container:!0,spacing:3},n.a.createElement(g.a,{item:!0,md:8},n.a.createElement(v.a,null,n.a.createElement(da,null)),a.renderBody()),n.a.createElement(g.a,{item:!0,md:4},n.a.createElement(v.a,null,n.a.createElement(de,null)),n.a.createElement(v.a,{mt:2},n.a.createElement(te,null)),n.a.createElement(v.a,{mt:2},n.a.createElement(Ot,null)))))},a.renderBody=function(){var e=a.props,t=e.transaction;return e.ownership.chosen?n.a.createElement(v.a,{mt:2},n.a.createElement(or,null)):n.a.createElement(v.a,null,a.spendable()&&n.a.createElement(v.a,null,n.a.createElement(v.a,{mt:2},n.a.createElement(ya,null)),n.a.createElement(v.a,{mt:2},n.a.createElement(Ba,null))),t.finalizedOutputs&&n.a.createElement(v.a,null,a.renderSignatureImporters()),a.signaturesFinalized()&&n.a.createElement(v.a,{mt:2},n.a.createElement($a,null)))},a.renderSignatureImporters=function(){for(var e=a.props.transaction,t=[],r=1;r<=e.requiredSigners;r++)t.push(n.a.createElement(v.a,{key:r,mt:2},n.a.createElement(Za,{number:r})));return t},a.spendable=function(){return a.props.transaction.inputs.length>0},a.signaturesFinalized=function(){var e=a.props.signatureImporters;return Object.values(e).length>0&&Object.values(e).every(function(e){return e.finalized})},a.confirmOwnership=function(e){a.setState({addressFinalized:!0,confirmOwnership:e})},a}return Object(L.a)(t,e),t}(n.a.Component);var sr=Object(c.b)(function(e){return e.spend})(cr),ur=a(366),dr=a(834),pr=a(835),mr=Object(ur.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}),hr=function(){var e=mr();return n.a.createElement("div",{className:e.root},n.a.createElement(dr.a,{position:"static"},n.a.createElement(pr.a,null,n.a.createElement(P.a,{variant:"h6",className:e.title},"Caravan"),n.a.createElement(_.a,{color:"inherit",href:"#/address",target:"_blank"},"Create"),n.a.createElement(_.a,{color:"inherit",href:"#/spend",target:"_blank"},"Interact"),n.a.createElement(_.a,{color:"inherit",href:"#/",target:"_blank"},"Help"))))},Er=a(367),br=a(748),fr=function(){return n.a.createElement(v.a,{mt:2},n.a.createElement("hr",null),n.a.createElement(g.a,{container:!0,alignItems:"center"},n.a.createElement(g.a,{item:!0,sm:2},f("https://www.unchained-capital.com",n.a.createElement("img",{src:br,className:"logo",alt:"Unchained Capital logo",height:"32"}))),n.a.createElement(g.a,{item:!0,sm:6},n.a.createElement("p",null,"Copyright 2019 by Unchained Capital and released under an MIT license.")),n.a.createElement(g.a,{item:!0,sm:1},n.a.createElement("p",null," v",Er.a," "))))},vr=a(836),Pr=a(837),gr=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(U.a)(this,Object(D.a)(t).call(this,e))).state={error:null,errorInfo:null},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({errorInfo:t,error:e})}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.errorInfo;return a?n.a.createElement(v.a,{m:4},n.a.createElement(v.a,{m:2},n.a.createElement(P.a,{variant:"h3",component:"h1"},"Something went wrong.")),n.a.createElement(v.a,{m:2},n.a.createElement(P.a,{variant:"body1"},"Let us know what happened on ",n.a.createElement("a",{href:"https://github.com/unchained-capital/caravan/issues",target:"_blank"},"github"),".")),n.a.createElement(v.a,{mx:2,my:3},n.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},t&&t.toString(),n.a.createElement("br",null),a.componentStack))):this.props.children}}]),t}(n.a.Component),yr=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(vr.a,null),n.a.createElement(Pr.a,{maxWidth:"lg"},n.a.createElement(hr,null),n.a.createElement(gr,null,n.a.createElement(h.a,null,n.a.createElement(E.a,null,n.a.createElement(b.a,{path:"/address",component:gt}),n.a.createElement(b.a,{path:"/spend",component:sr}),n.a.createElement(b.a,{path:"/",component:A})))),n.a.createElement(fr,null)))},Ir=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Sr(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function Or(e,t){return Object(N.a)({},e,t)}var Tr={network:F.MAINNET,totalSigners:3,requiredSigners:2,addressType:F.P2SH,frozen:!1},wr={type:"public",url:"",username:"",password:"",url_error:"",username_error:"",password_error:"",status:"unknown"},jr={present:!0,bip32Path:"",publicKeys:[],multisig:{},address:"",balanceSats:new wt.a(0),utxos:[],change:!1,spend:!1,fetchedUTXOs:!1,fetchUTXOsError:""},Cr={nodes:{},trailingEmptyNodes:0,fetchUTXOsErrors:0,balanceSats:new wt.a(0)};var _r=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cr,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case e:return function(e,t){var a=Object(N.a)({},jr,e.nodes[t.value.bip32Path]||{},t.value),r={};r[a.bip32Path]=a;var n=Object(N.a)({},e,{nodes:Object(N.a)({},e.nodes,r),balanceSats:e.balanceSats.plus(a.balanceSats)}),i=0,l=0,o=Object.keys(n.nodes);o.sort(function(e,t){var a=(e||"").split("/"),r=(t||"").split("/");return parseInt(a[2])-parseInt(r[2])});for(var c=0;c<o.length;c++){var s=o[o.length-(c+1)],u=n.nodes[s];u.fetchedUTXOs&&a.balanceSats.isEqualTo(0)&&i++,""!==u.fetchUTXOsError&&l++}return n.trailingEmptyNodes=i,n.fetchUTXOsErrors=l,n}(t,a);default:return t}}},Rr=he({setExtendedPublicKeyImporterName:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME",resetExtendedPublicKeyImporterBIP32Path:"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterBIP32Path:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterMethod:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD",setExtendedPublicKeyImporterExtendedPublicKey:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY",setExtendedPublicKeyImporterFinalized:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED"});Rr.setExtendedPublicKeyImporterName,Rr.setExtendedPublicKeyImporterBIP32Path,Rr.resetExtendedPublicKeyImporterBIP32Path,Rr.setExtendedPublicKeyImporterMethod,Rr.setExtendedPublicKeyImporterExtendedPublicKey,Rr.setExtendedPublicKeyImporterFinalized;function Br(e){var t=(new Date).getTime().toString(),a=Object.values(e.extendedPublicKeyImporters).map(function(e){return e.extendedPublicKey}).join("");return"".concat(t,"-").concat(a)}var Kr={name:"",bip32Path:Object(F.multisigBIP32Root)(F.P2SH,F.MAINNET),bip32PathModified:!1,method:"",extendedPublicKey:"",finalized:!1},xr={extendedPublicKeyImporters:{1:Object(N.a)({},Kr,{name:"Extended Public Key 1"}),2:Object(N.a)({},Kr,{name:"Extended Public Key 2"}),3:Object(N.a)({},Kr,{name:"Extended Public Key 3"})},defaultBIP32Path:Object(F.multisigBIP32Root)(F.P2SH,F.MAINNET),network:F.MAINNET,addressType:F.P2SH,fingerprint:""};function kr(e,t,a){var r={};r[a]=t.value;var n=Object(N.a)({},e,{nodes:{}});return n.extendedPublicKeyImporters[t.number]=Or(e.extendedPublicKeyImporters[t.number],r),Or(n,{fingerprint:Br(n)})}var Ar="text";function Nr(e){var t=(new Date).getTime().toString(),a=Object.values(e.publicKeyImporters).map(function(e){return e.publicKey}).join("");return"".concat(t,"-").concat(a)}var Mr={name:"",bip32Path:Object(F.multisigBIP32Path)(F.P2SH,F.MAINNET),bip32PathModified:!1,method:"",publicKey:"",finalized:!1,conflict:!1},Ur={publicKeyImporters:{1:Object(N.a)({},Mr,{name:"Public Key 1"}),2:Object(N.a)({},Mr,{name:"Public Key 2"}),3:Object(N.a)({},Mr,{name:"Public Key 3"})},defaultBIP32Path:Object(F.multisigBIP32Path)(F.P2SH,F.MAINNET),network:F.MAINNET,addressType:F.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:""};function Dr(e,t,a){var r={};r[a]=t.value;var n=Object(N.a)({},e);return n.publicKeyImporters[t.number]=Or(e.publicKeyImporters[t.number],r),Lr(n.publicKeyImporters[t.number],e),Or(n,{fingerprint:Nr(n)})}function Lr(e,t){t.finalizedNetwork&&(e.conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType)}function zr(e,t,a){for(var r=1;r<=Object.values(e.publicKeyImporters).length;r++){var n=t.publicKeyImporters[r];n.bip32PathModified||n.finalized||(n.bip32Path=a),Lr(n,t)}}var Fr={chosen:!1,publicKeyImporter:Object(N.a)({},{bip32Path:"",method:"",publicKey:""}),network:F.MAINNET,addressType:F.P2SH,publicKeys:[],address:"",defaultBIP32Path:Object(F.multisigBIP32Path)(F.P2SH,F.MAINNET)};function Hr(e,t,a){var r={};return r[a]=t.value,Object(N.a)({},e,{publicKeyImporter:Object(N.a)({},e.publicKeyImporter,r)})}var Wr={name:"",method:"",publicKeys:[],signature:[],bip32Path:"",finalized:!1},Gr={};function qr(e,t,a){var r={};r[a]=t.value;var n=Object(N.a)({},e);return n[t.number]=Or(e[t.number],r),n}var Yr=a(245);function Xr(e,t){var a=e.txid.toLowerCase(),r=t.txid.toLowerCase();return a<r?-1:a>r?1:e.n<t.n?-1:e.n>t.n?1:0}var Vr={address:"",amount:"",amountSats:"",addressError:"",amountError:""},Zr=[Object(N.a)({},Vr)],Jr={chosen:!1,network:F.MAINNET,inputs:[],inputsTotalSats:new wt.a(0),outputs:[].concat(Zr),feeRate:"",feeRateError:"",fee:"",feeError:"",finalizedOutputs:!1,txid:"",balanceError:"",addressType:F.P2SH,requiredSigners:2,totalSigners:3,unsignedTransaction:{}};function Qr(e){if(e.outputs.find(function(e){return""!==e.addressError||""!==e.amountError})||""!==e.feeError||""!==e.feeRateError)return Object(N.a)({},e,{balanceError:""});var t=Object(F.bitcoinsToSatoshis)(new wt.a(e.fee)),a=e.outputs.map(function(e){return Object(F.bitcoinsToSatoshis)(new wt.a(e.amount||0))}).reduce(function(e,t){return e.plus(t)},new wt.a(0));if(e.inputsTotalSats.isEqualTo(a.plus(t)))return Object(N.a)({},e,{balanceError:""});var r,n=a.plus(t).minus(e.inputsTotalSats);if(n.isNaN())r="Cannot calculate total.";else{var i=n.isLessThan(0)?"Increase":"Decrease";r="".concat(i," by ").concat(Object(F.satoshisToBitcoins)(n.absoluteValue()).toFixed(8),".")}return Object(N.a)({},e,{balanceError:r})}function $r(e,t,a){return Object(F.satoshisToBitcoins)(Object(F.estimateMultisigTransactionFee)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:a,m:e.requiredSigners,n:e.totalSigners,feesPerByteInSatoshis:t})).toString()}var en="UPDATE_DEPOSIT_NODE",tn="UPDATE_CHANGE_NODE";var an=Object(o.c)({ownership:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case aa:return Or(e,{chosen:!0});case X:return Or(e,{network:t.value});case ra:return function(e,t){var a=t.value,r=Object(F.multisigAddressType)(a),n=Object(F.multisigBIP32Path)(r,e.network);return Object(N.a)({},e,{network:e.network,addressType:r,publicKeys:Object(F.multisigPublicKeys)(a),address:a.address,defaultBIP32Path:n})}(e,t);case la:var a=Hr(e,{value:""},"publicKey");return Hr(a,t,"bip32Path");case oa:return Hr(e,t,"method");case ca:return Hr(e,t,"publicKey");case ia:return Hr(e,{value:e.defaultBIP32Path},"bip32Path");case na:return Object(N.a)({},e,{publicKeyImporter:Object(N.a)({},e.publicKeyImporter,{bip32Path:e.defaultBIP32Path,publicKey:""})});default:return e}},transaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ft:return Or(e,{chosen:!0});case X:return Or(e,{network:t.value});case J:return Or(e,{addressType:t.value});case Ht:return Or(e,{requiredSigners:t.value});case Wt:return Or(e,{totalSigners:t.value});case Gt:return function(e,t){var a=t.value.map(function(e){return e.amountSats}).reduce(function(e,t){return e.plus(t)},new wt.a(0));return Or(e,{inputs:t.value.sort(Xr),inputsTotalSats:a})}(e,t);case qt:return Qr(function(e,t){var a=e.outputs.concat(Object(N.a)({},Vr));return Object(N.a)({},e,{outputs:a,fee:$r(e,e.feeRate,a.length)})}(e));case Yt:return Qr(function(e,t){var a=Object(Yr.a)(e.outputs),r=t.value,n=Object(F.validateAddress)(r,e.network);if(""===n)for(var i=0;i<e.inputs.length;i++)if(r===e.inputs[i].address){n="Output address cannot equal input address.";break}if(""===n)for(var l=0;l<e.outputs.length;l++)if(l!==t.number-1&&e.outputs[l].address===r){n="Duplicate output address.";break}return a[t.number-1].address=r,a[t.number-1].addressError=n,Object(N.a)({},e,{outputs:a})}(e,t));case Xt:return Qr(function(e,t){var a=Object(Yr.a)(e.outputs),r=t.value,n=Object(F.validateOutputAmountBTC)(r,e.inputsTotalSats);return a[t.number-1].amount=r,a[t.number-1].amountError=n,a[t.number-1].amountSats=n?"":Object(F.bitcoinsToSatoshis)(new wt.a(t.value)),Object(N.a)({},e,{outputs:a})}(e,t));case Vt:return Qr(function(e,t){for(var a=[],r=0;r<e.outputs.length;r++)r!==t.number-1&&a.push(e.outputs[r]);return Object(N.a)({},e,{outputs:a,fee:$r(e,e.feeRate,a.length)})}(e,t));case Zt:return Qr(function(e,t){var a=t.value,r=Object(F.validateFeeRate)(a);return Or(e,{feeRate:a,feeRateError:r,fee:""===r?$r(e,a,e.outputs.length):"",feeError:""})}(e,t));case Jt:return Qr(function(e,t){var a=t.value,r=Object(F.validateFeeBTC)(a,e.inputsTotalSats);return Or(e,{fee:a,feeError:r,feeRate:""===r?Object(F.estimateMultisigTransactionFeeRate)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:e.outputs.length,m:e.requiredSigners,n:e.totalSigners,feesInSatoshis:Object(F.bitcoinsToSatoshis)(new wt.a(a))}).toString():"",feeRateError:""})}(e,t));case Qt:return function(e){var t=Object(F.unsignedMultisigTransaction)(e.network,e.inputs,e.outputs);return Object(N.a)({},e,{finalizedOutputs:!0,unsignedTransaction:t})}(e);case $t:return Or(e,{outputs:Zr,fee:"",balanceError:""});case ea:return Or(e,{txid:t.value});default:return e}},signatureImporters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_SIGNATURES":return Object(N.a)({},Gr);case Ht:return function(e,t){for(var a={},r=1;r<=t.value;r++)a[r]=Object(N.a)({},Wr,{name:"Signature ".concat(r)});return Object(N.a)({},e,a)}(e,t);case"SET_SIGNATURE_IMPORTER_NAME":return qr(e,t,"name");case"SET_SIGNATURE_IMPORTER_METHOD":return qr(e,t,"method");case"SET_SIGNATURE_IMPORTER_BIP32_PATH":return qr(e,t,"bip32Path");case"SET_SIGNATURE_IMPORTER_SIGNATURE":return qr(e,t,"signature");case"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS":return qr(e,t,"publicKeys");case"SET_SIGNATURE_IMPORTER_FINALIZED":return qr(e,t,"finalized");case"SET_SIGNATURE_IMPORTER_COMPLETE":return function(e,t){var a=Object(N.a)({},e);return a[t.number]=Or(e[t.number],t.value),a}(e,t);default:return e}}}),rn=Object(o.c)({deposits:_r(en),change:_r(tn)}),nn=Object(o.c)({settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Or(e,{network:t.value});case V:return Or(e,{totalSigners:t.value});case Z:return Or(e,{requiredSigners:t.value});case J:return Or(e,{addressType:t.value});case Q:return Or(e,{frozen:t.value});default:return e}},client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CLIENT_TYPE":return Or(e,{type:t.value});case"SET_CLIENT_URL":return Or(e,{url:t.value});case"SET_CLIENT_USERNAME":return Or(e,{username:t.value});case"SET_CLIENT_PASSWORD":return Or(e,{password:t.value});case"SET_CLIENT_URL_ERROR":return Or(e,{url_error:t.value});case"SET_CLIENT_USERNAME_ERROR":return Or(e,{username_error:t.value});case"SET_CLIENT_PASSWORD_ERROR":return Or(e,{password_error:t.value});case"SET_CLIENT_STATUS":return Or(e,{status:t.value});default:return e}},address:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ur,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return function(e,t){var a=t.value,r=e.addressType,n=Object(F.multisigBIP32Path)(r,a),i=Object(N.a)({},e,{network:a,defaultBIP32Path:n});return zr(e,i,n),i}(e,t);case J:return function(e,t){var a=e.network,r=t.value,n=Object(F.multisigBIP32Path)(r,a),i=Object(N.a)({},e,{addressType:r,defaultBIP32Path:n});return zr(e,i,n),i}(e,t);case V:return function(e,t){for(var a=t.value,r={},n=1;n<=a;n++)r[n]=e.publicKeyImporters[n]||Object(N.a)({},Mr,{name:"Public Key ".concat(n)});var i=Object(N.a)({},e,{publicKeyImporters:r,stub:t.type});return Or(i,{fingerprint:Nr(i)})}(e,t);case"SET_PUBLIC_KEY_IMPORTER_NAME":return Dr(e,t,"name");case"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Dr(Dr(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Dr(Dr(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_METHOD":return Dr(e,t,"method");case"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY":return Dr(e,t,"publicKey");case"SET_PUBLIC_KEY_IMPORTER_FINALIZED":return Dr(function(e,t){var a=Object(N.a)({},e);return!0===t.value&&""===e.finalizedNetwork&&a.publicKeyImporters[t.number].method!==Ar?(a.finalizedNetwork=e.network,a.finalizedAddressType=e.addressType):!1===t.value&&""!==e.finalizedNetwork&&1===Object.values(e.publicKeyImporters).reduce(function(e,t){return!0===t.finalized&&t.method!==Ar?e+1:e},0)&&(a.finalizedNetwork="",a.finalizedAddressType="",Object.values(a.publicKeyImporters).forEach(function(e){return e.conflict=!1})),a}(e,t),t,"finalized");case"MOVE_PUBLIC_KEY_IMPORTER_UP":return function(e,t){if(1===t.number)return e;var a=Object(N.a)({},e),r=e.publicKeyImporters[t.number-1],n=e.publicKeyImporters[t.number];return a.publicKeyImporters[t.number-1]=n,a.publicKeyImporters[t.number]=r,Or(a,{fingerprint:Nr(a)})}(e,t);case"MOVE_PUBLIC_KEY_IMPORTER_DOWN":return function(e,t){if(t.number===Object.values(e.publicKeyImporters).length)return e;var a=Object(N.a)({},e),r=e.publicKeyImporters[t.number+1],n=e.publicKeyImporters[t.number];return a.publicKeyImporters[t.number+1]=n,a.publicKeyImporters[t.number]=r,Or(a,{fingerprint:Nr(a)})}(e,t);case Ee:return function(e,t){for(var a=Object.values(e.publicKeyImporters),r=a.map(function(e){return e.publicKey}).sort().map(function(e){return a.find(function(t){return t.publicKey===e})}),n={},i=1;i<=r.length;i++)n[i]=r[i-1];var l=Object(N.a)({},e,{publicKeyImporters:n});return Or(l,{fingerprint:Nr(l)})}(e);default:return e}},spend:an,quorum:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return function(e,t){for(var a=e.addressType,r=t.value,n=Object(F.multisigBIP32Root)(a,r),i=Object(N.a)({},e,{network:r,defaultBIP32Path:n}),l=1;l<=Object.values(e.extendedPublicKeyImporters).length;l++){var o=i.extendedPublicKeyImporters[l];o.bip32PathModified||(o.bip32Path=n)}return i}(e,t);case J:return function(e,t){for(var a=t.value,r=e.network,n=Object(F.multisigBIP32Root)(a,r),i=Object(N.a)({},e,{addressType:a,defaultBIP32Path:n}),l=1;l<=Object.values(e.extendedPublicKeyImporters).length;l++){var o=i.extendedPublicKeyImporters[l];o.bip32PathModified||(o.bip32Path=n)}return i}(e,t);case V:return function(e,t){for(var a=t.value,r={},n=1;n<=a;n++)r[n]=e.extendedPublicKeyImporters[n]||Object(N.a)({},Kr,{name:"Extended Public key ".concat(n)});return Object(N.a)({},e,{extendedPublicKeyImporters:r})}(e,t);case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME":return kr(e,t,"name");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return kr(kr(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return kr(kr(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD":return kr(e,t,"method");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY":return kr(e,t,"extendedPublicKey");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED":return kr(e,t,"finalized");default:return e}},wallet:rn}),ln=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,on=Object(o.e)(nn,ln(Object(o.a)(u.a,p.a,m.a)));l.a.render(n.a.createElement(c.a,{store:on},n.a.createElement(yr,null)),document.getElementById("app")),function(){if("serviceWorker"in navigator){if(new URL("/caravan",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/caravan","/service-worker.js");Ir?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Sr(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Sr(e)})}}()}},[[381,1,2]]]);
//# sourceMappingURL=main.8a8e2fc2.chunk.js.map